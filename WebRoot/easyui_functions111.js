//A:link { color: #000000; TEXT-DECORATION: none}
//A:visited { COLOR: #000000; TEXT-DECORATION: none}
//A:hover { COLOR: #ff7f24; text-decoration: underline;}
//A:active { COLOR: #ff7f24; text-decoration: underline;}
js: language="JavaScript" type="text/JavaScript" charset="utf-8";  
//Project->Properties->javabuildpath+Libraries涓嬶紝鍙互Add涓�釜Jar鍒拌繖涓狿roject閲屻�
//淇敼閮ㄧ讲鐨勬枃浠惰矾寰勶紝淇敼宸ョ鐩綍涓殑.project鏂囦欢涓殑<name>椤�
//1. Eclipse-->Preferences..锛圡yEclipse--> Window -->Preferences:锛�2. 鍦ㄢ�type filter text鈥滅殑妗嗘閲岃緭鍏モ�ContentTypes;3. 鐐瑰嚮鍙宠竟鐨凾ext锛岄�鎷㎎ava Properties File锛岀湅涓�笅 涓嬮潰鐨勪袱涓�椤� 
//Project->Properties->javabuildpath+Libraries涓嬶紝鍙互Add涓�釜Jar鍒拌繖涓狿roject閲屻�
//淇敼閮ㄧ讲鐨勬枃浠惰矾寰勶紝淇敼宸ョ鐩綍涓殑.project鏂囦欢涓殑<name>椤�
//windows+preferences+general -> appearance -> colors and fonts 鍙宠竟灞曞紑basic -> text font
pxmlfile='xml//resource.xml';
//pxmlfile='xml//resourcecategory.xml';
//pxmlfile='xml//km.xml';
sysdatabasestring='';
rowHeight=32;
colWidth=8;
sysdateformat='Y-n-j';  //鏃ユ湡鎺т欢鐨勬棩鏈熸牸寮忥紝涓嶈冻0
sysfulldateformat='Y-m-d';  //鏃ユ湡鎺т欢鐨勬棩鏈熸牸寮�琛ヨ冻0  
syslabel={};
systext={};
sysbutton={};
syslabel.fontname='瀹嬩綋'; //label鏄剧ず鐨勫瓧浣�
syslabel.topmargin=4;  //label涓庤緭鍏ユ鐨勯珮搴﹀樊
syslabel.align='left';  //label涓巘ext涔嬮棿瀛椾綋瀵归綈
syslabel.fontsize=13;  //label瀛椾綋澶у皬
syslabel.fontbold=false;  //label瀛椾綋鏄惁鍔犻粦 
syslabel.rowspace='135%'; //瀛楃殑琛岄棿璺濓紝鐢ㄤ簬鏁版嵁鏌ヨquery 
systext.fontname='Times New roman'; //杈撳叆妗嗙殑瀛椾綋
systext.height=24;  //杈撳叆妗嗙殑榛樿楂樺害
systext.rowheight=36;  //琛ㄥ崟鎺т欢闂寸殑琛岃窛
sysbutton.height=24;
sysbutton.width=65;
sys={};
sys.browser=myCheckBrowser();  //娓歌鍣ㄧ被鍒�
if (sys.browser=='firefox' ) sys.dateformat='Y-m-d';  //琛ヨ冻0
else if (sys.browser=='ie')  sys.dateformat='Y/m/d';
sys.windowcon='movie.png';
//sys.theme={theme: "web"};  //鏍峰紡
sys.theme={ theme: "default" };
sys.fusionchartno=1;
sys.tab=String.fromCharCode(9);  //tab閿�
sys.ftab='['+String.fromCharCode(9)+']';  //tab閿垎闅斿悇瀛楁鍚嶇О
sys.vtab='['+String.fromCharCode(9)+']';  //tab閿垎闅斿悇瀛楁鍊�
sys.sqltab='@'+String.fromCharCode(9)+'@';  //sql璇彞涔嬮棿tab閿垎闅�
sys.gridcellpix=6;  //琛ㄦ牸涓瘡涓瓧绗︾殑鍍忕礌鍊�
sys.treemenuwidth=190;
sys.urlpath="";  //宸ョ▼璺緞
sys.project="";  //宸ョ▼鍚嶇О
sys.today=myLocalTime('date');
url=window.location.pathname; //hostname; //href;
arrUrl=url.split("/");
if (arrUrl.length>1) sys.project=arrUrl[1];
sys.userid="";
sys.useraccount="admin",
sys.username="admin";
sys.userright='';
sys.usertype='';
sys.userpassword='';
sys.userlogindate='';
sys.action='';
sys.flag='';
sys.emailsender='melabcenter@163.com';
sys.emailpassword='melabcenter0554';
sys.period={};
sys.notes='';
//
sys.realpath='';
sys.path=url;
sys.urlright='';  //鐢ㄦ埛杩涘叆鐨勭▼搴忛摼鎺ュ悕绉帮紝鐢ㄤ簬鏉冮檺璁剧疆
sys.menuurl='';  //鐢ㄦ埛杩涘叆鐨勭▼搴忛摼鎺ュ悕绉帮紝鐢ㄤ簬鏉冮檺璁剧疆
sys.buttonright='';  //鎸夐挳鏉冮檺
sys.screenwidth=window.screen.width;
sys.screenheight=window.screen.height;
sys.windowheight=sysGetWinSize().h;
sys.windowwidth=sysGetWinSize().w;
sys.menubutton=['addflag','updateflag','deleteflag','reviewflag','uploadflag','downloadflag','printflag'];
sys.chnnumber=['涓�,'浜�,'涓�,'鍥�,'浜�,'鍏�,'涓�,'鍏�,'涔�,'鍗�];
sys.keyeventcmp=';text;combo;combobox;numberbox;datebox;textbox;password;';
sys.maxfilenumber=100;
sys.previewtype=';pdf;jpg;jpeg;png;gif;bmp;tif;tiff;doc;docx;ppt;pptx;swf;mp3;wav;';
results=myRunSelectSql(sysdatabasestring,'xcode');
sysxcode={};
for (var i=0;i<results.length;i++){
	str="sysxcode."+results[i].str+"="+results[i].xcode+";";
	str+="\n sysxcode.xcode_"+results[i].xcode+"='"+results[i].str+"';";
	eval(str);
}
syspy={};
syspy.n=0;
syspy.firstchr = "YDYQSXMWZSSXJBYMGCCZQPSSQBYCDSCDQLDYLYBSSJGYZZJJFKCCLZDHWDWZJLJPFYYNWJJTMYHZWZHFLZPPQHGSCYYYNJQYXXGJHHSDSJNKKTMOMLCRXYPSNQSECCQZGGLLYJLMYZZSECYKYYHQWJSSGGYXYZYJWWKDJHYCHMYXJTLXJYQBYXZLDWRDJRWYSRLDZJPCBZJJBRCFTLECZSTZFXXZHTRQHYBDLYCZSSYMMRFMYQZPWWJJYFCRWFDFZQPYDDWYXKYJAWJFFXYPSFTZYHHYZYSWCJYXSCLCXXWZZXNBGNNXBXLZSZSBSGPYSYZDHMDZBQBZCWDZZYYTZHBTSYYBZGNTNXQYWQSKBPHHLXGYBFMJEBJHHGQTJCYSXSTKZHLYCKGLYSMZXYALMELDCCXGZYRJXSDLTYZCQKCNNJWHJTZZCQLJSTSTBNXBTYXCEQXGKWJYFLZQLYHYXSPSFXLMPBYSXXXYDJCZYLLLSJXFHJXPJBTFFYABYXBHZZBJYZLWLCZGGBTSSMDTJZXPTHYQTGLJSCQFZKJZJQNLZWLSLHDZBWJNCJZYZSQQYCQYRZCJJWYBRTWPYFTWEXCSKDZCTBZHYZZYYJXZCFFZZMJYXXSDZZOTTBZLQWFCKSZSXFYRLNYJMBDTHJXSQQCCSBXYYTSYFBXDZTGBCNSLCYZZPSAZYZZSCJCSHZQYDXLBPJLLMQXTYDZXSQJTZPXLCGLQTZWJBHCTSYJSFXYEJJTLBGXSXJMYJQQPFZASYJNTYDJXKJCDJSZCBARTDCLYJQMWNQNCLLLKBYBZZSYHQQLTWLCCXTXLLZNTYLNEWYZYXCZXXGRKRMTCNDNJTSYYSSDQDGHSDBJGHRWRQLYBGLXHLGTGXBQJDZPYJSJYJCTMRNYMGRZJCZGJMZMGXMPRYXKJNYMSGMZJYMKMFXMLDTGFBHCJHKYLPFMDXLQJJSMTQGZSJLQDLDGJYCALCMZCSDJLLNXDJFFFFJCZFMZFFPFKHKGDPSXKTACJDHHZDDCRRCFQYJKQCCWJDXHWJLYLLZGCFCQDSMLZPBJJPLSBCJGGDCKKDEZSQCCKJGCGKDJTJDLZYCXKLQSCGJCLTFPCQCZGWPJDQYZJJBYJHSJDZWGFSJGZKQCCZLLPSPKJGQJHZZLJPLGJGJJTHJJYJZCZMLZLYQBGJWMLJKXZDZNJQSYZMLJLLJKYWXMKJLHSKJGBMCLYYMKXJQLBMLLKMDXXKWYXYSLMLPSJQQJQXYXFJTJDXMXXLLCXQBSYJBGWYMBGGBCYXPJYGPEPFGDJGBHBNSQJYZJKJKHXQFGQZKFHYGKHDKLLSDJQXPQYKYBNQSXQNSZSWHBSXWHXWBZZXDMNSJBSBKBBZKLYLXGWXDRWYQZMYWSJQLCJXXJXKJEQXSCYETLZHLYYYSDZPAQYZCMTLSHTZCFYZYXYLJSDCJQAGYSLCQLYYYSHMRQQKLDXZSCSSSYDYCJYSFSJBFRSSZQSBXXPXJYSDRCKGJLGDKZJZBDKTCSYQPYHSTCLDJDHMXMCGXYZHJDDTMHLTXZXYLYMOHYJCLTYFBQQXPFBDFHHTKSQHZYYWCNXXCRWHOWGYJLEGWDQCWGFJYCSNTMYTOLBYGWQWESJPWNMLRYDZSZTXYQPZGCWXHNGPYXSHMYQJXZTDPPBFYHZHTJYFDZWKGKZBLDNTSXHQEEGZZYLZMMZYJZGXZXKHKSTXNXXWYLYAPSTHXDWHZYMPXAGKYDXBHNHXKDPJNMYHYLPMGOCSLNZHKXXLPZZLBMLSFBHHGYGYYGGBHSCYAQTYWLXTZQCEZYDQDQMMHTKLLSZHLSJZWFYHQSWSCWLQAZYNYTLSXTHAZNKZZSZZLAXXZWWCTGQQTDDYZTCCHYQZFLXPSLZYGPZSZNGLNDQTBDLXGTCTAJDKYWNSYZLJHHZZCWNYYZYWMHYCHHYXHJKZWSXHZYXLYSKQYSPSLYZWMYPPKBYGLKZHTYXAXQSYSHXASMCHKDSCRSWJPWXSGZJLWWSCHSJHSQNHCSEGNDAQTBAALZZMSSTDQJCJKTSCJAXPLGGXHHGXXZCXPDMMHLDGTYBYSJMXHMRCPXXJZCKZXSHMLQXXTTHXWZFKHCCZDYTCJYXQHLXDHYPJQXYLSYYDZOZJNYXQEZYSQYAYXWYPDGXDDXSPPYZNDLTWRHXYDXZZJHTCXMCZLHPYYYYMHZLLHNXMYLLLMDCPPXHMXDKYCYRDLTXJCHHZZXZLCCLYLNZSHZJZZLNNRLWHYQSNJHXYNTTTKYJPYCHHYEGKCTTWLGQRLGGTGTYGYHPYHYLQYQGCWYQKPYYYTTTTLHYHLLTYTTSPLKYZXGZWGPYDSSZZDQXSKCQNMJJZZBXYQMJRTFFBTKHZKBXLJJKDXJTLBWFZPPTKQTZTGPDGNTPJYFALQMKGXBDCLZFHZCLLLLADPMXDJHLCCLGYHDZFGYDDGCYYFGYDXKSSEBDHYKDKDKHNAXXYBPBYYHXZQGAFFQYJXDMLJCSQZLLPCHBSXGJYNDYBYQSPZWJLZKSDDTACTBXZDYZYPJZQSJNKKTKNJDJGYYPGTLFYQKASDNTCYHBLWDZHBBYDWJRYGKZYHEYYFJMSDTYFZJJHGCXPLXHLDWXXJKYTCYKSSSMTWCTTQZLPBSZDZWZXGZAGYKTYWXLHLSPBCLLOQMMZSSLCMBJCSZZKYDCZJGQQDSMCYTZQQLWZQZXSSFPTTFQMDDZDSHDTDWFHTDYZJYQJQKYPBDJYYXTLJHDRQXXXHAYDHRJLKLYTWHLLRLLRCXYLBWSRSZZSYMKZZHHKYHXKSMDSYDYCJPBZBSQLFCXXXNXKXWYWSDZYQOGGQMMYHCDZTTFJYYBGSTTTYBYKJDHKYXBELHTYPJQNFXFDYKZHQKZBYJTZBXHFDXKDASWTAWAJLDYJSFHBLDNNTNQJTJNCHXFJSRFWHZFMDRYJYJWZPDJKZYJYMPCYZNYNXFBYTFYFWYGDBNZZZDNYTXZEMMQBSQEHXFZMBMFLZZSRXYMJGSXWZJSPRYDJSJGXHJJGLJJYNZZJXHGXKYMLPYYYCXYTWQZSWHWLYRJLPXSLSXMFSWWKLCTNXNYNPSJSZHDZEPTXMYYWXYYSYWLXJQZQXZDCLEEELMCPJPCLWBXSQHFWWTFFJTNQJHJQDXHWLBYZNFJLALKYYJLDXHHYCSTYYWNRJYXYWTRMDRQHWQCMFJDYZMHMYYXJWMYZQZXTLMRSPWWCHAQBXYGZYPXYYRRCLMPYMGKSJSZYSRMYJSNXTPLNBAPPYPYLXYYZKYNLDZYJZCZNNLMZHHARQMPGWQTZMXXMLLHGDZXYHXKYXYCJMFFYYHJFSBSSQLXXNDYCANNMTCJCYPRRNYTYQNYYMBMSXNDLYLYSLJRLXYSXQMLLYZLZJJJKYZZCSFBZXXMSTBJGNXYZHLXNMCWSCYZYFZLXBRNNNYLBNRTGZQYSATSWRYHYJZMZDHZGZDWYBSSCSKXSYHYTXXGCQGXZZSHYXJSCRHMKKBXCZJYJYMKQHZJFNBHMQHYSNJNZYBKNQMCLGQHWLZNZSWXKHLJHYYBQLBFCDSXDLDSPFZPSKJYZWZXZDDXJSMMEGJSCSSMGCLXXKYYYLNYPWWWGYDKZJGGGZGGSYCKNJWNJPCXBJJTQTJWDSSPJXZXNZXUMELPXFSXTLLXCLJXJJLJZXCTPSWXLYDHLYQRWHSYCSQYYBYAYWJJJQFWQCQQCJQGXALDBZZYJGKGXPLTZYFXJLTPADKYQHPMATLCPDCKBMTXYBHKLENXDLEEGQDYMSAWHZMLJTWYGXLYQZLJEEYYBQQFFNLYXRDSCTGJGXYYNKLLYQKCCTLHJLQMKKZGCYYGLLLJDZGYDHZWXPYSJBZKDZGYZZHYWYFQYTYZSZYEZZLYMHJJHTSMQWYZLKYYWZCSRKQYTLTDXWCTYJKLWSQZWBDCQYNCJSRSZJLKCDCDTLZZZACQQZZDDXYPLXZBQJYLZLLLQDDZQJYJYJZYXNYYYNYJXKXDAZWYRDLJYYYRJLXLLDYXJCYWYWNQCCLDDNYYYNYCKCZHXXCCLGZQJGKWPPCQQJYSBZZXYJSQPXJPZBSBDSFNSFPZXHDWZTDWPPTFLZZBZDMYYPQJRSDZSQZSQXBDGCPZSWDWCSQZGMDHZXMWWFYBPDGPHTMJTHZSMMBGZMBZJCFZWFZBBZMQCFMBDMCJXLGPNJBBXGYHYYJGPTZGZMQBQTCGYXJXLWZKYDPDYMGCFTPFXYZTZXDZXTGKMTYBBCLBJASKYTSSQYYMSZXFJEWLXLLSZBQJJJAKLYLXLYCCTSXMCWFKKKBSXLLLLJYXTYLTJYYTDPJHNHNNKBYQNFQYYZBYYESSESSGDYHFHWTCJBSDZZTFDMXHCNJZYMQWSRYJDZJQPDQBBSTJGGFBKJBXTGQHNGWJXJGDLLTHZHHYYYYYYSXWTYYYCCBDBPYPZYCCZYJPZYWCBDLFWZCWJDXXHYHLHWZZXJTCZLCDPXUJCZZZLYXJJTXPHFXWPYWXZPTDZZBDZCYHJHMLXBQXSBYLRDTGJRRCTTTHYTCZWMXFYTWWZCWJWXJYWCSKYBZSCCTZQNHXNWXXKHKFHTSWOCCJYBCMPZZYKBNNZPBZHHZDLSYDDYTYFJPXYNGFXBYQXCBHXCPSXTYZDMKYSNXSXLHKMZXLYHDHKWHXXSSKQYHHCJYXGLHZXCSNHEKDTGZXQYPKDHEXTYKCNYMYYYPKQYYYKXZLTHJQTBYQHXBMYHSQCKWWYLLHCYYLNNEQXQWMCFBDCCMLJGGXDQKTLXKGNQCDGZJWYJJLYHHQTTTNWCHMXCXWHWSZJYDJCCDBQCDGDNYXZTHCQRXCBHZTQCBXWGQWYYBXHMBYMYQTYEXMQKYAQYRGYZSLFYKKQHYSSQYSHJGJCNXKZYCXSBXYXHYYLSTYCXQTHYSMGSCPMMGCCCCCMTZTASMGQZJHKLOSQYLSWTMXSYQKDZLJQQYPLSYCZTCQQPBBQJZCLPKHQZYYXXDTDDTSJCXFFLLCHQXMJLWCJCXTSPYCXNDTJSHJWXDQQJSKXYAMYLSJHMLALYKXCYYDMNMDQMXMCZNNCYBZKKYFLMCHCMLHXRCJJHSYLNMTJZGZGYWJXSRXCWJGJQHQZDQJDCJJZKJKGDZQGJJYJYLXZXXCDQHHHEYTMHLFSBDJSYYSHFYSTCZQLPBDRFRZTZYKYWHSZYQKWDQZRKMSYNBCRXQBJYFAZPZZEDZCJYWBCJWHYJBQSZYWRYSZPTDKZPFPBNZTKLQYHBBZPNPPTYZZYBQNYDCPJMMCYCQMCYFZZDCMNLFPBPLNGQJTBTTNJZPZBBZNJKLJQYLNBZQHKSJZNGGQSZZKYXSHPZSNBCGZKDDZQANZHJKDRTLZLSWJLJZLYWTJNDJZJHXYAYNCBGTZCSSQMNJPJYTYSWXZFKWJQTKHTZPLBHSNJZSYZBWZZZZLSYLSBJHDWWQPSLMMFBJDWAQYZTCJTBNNWZXQXCDSLQGDSDPDZHJTQQPSWLYYJZLGYXYZLCTCBJTKTYCZJTQKBSJLGMGZDMCSGPYNJZYQYYKNXRPWSZXMTNCSZZYXYBYHYZAXYWQCJTLLCKJJTJHGDXDXYQYZZBYWDLWQCGLZGJGQRQZCZSSBCRPCSKYDZNXJSQGXSSJMYDNSTZTPBDLTKZWXQWQTZEXNQCZGWEZKSSBYBRTSSSLCCGBPSZQSZLCCGLLLZXHZQTHCZMQGYZQZNMCOCSZJMMZSQPJYGQLJYJPPLDXRGZYXCCSXHSHGTZNLZWZKJCXTCFCJXLBMQBCZZWPQDNHXLJCTHYZLGYLNLSZZPCXDSCQQHJQKSXZPBAJYEMSMJTZDXLCJYRYYNWJBNGZZTMJXLTBSLYRZPYLSSCNXPHLLHYLLQQZQLXYMRSYCXZLMMCZLTZSDWTJJLLNZGGQXPFSKYGYGHBFZPDKMWGHCXMSGDXJMCJZDYCABXJDLNBCDQYGSKYDQTXDJJYXMSZQAZDZFSLQXYJSJZYLBTXXWXQQZBJZUFBBLYLWDSLJHXJYZJWTDJCZFQZQZZDZSXZZQLZCDZFJHYSPYMPQZMLPPLFFXJJNZZYLSJEYQZFPFZKSYWJJJHRDJZZXTXXGLGHYDXCSKYSWMMZCWYBAZBJKSHFHJCXMHFQHYXXYZFTSJYZFXYXPZLCHMZMBXHZZSXYFYMNCWDABAZLXKTCSHHXKXJJZJSTHYGXSXYYHHHJWXKZXSSBZZWHHHCWTZZZPJXSNXQQJGZYZYWLLCWXZFXXYXYHXMKYYSWSQMNLNAYCYSPMJKHWCQHYLAJJMZXHMMCNZHBHXCLXTJPLTXYJHDYYLTTXFSZHYXXSJBJYAYRSMXYPLCKDUYHLXRLNLLSTYZYYQYGYHHSCCSMZCTZQXKYQFPYYRPFFLKQUNTSZLLZMWWTCQQYZWTLLMLMPWMBZSSTZRBPDDTLQJJBXZCSRZQQYGWCSXFWZLXCCRSZDZMCYGGDZQSGTJSWLJMYMMZYHFBJDGYXCCPSHXNZCSBSJYJGJMPPWAFFYFNXHYZXZYLREMZGZCYZSSZDLLJCSQFNXZKPTXZGXJJGFMYYYSNBTYLBNLHPFZDCYFBMGQRRSSSZXYSGTZRNYDZZCDGPJAFJFZKNZBLCZSZPSGCYCJSZLMLRSZBZZLDLSLLYSXSQZQLYXZLSKKBRXBRBZCYCXZZZEEYFGKLZLYYHGZSGZLFJHGTGWKRAAJYZKZQTSSHJJXDCYZUYJLZYRZDQQHGJZXSSZBYKJPBFRTJXLLFQWJHYLQTYMBLPZDXTZYGBDHZZRBGXHWNJTJXLKSCFSMWLSDQYSJTXKZSCFWJLBXFTZLLJZLLQBLSQMQQCGCZFPBPHZCZJLPYYGGDTGWDCFCZQYYYQYSSCLXZSKLZZZGFFCQNWGLHQYZJJCZLQZZYJPJZZBPDCCMHJGXDQDGDLZQMFGPSYTSDYFWWDJZJYSXYYCZCYHZWPBYKXRYLYBHKJKSFXTZJMMCKHLLTNYYMSYXYZPYJQYCSYCWMTJJKQYRHLLQXPSGTLYYCLJSCPXJYZFNMLRGJJTYZBXYZMSJYJHHFZQMSYXRSZCWTLRTQZSSTKXGQKGSPTGCZNJSJCQCXHMXGGZTQYDJKZDLBZSXJLHYQGGGTHQSZPYHJHHGYYGKGGCWJZZYLCZLXQSFTGZSLLLMLJSKCTBLLZZSZMMNYTPZSXQHJCJYQXYZXZQZCPSHKZZYSXCDFGMWQRLLQXRFZTLYSTCTMJCXJJXHJNXTNRZTZFQYHQGLLGCXSZSJDJLJCYDSJTLNYXHSZXCGJZYQPYLFHDJSBPCCZHJJJQZJQDYBSSLLCMYTTMQTBHJQNNYGKYRQYQMZGCJKPDCGMYZHQLLSLLCLMHOLZGDYYFZSLJCQZLYLZQJESHNYLLJXGJXLYSYYYXNBZLJSSZCQQCJYLLZLTJYLLZLLBNYLGQCHXYYXOXCXQKYJXXXYKLXSXXYQXCYKQXQCSGYXXYQXYGYTQOHXHXPYXXXULCYEYCHZZCBWQBBWJQZSCSZSSLZYLKDESJZWMYMCYTSDSXXSCJPQQSQYLYYZYCMDJDZYWCBTJSYDJKCYDDJLBDJJSODZYSYXQQYXDHHGQQYQHDYXWGMMMAJDYBBBPPBCMUUPLJZSMTXERXJMHQNUTPJDCBSSMSSSTKJTSSMMTRCPLZSZMLQDSDMJMQPNQDXCFYNBFSDQXYXHYAYKQYDDLQYYYSSZBYDSLNTFQTZQPZMCHDHCZCWFDXTMYQSPHQYYXSRGJCWTJTZZQMGWJJTJHTQJBBHWZPXXHYQFXXQYWYYHYSCDYDHHQMNMTMWCPBSZPPZZGLMZFOLLCFWHMMSJZTTDHZZYFFYTZZGZYSKYJXQYJZQBHMBZZLYGHGFMSHPZFZSNCLPBQSNJXZSLXXFPMTYJYGBXLLDLXPZJYZJYHHZCYWHJYLSJEXFSZZYWXKZJLUYDTMLYMQJPWXYHXSKTQJEZRPXXZHHMHWQPWQLYJJQJJZSZCPHJLCHHNXJLQWZJHBMZYXBDHHYPZLHLHLGFWLCHYYTLHJXCJMSCPXSTKPNHQXSRTYXXTESYJCTLSSLSTDLLLWWYHDHRJZSFGXTSYCZYNYHTDHWJSLHTZDQDJZXXQHGYLTZPHCSQFCLNJTCLZPFSTPDYNYLGMJLLYCQHYSSHCHYLHQYQTMZYPBYWRFQYKQSYSLZDQJMPXYYSSRHZJNYWTQDFZBWWTWWRXCWHGYHXMKMYYYQMSMZHNGCEPMLQQMTCWCTMMPXJPJJHFXYYZSXZHTYBMSTSYJTTQQQYYLHYNPYQZLCYZHZWSMYLKFJXLWGXYPJYTYSYXYMZCKTTWLKSMZSYLMPWLZWXWQZSSAQSYXYRHSSNTSRAPXCPWCMGDXHXZDZYFJHGZTTSBJHGYZSZYSMYCLLLXBTYXHBBZJKSSDMALXHYCFYGMQYPJYCQXJLLLJGSLZGQLYCJCCZOTYXMTMTTLLWTGPXYMZMKLPSZZZXHKQYSXCTYJZYHXSHYXZKXLZWPSQPYHJWPJPWXQQYLXSDHMRSLZZYZWTTCYXYSZZSHBSCCSTPLWSSCJCHNLCGCHSSPHYLHFHHXJSXYLLNYLSZDHZXYLSXLWZYKCLDYAXZCMDDYSPJTQJZLNWQPSSSWCTSTSZLBLNXSMNYYMJQBQHRZWTYYDCHQLXKPZWBGQYBKFCMZWPZLLYYLSZYDWHXPSBCMLJBSCGBHXLQHYRLJXYSWXWXZSLDFHLSLYNJLZYFLYJYCDRJLFSYZFSLLCQYQFGJYHYXZLYLMSTDJCYHBZLLNWLXXYGYYHSMGDHXXHHLZZJZXCZZZCYQZFNGWPYLCPKPYYPMCLQKDGXZGGWQBDXZZKZFBXXLZXJTPJPTTBYTSZZDWSLCHZHSLTYXHQLHYXXXYYZYSWTXZKHLXZXZPYHGCHKCFSYHUTJRLXFJXPTZTWHPLYXFCRHXSHXKYXXYHZQDXQWULHYHMJTBFLKHTXCWHJFWJCFPQRYQXCYYYQYGRPYWSGSUNGWCHKZDXYFLXXHJJBYZWTSXXNCYJJYMSWZJQRMHXZWFQSYLZJZGBHYNSLBGTTCSYBYXXWXYHXYYXNSQYXMQYWRGYQLXBBZLJSYLPSYTJZYHYZAWLRORJMKSCZJXXXYXCHDYXRYXXJDTSQFXLYLTSFFYXLMTYJMJUYYYXLTZCSXQZQHZXLYYXZHDNBRXXXJCTYHLBRLMBRLLAXKYLLLJLYXXLYCRYLCJTGJCMTLZLLCYZZPZPCYAWHJJFYBDYYZSMPCKZDQYQPBPCJPDCYZMDPBCYYDYCNNPLMTMLRMFMMGWYZBSJGYGSMZQQQZTXMKQWGXLLPJGZBQCDJJJFPKJKCXBLJMSWMDTQJXLDLPPBXCWRCQFBFQJCZAHZGMYKPHYYHZYKNDKZMBPJYXPXYHLFPNYYGXJDBKXNXHJMZJXSTRSTLDXSKZYSYBZXJLXYSLBZYSLHXJPFXPQNBYLLJQKYGZMCYZZYMCCSLCLHZFWFWYXZMWSXTYNXJHPYYMCYSPMHYSMYDYSHQYZCHMJJMZCAAGCFJBBHPLYZYLXXSDJGXDHKXXTXXNBHRMLYJSLTXMRHNLXQJXYZLLYSWQGDLBJHDCGJYQYCMHWFMJYBMBYJYJWYMDPWHXQLDYGPDFXXBCGJSPCKRSSYZJMSLBZZJFLJJJLGXZGYXYXLSZQYXBEXYXHGCXBPLDYHWETTWWCJMBTXCHXYQXLLXFLYXLLJLSSFWDPZSMYJCLMWYTCZPCHQEKCQBWLCQYDPLQPPQZQFJQDJHYMMCXTXDRMJWRHXCJZYLQXDYYNHYYHRSLSRSYWWZJYMTLTLLGTQCJZYABTCKZCJYCCQLJZQXALMZYHYWLWDXZXQDLLQSHGPJFJLJHJABCQZDJGTKHSSTCYJLPSWZLXZXRWGLDLZRLZXTGSLLLLZLYXXWGDZYGBDPHZPBRLWSXQBPFDWOFMWHLYPCBJCCLDMBZPBZZLCYQXLDOMZBLZWPDWYYGDSTTHCSQSCCRSSSYSLFYBFNTYJSZDFNDPDHDZZMBBLSLCMYFFGTJJQWFTMTPJWFNLBZCMMJTGBDZLQLPYFHYYMJYLSDCHDZJWJCCTLJCLDTLJJCPDDSQDSSZYBNDBJLGGJZXSXNLYCYBJXQYCBYLZCFZPPGKCXZDZFZTJJFJSJXZBNZYJQTTYJYHTYCZHYMDJXTTMPXSPLZCDWSLSHXYPZGTFMLCJTYCBPMGDKWYCYZCDSZZYHFLYCTYGWHKJYYLSJCXGYWJCBLLCSNDDBTZBSCLYZCZZSSQDLLMQYYHFSLQLLXFTYHABXGWNYWYYPLLSDLDLLBJCYXJZMLHLJDXYYQYTDLLLBUGBFDFBBQJZZMDPJHGCLGMJJPGAEHHBWCQXAXHHHZCHXYPHJAXHLPHJPGPZJQCQZGJJZZUZDMQYYBZZPHYHYBWHAZYJHYKFGDPFQSDLZMLJXKXGALXZDAGLMDGXMWZQYXXDXXPFDMMSSYMPFMDMMKXKSYZYSHDZKXSYSMMZZZMSYDNZZCZXFPLSTMZDNMXCKJMZTYYMZMZZMSXHHDCZJEMXXKLJSTLWLSQLYJZLLZJSSDPPMHNLZJCZYHMXXHGZCJMDHXTKGRMXFWMCGMWKDTKSXQMMMFZZYDKMSCLCMPCGMHSPXQPZDSSLCXKYXTWLWJYAHZJGZQMCSNXYYMMPMLKJXMHLMLQMXCTKZMJQYSZJSYSZHSYJZJCDAJZYBSDQJZGWZQQXFKDMSDJLFWEHKZQKJPEYPZYSZCDWYJFFMZZYLTTDZZEFMZLBNPPLPLPEPSZALLTYLKCKQZKGENQLWAGYXYDPXLHSXQQWQCQXQCLHYXXMLYCCWLYMQYSKGCHLCJNSZKPYZKCQZQLJPDMDZHLASXLBYDWQLWDNBQCRYDDZTJYBKBWSZDXDTNPJDTCTQDFXQQMGNXECLTTBKPWSLCTYQLPWYZZKLPYGZCQQPLLKCCYLPQMZCZQCLJSLQZDJXLDDHPZQDLJJXZQDXYZQKZLJCYQDYJPPYPQYKJYRMPCBYMCXKLLZLLFQPYLLLMBSGLCYSSLRSYSQTMXYXZQZFDZUYSYZTFFMZZSMZQHZSSCCMLYXWTPZGXZJGZGSJSGKDDHTQGGZLLBJDZLCBCHYXYZHZFYWXYZYMSDBZZYJGTSMTFXQYXQSTDGSLNXDLRYZZLRYYLXQHTXSRTZNGZXBNQQZFMYKMZJBZYMKBPNLYZPBLMCNQYZZZSJZHJCTZKHYZZJRDYZHNPXGLFZTLKGJTCTSSYLLGZRZBBQZZKLPKLCZYSSUYXBJFPNJZZXCDWXZYJXZZDJJKGGRSRJKMSMZJLSJYWQSKYHQJSXPJZZZLSNSHRNYPZTWCHKLPSRZLZXYJQXQKYSJYCZTLQZYBBYBWZPQDWWYZCYTJCJXCKCWDKKZXSGKDZXWWYYJQYYTCYTDLLXWKCZKKLCCLZCQQDZLQLCSFQCHQHSFSMQZZLNBJJZBSJHTSZDYSJQJPDLZCDCWJKJZZLPYCGMZWDJJBSJQZSYZYHHXJPBJYDSSXDZNCGLQMBTSFSBPDZDLZNFGFJGFSMPXJQLMBLGQCYYXBQKDJJQYRFKZTJDHCZKLBSDZCFJTPLLJGXHYXZCSSZZXSTJYGKGCKGYOQXJPLZPBPGTGYJZGHZQZZLBJLSQFZGKQQJZGYCZBZQTLDXRJXBSXXPZXHYZYCLWDXJJHXMFDZPFZHQHQMQGKSLYHTYCGFRZGNQXCLPDLBZCSCZQLLJBLHBZCYPZZPPDYMZZSGYHCKCPZJGSLJLNSCDSLDLXBMSTLDDFJMKDJDHZLZXLSZQPQPGJLLYBDSZGQLBZLSLKYYHZTTNTJYQTZZPSZQZTLLJTYYLLQLLQYZQLBDZLSLYYZYMDFSZSNHLXZNCZQZPBWSKRFBSYZMTHBLGJPMCZZLSTLXSHTCSYZLZBLFEQHLXFLCJLYLJQCBZLZJHHSSTBRMHXZHJZCLXFNBGXGTQJCZTMSFZKJMSSNXLJKBHSJXNTNLZDNTLMSJXGZJYJCZXYJYJWRWWQNZTNFJSZPZSHZJFYRDJSFSZJZBJFZQZZHZLXFYSBZQLZSGYFTZDCSZXZJBQMSZKJRHYJZCKMJKHCHGTXKXQGLXPXFXTRTYLXJXHDTSJXHJZJXZWZLCQSBTXWXGXTXXHXFTSDKFJHZYJFJXRZSDLLLTQSQQZQWZXSYQTWGWBZCGZLLYZBCLMQQTZHZXZXLJFRMYZFLXYSQXXJKXRMQDZDMMYYBSQBHGZMWFWXGMXLZPYYTGZYCCDXYZXYWGSYJYZNBHPZJSQSYXSXRTFYZGRHZTXSZZTHCBFCLSYXZLZQMZLMPLMXZJXSFLBYZMYQHXJSXRXSQZZZSSLYFRCZJRCRXHHZXQYDYHXSJJHZCXZBTYNSYSXJBQLPXZQPYMLXZKYXLXCJLCYSXXZZLXDLLLJJYHZXGYJWKJRWYHCPSGNRZLFZWFZZNSXGXFLZSXZZZBFCSYJDBRJKRDHHGXJLJJTGXJXXSTJTJXLYXQFCSGSWMSBCTLQZZWLZZKXJMLTMJYHSDDBXGZHDLBMYJFRZFSGCLYJBPMLYSMSXLSZJQQHJZFXGFQFQBPXZGYYQXGZTCQWYLTLGWSGWHRLFSFGZJMGMGBGTJFSYZZGZYZAFLSSPMLPFLCWBJZCLJJMZLPJJLYMQDMYYYFBGYGYZMLYZDXQYXRQQQHSYYYQXYLJTYXFSFSLLGNQCYHYCWFHCCCFXPYLYPLLZYXXXXXKQHHXSHJZCFZSCZJXCPZWHHHHHAPYLQALPQAFYHXDYLUKMZQGGGDDESRNNZLTZGCHYPPYSQJJHCLLJTOLNJPZLJLHYMHEYDYDSQYCDDHGZUNDZCLZYZLLZNTNYZGSLHSLPJJBDGWXPCDUTJCKLKCLWKLLCASSTKZZDNQNTTLYYZSSYSSZZRYLJQKCQDHHCRXRZYDGRGCWCGZQFFFPPJFZYNAKRGYWYQPQXXFKJTSZZXSWZDDFBBXTBGTZKZNPZZPZXZPJSZBMQHKCYXYLDKLJNYPKYGHGDZJXXEAHPNZKZTZCMXCXMMJXNKSZQNMNLWBWWXJKYHCPSTMCSQTZJYXTPCTPDTNNPGLLLZSJLSPBLPLQHDTNJNLYYRSZFFJFQWDPHZDWMRZCCLODAXNSSNYZRESTYJWJYJDBCFXNMWTTBYLWSTSZGYBLJPXGLBOCLHPCBJLTMXZLJYLZXCLTPNCLCKXTPZJSWCYXSFYSZDKNTLBYJCYJLLSTGQCBXRYZXBXKLYLHZLQZLNZCXWJZLJZJNCJHXMNZZGJZZXTZJXYCYYCXXJYYXJJXSSSJSTSSTTPPGQTCSXWZDCSYFPTFBFHFBBLZJCLZZDBXGCXLQPXKFZFLSYLTUWBMQJHSZBMDDBCYSCCLDXYCDDQLYJJWMQLLCSGLJJSYFPYYCCYLTJANTJJPWYCMMGQYYSXDXQMZHSZXPFTWWZQSWQRFKJLZJQQYFBRXJHHFWJJZYQAZMYFRHCYYBYQWLPEXCCZSTYRLTTDMQLYKMBBGMYYJPRKZNPBSXYXBHYZDJDNGHPMFSGMWFZMFQMMBCMZZCJJLCNUXYQLMLRYGQZCYXZLWJGCJCGGMCJNFYZZJHYCPRRCMTZQZXHFQGTJXCCJEAQCRJYHPLQLSZDJRBCQHQDYRHYLYXJSYMHZYDWLDFRYHBPYDTSSCNWBXGLPZMLZZTQSSCPJMXXYCSJYTYCGHYCJWYRXXLFEMWJNMKLLSWTXHYYYNCMMCWJDQDJZGLLJWJRKHPZGGFLCCSCZMCBLTBHBQJXQDSPDJZZGKGLFQYWBZYZJLTSTDHQHCTCBCHFLQMPWDSHYYTQWCNZZJTLBYMBPDYYYXSQKXWYYFLXXNCWCXYPMAELYKKJMZZZBRXYYQJFLJPFHHHYTZZXSGQQMHSPGDZQWBWPJHZJDYSCQWZKTXXSQLZYYMYSDZGRXCKKUJLWPYSYSCSYZLRMLQSYLJXBCXTLWDQZPCYCYKPPPNSXFYZJJRCEMHSZMSXLXGLRWGCSTLRSXBZGBZGZTCPLUJLSLYLYMTXMTZPALZXPXJTJWTCYYZLBLXBZLQMYLXPGHDSLSSDMXMBDZZSXWHAMLCZCPJMCNHJYSNSYGCHSKQMZZQDLLKABLWJXSFMOCDXJRRLYQZKJMYBYQLYHETFJZFRFKSRYXFJTWDSXXSYSQJYSLYXWJHSNLXYYXHBHAWHHJZXWMYLJCSSLKYDZTXBZSYFDXGXZJKHSXXYBSSXDPYNZWRPTQZCZENYGCXQFJYKJBZMLJCMQQXUOXSLYXXLYLLJDZBTYMHPFSTTQQWLHOKYBLZZALZXQLHZWRRQHLSTMYPYXJJXMQSJFNBXYXYJXXYQYLTHYLQYFMLKLJTMLLHSZWKZHLJMLHLJKLJSTLQXYLMBHHLNLZXQJHXCFXXLHYHJJGBYZZKBXSCQDJQDSUJZYYHZHHMGSXCSYMXFEBCQWWRBPYYJQTYZCYQYQQZYHMWFFHGZFRJFCDPXNTQYZPDYKHJLFRZXPPXZDBBGZQSTLGDGYLCQMLCHHMFYWLZYXKJLYPQHSYWMQQGQZMLZJNSQXJQSYJYCBEHSXFSZPXZWFLLBCYYJDYTDTHWZSFJMQQYJLMQXXLLDTTKHHYBFPWTYYSQQWNQWLGWDEBZWCMYGCULKJXTMXMYJSXHYBRWFYMWFRXYQMXYSZTZZTFYKMLDHQDXWYYNLCRYJBLPSXCXYWLSPRRJWXHQYPHTYDNXHHMMYWYTZCSQMTSSCCDALWZTCPQPYJLLQZYJSWXMZZMMYLMXCLMXCZMXMZSQTZPPQQBLPGXQZHFLJJHYTJSRXWZXSCCDLXTYJDCQJXSLQYCLZXLZZXMXQRJMHRHZJBHMFLJLMLCLQNLDXZLLLPYPSYJYSXCQQDCMQJZZXHNPNXZMEKMXHYKYQLXSXTXJYYHWDCWDZHQYYBGYBCYSCFGPSJNZDYZZJZXRZRQJJYMCANYRJTLDPPYZBSTJKXXZYPFDWFGZZRPYMTNGXZQBYXNBUFNQKRJQZMJEGRZGYCLKXZDSKKNSXKCLJSPJYYZLQQJYBZSSQLLLKJXTBKTYLCCDDBLSPPFYLGYDTZJYQGGKQTTFZXBDKTYYHYBBFYTYYBCLPDYTGDHRYRNJSPTCSNYJQHKLLLZSLYDXXWBCJQSPXBPJZJCJDZFFXXBRMLAZHCSNDLBJDSZBLPRZTSWSBXBCLLXXLZDJZSJPYLYXXYFTFFFBHJJXGBYXJPMMMPSSJZJMTLYZJXSWXTYLEDQPJMYGQZJGDJLQJWJQLLSJGJGYGMSCLJJXDTYGJQJQJCJZCJGDZZSXQGSJGGCXHQXSNQLZZBXHSGZXCXYLJXYXYYDFQQJHJFXDHCTXJYRXYSQTJXYEFYYSSYYJXNCYZXFXMSYSZXYYSCHSHXZZZGZZZGFJDLTYLNPZGYJYZYYQZPBXQBDZTZCZYXXYHHSQXSHDHGQHJHGYWSZTMZMLHYXGEBTYLZKQWYTJZRCLEKYSTDBCYKQQSAYXCJXWWGSBHJYZYDHCSJKQCXSWXFLTYNYZPZCCZJQTZWJQDZZZQZLJJXLSBHPYXXPSXSHHEZTXFPTLQYZZXHYTXNCFZYYHXGNXMYWXTZSJPTHHGYMXMXQZXTSBCZYJYXXTYYZYPCQLMMSZMJZZLLZXGXZAAJZYXJMZXWDXZSXZDZXLEYJJZQBHZWZZZQTZPSXZTDSXJJJZNYAZPHXYYSRNQDTHZHYYKYJHDZXZLSWCLYBZYECWCYCRYLCXNHZYDZYDYJDFRJJHTRSQTXYXJRJHOJYNXELXSFSFJZGHPZSXZSZDZCQZBYYKLSGSJHCZSHDGQGXYZGXCHXZJWYQWGYHKSSEQZZNDZFKWYSSTCLZSTSYMCDHJXXYWEYXCZAYDMPXMDSXYBSQMJMZJMTZQLPJYQZCGQHXJHHLXXHLHDLDJQCLDWBSXFZZYYSCHTYTYYBHECXHYKGJPXHHYZJFXHWHBDZFYZBCAPNPGNYDMSXHMMMMAMYNBYJTMPXYYMCTHJBZYFCGTYHWPHFTWZZEZSBZEGPFMTSKFTYCMHFLLHGPZJXZJGZJYXZSBBQSCZZLZCCSTPGXMJSFTCCZJZDJXCYBZLFCJSYZFGSZLYBCWZZBYZDZYPSWYJZXZBDSYUXLZZBZFYGCZXBZHZFTPBGZGEJBSTGKDMFHYZZJHZLLZZGJQZLSFDJSSCBZGPDLFZFZSZYZYZSYGCXSNXXCHCZXTZZLJFZGQSQYXZJQDCCZTQCDXZJYQJQCHXZTDLGSCXZSYQJQTZWLQDQZTQCHQQJZYEZZZPBWKDJFCJPZTYPQYQTTYNLMBDKTJZPQZQZZFPZSBNJLGYJDXJDZZKZGQKXDLPZJTCJDQBXDJQJSTCKNXBXZMSLYJCQMTJQWWCJQNJNLLLHJCWQTBZQYDZCZPZZDZYDDCYZZZCCJTTJFZDPRRTZTJDCQTQZDTJNPLZBCLLCTZSXKJZQZPZLBZRBTJDCXFCZDBCCJJLTQQPLDCGZDBBZJCQDCJWYNLLZYZCCDWLLXWZLXRXNTQQCZXKQLSGDFQTDDGLRLAJJTKUYMKQLLTZYTDYYCZGJWYXDXFRSKSTQTENQMRKQZHHQKDLDAZFKYPBGGPZREBZZYKZZSPEGJXGYKQZZZSLYSYYYZWFQZYLZZLZHWCHKYPQGNPGBLPLRRJYXCCSYYHSFZFYBZYYTGZXYLXCZWXXZJZBLFFLGSKHYJZEYJHLPLLLLCZGXDRZELRHGKLZZYHZLYQSZZJZQLJZFLNBHGWLCZCFJYSPYXZLZLXGCCPZBLLCYBBBBUBBCBPCRNNZCZYRBFSRLDCGQYYQXYGMQZWTZYTYJXYFWTEHZZJYWLCCNTZYJJZDEDPZDZTSYQJHDYMBJNYJZLXTSSTPHNDJXXBYXQTZQDDTJTDYYTGWSCSZQFLSHLGLBCZPHDLYZJYCKWTYTYLBNYTSDSYCCTYSZYYEBHEXHQDTWNYGYCLXTSZYSTQMYGZAZCCSZZDSLZCLZRQXYYELJSBYMXSXZTEMBBLLYYLLYTDQYSHYMRQWKFKBFXNXSBYCHXBWJYHTQBPBSBWDZYLKGZSKYHXQZJXHXJXGNLJKZLYYCDXLFYFGHLJGJYBXQLYBXQPQGZTZPLNCYPXDJYQYDYMRBESJYYHKXXSTMXRCZZYWXYQYBMCLLYZHQYZWQXDBXBZWZMSLPDMYSKFMZKLZCYQYCZLQXFZZYDQZPZYGYJYZMZXDZFYFYTTQTZHGSPCZMLCCYTZXJCYTJMKSLPZHYSNZLLYTPZCTZZCKTXDHXXTQCYFKSMQCCYYAZHTJPCYLZLYJBJXTPNYLJYYNRXSYLMMNXJSMYBCSYSYLZYLXJJQYLDZLPQBFZZBLFNDXQKCZFYWHGQMRDSXYCYTXNQQJZYYPFZXDYZFPRXEJDGYQBXRCNFYYQPGHYJDYZXGRHTKYLNWDZNTSMPKLBTHBPYSZBZTJZSZZJTYYXZPHSSZZBZCZPTQFZMYFLYPYBBJQXZMXXDJMTSYSKKBJZXHJCKLPSMKYJZCXTMLJYXRZZQSLXXQPYZXMKYXXXJCLJPRMYYGADYSKQLSNDHYZKQXZYZTCGHZTLMLWZYBWSYCTBHJHJFCWZTXWYTKZLXQSHLYJZJXTMPLPYCGLTBZZTLZJCYJGDTCLKLPLLQPJMZPAPXYZLKKTKDZCZZBNZDYDYQZJYJGMCTXLTGXSZLMLHBGLKFWNWZHDXUHLFMKYSLGXDTWWFRJEJZTZHYDXYKSHWFZCQSHKTMQQHTZHYMJDJSKHXZJZBZZXYMPAGQMSTPXLSKLZYNWRTSQLSZBPSPSGZWYHTLKSSSWHZZLYYTNXJGMJSZSUFWNLSOZTXGXLSAMMLBWLDSZYLAKQCQCTMYCFJBSLXCLZZCLXXKSBZQCLHJPSQPLSXXCKSLNHPSFQQYTXYJZLQLDXZQJZDYYDJNZPTUZDSKJFSLJHYLZSQZLBTXYDGTQFDBYAZXDZHZJNHHQBYKNXJJQCZMLLJZKSPLDYCLBBLXKLELXJLBQYCXJXGCNLCQPLZLZYJTZLJGYZDZPLTQCSXFDMNYCXGBTJDCZNBGBQYQJWGKFHTNPYQZQGBKPBBYZMTJDYTBLSQMPSXTBNPDXKLEMYYCJYNZCTLDYKZZXDDXHQSHDGMZSJYCCTAYRZLPYLTLKXSLZCGGEXCLFXLKJRTLQJAQZNCMBYDKKCXGLCZJZXJHPTDJJMZQYKQSECQZDSHHADMLZFMMZBGNTJNNLGBYJBRBTMLBYJDZXLCJLPLDLPCQDHLXZLYCBLCXZZJADJLNZMMSSSMYBHBSQKBHRSXXJMXSDZNZPXLGBRHWGGFCXGMSKLLTSJYYCQLTSKYWYYHYWXBXQYWPYWYKQLSQPTNTKHQCWDQKTWPXXHCPTHTWUMSSYHBWCRWXHJMKMZNGWTMLKFGHKJYLSYYCXWHYECLQHKQHTTQKHFZLDXQWYZYYDESBPKYRZPJFYYZJCEQDZZDLATZBBFJLLCXDLMJSSXEGYGSJQXCWBXSSZPDYZCXDNYXPPZYDLYJCZPLTXLSXYZYRXCYYYDYLWWNZSAHJSYQYHGYWWAXTJZDAXYSRLTDPSSYYFNEJDXYZHLXLLLZQZSJNYQYQQXYJGHZGZCYJCHZLYCDSHWSHJZYJXCLLNXZJJYYXNFXMWFPYLCYLLABWDDHWDXJMCXZTZPMLQZHSFHZYNZTLLDYWLSLXHYMMYLMBWWKYXYADTXYLLDJPYBPWUXJMWMLLSAFDLLYFLBHHHBQQLTZJCQJLDJTFFKMMMBYTHYGDCQRDDWRQJXNBYSNWZDBYYTBJHPYBYTTJXAAHGQDQTMYSTQXKBTZPKJLZRBEQQSSMJJBDJOTGTBXPGBKTLHQXJJJCTHXQDWJLWRFWQGWSHCKRYSWGFTGYGBXSDWDWRFHWYTJJXXXJYZYSLPYYYPAYXHYDQKXSHXYXGSKQHYWFDDDPPLCJLQQEEWXKSYYKDYPLTJTHKJLTCYYHHJTTPLTZZCDLTHQKZXQYSTEEYWYYZYXXYYSTTJKLLPZMCYHQGXYHSRMBXPLLNQYDQHXSXXWGDQBSHYLLPJJJTHYJKYPPTHYYKTYEZYENMDSHLCRPQFDGFXZPSFTLJXXJBSWYYSKSFLXLPPLBBBLBSFXFYZBSJSSYLPBBFFFFSSCJDSTZSXZRYYSYFFSYZYZBJTBCTSBSDHRTJJBYTCXYJEYLXCBNEBJDSYXYKGSJZBXBYTFZWGENYHHTHZHHXFWGCSTBGXKLSXYWMTMBYXJSTZSCDYQRCYTWXZFHMYMCXLZNSDJTTTXRYCFYJSBSDYERXJLJXBBDEYNJGHXGCKGSCYMBLXJMSZNSKGXFBNBPTHFJAAFXYXFPXMYPQDTZCXZZPXRSYWZDLYBBKTYQPQJPZYPZJZNJPZJLZZFYSBTTSLMPTZRTDXQSJEHBZYLZDHLJSQMLHTXTJECXSLZZSPKTLZKQQYFSYGYWPCPQFHQHYTQXZKRSGTTSQCZLPTXCDYYZXSQZSLXLZMYCPCQBZYXHBSXLZDLTCDXTYLZJYYZPZYZLTXJSJXHLPMYTXCQRBLZSSFJZZTNJYTXMYJHLHPPLCYXQJQQKZZSCPZKSWALQSBLCCZJSXGWWWYGYKTJBBZTDKHXHKGTGPBKQYSLPXPJCKBMLLXDZSTBKLGGQKQLSBKKTFXRMDKBFTPZFRTBBRFERQGXYJPZSSTLBZTPSZQZSJDHLJQLZBPMSMMSXLQQNHKNBLRDDNXXDHDDJCYYGYLXGZLXSYGMQQGKHBPMXYXLYTQWLWGCPBMQXCYZYDRJBHTDJYHQSHTMJSBYPLWHLZFFNYPMHXXHPLTBQPFBJWQDBYGPNZTPFZJGSDDTQSHZEAWZZYLLTYYBWJKXXGHLFKXDJTMSZSQYNZGGSWQSPHTLSSKMCLZXYSZQZXNCJDQGZDLFNYKLJCJLLZLMZZNHYDSSHTHZZLZZBBHQZWWYCRZHLYQQJBEYFXXXWHSRXWQHWPSLMSSKZTTYGYQQWRSLALHMJTQJSMXQBJJZJXZYZKXBYQXBJXSHZTSFJLXMXZXFGHKZSZGGYLCLSARJYHSLLLMZXELGLXYDJYTLFBHBPNLYZFBBHPTGJKWETZHKJJXZXXGLLJLSTGSHJJYQLQZFKCGNNDJSSZFDBCTWWSEQFHQJBSAQTGYPQLBXBMMYWXGSLZHGLZGQYFLZBYFZJFRYSFMBYZHQGFWZSYFYJJPHZBYYZFFWODGRLMFTWLBZGYCQXCDJYGZYYYYTYTYDWEGAZYHXJLZYYHLRMGRXXZCLHNELJJTJTPWJYBJJBXJJTJTEEKHWSLJPLPSFYZPQQBDLQJJTYYQLYZKDKSQJYYQZLDQTGJQYZJSUCMRYQTHTEJMFCTYHYPKMHYZWJDQFHYYXWSHCTXRLJHQXHCCYYYJLTKTTYTMXGTCJTZAYYOCZLYLBSZYWJYTSJYHBYSHFJLYGJXXTMZYYLTXXYPZLXYJZYZYYPNHMYMDYYLBLHLSYYQQLLNJJYMSOYQBZGDLYXYLCQYXTSZEGXHZGLHWBLJHEYXTWQMAKBPQCGYSHHEGQCMWYYWLJYJHYYZLLJJYLHZYHMGSLJLJXCJJYCLYCJPCPZJZJMMYLCQLNQLJQJSXYJMLSZLJQLYCMMHCFMMFPQQMFYLQMCFFQMMMMHMZNFHHJGTTHHKHSLNCHHYQDXTMMQDCYZYXYQMYQYLTDCYYYZAZZCYMZYDLZFFFMMYCQZWZZMABTBYZTDMNZZGGDFTYPCGQYTTSSFFWFDTZQSSYSTWXJHXYTSXXYLBYQHWWKXHZXWZNNZZJZJJQJCCCHYYXBZXZCYZTLLCQXYNJYCYYCYNZZQYYYEWYCZDCJYCCHYJLBTZYYCQWMPWPYMLGKDLDLGKQQBGYCHJXY";
syspy.multichr={"19969":"DZ","19975":"WM","19988":"QJ","20048":"YL","20056":"SC","20060":"NM","20094":"QG","20127":"QJ","20167":"QC","20193":"YG","20250":"KH","20256":"ZC","20282":"SC","20285":"QJG","20291":"TD","20314":"YD","20340":"NE","20375":"TD","20389":"YJ","20391":"CZ","20415":"PB","20446":"YS","20447":"SQ","20504":"TC","20608":"KG","20854":"QJ","20857":"ZC","20911":"PF","20504":"TC","20608":"KG","20854":"QJ","20857":"ZC","20911":"PF","20985":"AW","21032":"PB","21048":"XQ","21049":"SC","21089":"YS","21119":"JC","21242":"SB","21273":"SC","21305":"YP","21306":"QO","21330":"ZC","21333":"SDC","21345":"QK","21378":"CA","21397":"SC","21414":"XS","21442":"SC","21477":"JG","21480":"TD","21484":"ZS","21494":"YX","21505":"YX","21512":"HG","21523":"XH","21537":"PB","21542":"PF","21549":"KH","21571":"E","21574":"DA","21588":"TD","21589":"O","21618":"ZC","21621":"KHA","21632":"ZJ","21654":"KG","21679":"LKG","21683":"KH","21710":"A","21719":"YH","21734":"WOE","21769":"A","21780":"WN","21804":"XH","21834":"A","21899":"ZD","21903":"RN","21908":"WO","21939":"ZC","21956":"SA","21964":"YA","21970":"TD","22003":"A","22031":"JG","22040":"XS","22060":"ZC","22066":"ZC","22079":"MH","22129":"XJ","22179":"XA","22237":"NJ","22244":"TD","22280":"JQ","22300":"YH","22313":"XW","22331":"YQ","22343":"YJ","22351":"PH","22395":"DC","22412":"TD","22484":"PB","22500":"PB","22534":"ZD","22549":"DH","22561":"PB","22612":"TD","22771":"KQ","22831":"HB","22841":"JG","22855":"QJ","22865":"XQ","23013":"ML","23081":"WM","23487":"SX","23558":"QJ","23561":"YW","23586":"YW","23614":"YW","23615":"SN","23631":"PB","23646":"ZS","23663":"ZT","23673":"YG","23762":"TD","23769":"ZS","23780":"QJ","23884":"QK","24055":"XH","24113":"DC","24162":"ZC","24191":"GA","24273":"QJ","24324":"NL","24377":"TD","24378":"QJ","24439":"PF","24554":"ZS","24683":"TD","24694":"WE","24733":"LK","24925":"TN","25094":"ZG","25100":"XQ","25103":"XH","25153":"PB","25170":"PB","25179":"KG","25203":"PB","25240":"ZS","25282":"FB","25303":"NA","25324":"KG","25341":"ZY","25373":"WZ","25375":"XJ","25384":"A","25457":"A","25528":"SD","25530":"SC","25552":"TD","25774":"ZC","25874":"ZC","26044":"YW","26080":"WM","26292":"PB","26333":"PB","26355":"ZY","26366":"CZ","26397":"ZC","26399":"QJ","26415":"ZS","26451":"SB","26526":"ZC","26552":"JG","26561":"TD","26588":"JG","26597":"CZ","26629":"ZS","26638":"YL","26646":"XQ","26653":"KG","26657":"XJ","26727":"HG","26894":"ZC","26937":"ZS","26946":"ZC","26999":"KJ","27099":"KJ","27449":"YQ","27481":"XS","27542":"ZS","27663":"ZS","27748":"TS","27784":"SC","27788":"ZD","27795":"TD","27812":"O","27850":"PB","27852":"MB","27895":"SL","27898":"PL","27973":"QJ","27981":"KH","27986":"HX","27994":"XJ","28044":"YC","28065":"WG","28177":"SM","28267":"QJ","28291":"KH","28337":"ZQ","28463":"TL","28548":"DC","28601":"TD","28689":"PB","28805":"JG","28820":"QG","28846":"PB","28952":"TD","28975":"ZC","29100":"A","29325":"QJ","29575":"SL","29602":"FB","30010":"TD","30044":"CX","30058":"PF","30091":"YSP","30111":"YN","30229":"XJ","30427":"SC","30465":"SX","30631":"YQ","30655":"QJ","30684":"QJG","30707":"SD","30729":"XH","30796":"LG","30917":"PB","31074":"NM","31085":"JZ","31109":"SC","31181":"ZC","31192":"MLB","31293":"JQ","31400":"YX","31584":"YJ","31896":"ZN","31909":"ZY","31995":"XJ","32321":"PF","32327":"ZY","32418":"HG","32420":"XQ","32421":"HG","32438":"LG","32473":"GJ","32488":"TD","32521":"QJ","32527":"PB","32562":"ZSQ","32564":"JZ","32735":"ZD","32793":"PB","33071":"PF","33098":"XL","33100":"YA","33152":"PB","33261":"CX","33324":"BP","33333":"TD","33406":"YA","33426":"WM","33432":"PB","33445":"JG","33486":"ZN","33493":"TS","33507":"QJ","33540":"QJ","33544":"ZC","33564":"XQ","33617":"YT","33632":"QJ","33636":"XH","33637":"YX","33694":"WG","33705":"PF","33728":"YW","33882":"SR","34067":"WM","34074":"YW","34121":"QJ","34255":"ZC","34259":"XL","34425":"JH","34430":"XH","34485":"KH","34503":"YS","34532":"HG","34552":"XS","34558":"YE","34593":"ZL","34660":"YQ","34892":"XH","34928":"SC","34999":"QJ","35048":"PB","35059":"SC","35098":"ZC","35203":"TQ","35265":"JX","35299":"JX","35782":"SZ","35828":"YS","35830":"E","35843":"TD","35895":"YG","35977":"MH","36158":"JG","36228":"QJ","36426":"XQ","36466":"DC","36710":"JC","36711":"ZYG","36767":"PB","36866":"SK","36951":"YW","37034":"YX","37063":"XH","37218":"ZC","37325":"ZC","38063":"PB","38079":"TD","38085":"QY","38107":"DC","38116":"TD","38123":"YD","38224":"HG","38241":"XTC","38271":"ZC","38415":"YE","38426":"KH","38461":"YD","38463":"AE","38466":"PB","38477":"XJ","38518":"YT","38551":"WK","38585":"ZC","38704":"XS","38739":"LJ","38761":"GJ","38808":"SQ","39048":"JG","39049":"XJ","39052":"HG","39076":"CZ","39271":"XT","39534":"TD","39552":"TD","39584":"PB","39647":"SB","39730":"LG","39748":"TPB","40109":"ZQ","40479":"ND","40516":"HG","40536":"HG","40583":"QJ","40765":"YQ","40784":"QJ","40840":"YK","40863":"QJG"};
//鎺т欢
sys.cmp = [
		'textfield','combo','combofield','label','labelfield',
		'readonlyfield','displayfield','linkfield',
		'textpicker','gridpicker','treepicker','editbutton',
		'checkbox','memofield','memo',
		'sysuser','sysdate','sysusername','sysnumber',
		'fileupload','filedownload','filefield','imageupload',
		'datefield','password',
		'numberfield','decimalfield','rmb','rmbfield','totalfields','summaryfields',
		'spinfield',
		'report','footer',
		'groupbox','tab','form'
	];
//灞炴�
sys.xattrs=['title','text','label','length','value','blanktext','minvalue','maxvalue','filename','datafields','nodefields','filterfields','sortfield','style','rmb','sumfields','avgfields','countfields','maxfields','minfields','summarycolumn',
'keyfield','lockedfields','decimal','sql','items','valuefields','labelwidth','masterfield','url','font','rule','rowheight','checkbox','modal','align','table',
'documentdate','reviewfields','format','titlerows','titlefont'];

//鍙紪杈戝垪鏁版嵁绫诲瀷
sys.editableColumnfields="/textfield/datefield/decimalfield/numberfield/combo/combofield/editbutton/";  
//涓婁紶鍚庨檮浠剁殑瀛樻斁璺緞
syspath={};
syspath.master="mybase//";
syspath.teachers="mybase//photos//teachers//";
syspath.students="mybase//photos//students//";
syspath.labs="mybase//labs//";
syspath.contacts="mybase//contacts//";  //瀛樻斁鑱旂郴浜洪檮浠�
syspath.employees="mybase//employees//";  //瀛樻斁鍛樺伐闄勪欢
syspath.products="mybase//products//";   //瀛樻斁浜у搧闄勪欢
syspath.activities="mybase//activities//";   //瀛樻斁娲诲姩闄勪欢
syspath.services="mybase//services//";   //瀛樻斁鏈嶅姟闄勪欢
syspath.customers="mybase//customers//";   //瀛樻斁瀹㈡埛闄勪欢
syspath.collections="mybase//collections//";  //瀛樻斁鍥炵鍗曢檮浠�
syspath.orders="mybase//orders//";  //瀛樻斁璁㈠崟闄勪欢
syspath.faqs="mybase//faqs//";    //瀛樻斁faq闄勪欢
syspath.troubles="mybase//troubles//";    //瀛樻斁鏁呴殰闄勪欢
syspath.invoices="mybase//invoices//";   //瀛樻斁鍙戠エ闄勪欢
syspath.resources="mybase//resources//";   //瀛樻斁璧勬簮闄勪欢
syspath.homework="mybase//homework//";   //瀛樻斁璧勬簮闄勪欢
sysfilenotfound="system//images//filenotfound.png";  
prowppx=26;
pcolppx=7;   
pgridrowheight=21;
pwinheight=600;
pwinwidth=800;
pitemsPerPage=20;  //grid涓瘡椤垫樉绀虹殑璁板綍鏁伴噺
maxReturnNumber=20;  //涓�浠庡悗鍙拌繑鍥炶褰曠殑鏁伴噺锛岃秴杩囪鍊兼爲涓妭鐐瑰皢鍒嗗眰鑾峰彇銆�
//浠ヤ笅涓哄嚱鏁�
function myToXcode(s){
	ss='';
	if (s!='' && s!=undefined){
		for (i=0;i<s.length;i++){
			s1=s.substr(i,1);
			x=s1.charCodeAt();
			if ((s1>='a' && s1<='z')||(s1>='A' && s1<='Z')){
				y=eval('sysxcode.'+s1)+2*i+1;
				ss+=''+(y+200000);
			}else{ 
				ss+=''+(100000+x+2*i+1);
			}
		}
	}
	return ss;
}

function myFromXcode(s){
	var result='';
	if (s!='' && s!=undefined){
		var s1='';
		var s2='';
		var k=0;
		var i=0;
		while (i<s.length){
			s1=s.substr(i,6);
			s2="";
			x=parseInt(s1);
			if (x>200000){  //瀛楁瘝
				y=x-200000-2*k-1;
				eval('s2=sysxcode.xcode_'+y+';');
				result+=s2;
			}else{
				y=x-100000-2*k-1;  //姹夊瓧闈炲瓧姣�
				s2= String.fromCharCode(y);
				result+=s2;
			}
			i+=6;k++;
		}			
	}
	return result;
}

function myGetPyCode(str) {  //姹夊瓧鍏ㄩ儴
    var result = "";
    if (syspy.n==0){
	    var results=myRunSelectSql('','select * from sys_unicodestr');
		for (var i=0;i<results.length;i++){
			var s=results[i].str;
			eval(s);
		}
		syspy.n=results.length;
	}
	if (str!='' && str!=undefined){
	    for (var i = 0; i < str.length; i++) {
	    	var s=str.charAt(i).toString();
	    	var unicode = s.charCodeAt();  
	    	var py='';
			if (s != "" ) {
				if (unicode>=19968 && unicode<=40869){
					py=eval("syspy.x"+unicode);
		        }else py=s;
				result += py; //.substr(0,1);  //getPY(str.charAt(i).toString())
			}	
	    }
    }
    return result;
}

function myGetMemoCode(str) {  //姹夊瓧棣栧瓧姣�
    var result = "";
	if (str!='' && str!=undefined){
	    for (var i = 0; i < str.length; i++) {
	    	var s=str.charAt(i).toString();
	    	var unicode = s.charCodeAt();  
	    	var py='';
			if (s != "" ) {
				if (unicode>=19968 && unicode<=40869){
					py=syspy.firstchr.charAt(unicode-19968);
		        }else{
		        	py=s;
		        }
				result += py; //.substr(0,1);  //getPY(str.charAt(i).toString())
			}	
	    }
    }
    return result.toLowerCase();
}

function myGetPeriod(date1){
	var s=null;
	var sql="select * from periods where startdate<='"+date1+"' and enddate>='"+date1+"'";
	results=myRunSelectSql('',sql);
	if (results.length>0){
		s=results[0];
	}
	return s;	
}

function myGetBrowserScrollSize(){
    var css = {
        "border":  "none",
        "height":  "200px",
        "margin":  "0",
        "padding": "0",
        "width":   "200px"
    };
    var inner = $("<div>").css($.extend({}, css));
    var outer = $("<div>").css($.extend({
        "left":       "-1000px",
        "overflow":   "scroll",
        "position":   "absolute",
        "top":        "-1000px"
    }, css)).append(inner).appendTo("body")
    .scrollLeft(1000)
    .scrollTop(1000);
    var scrollSize = {
        "height": (outer.offset().top - inner.offset().top) || 0,
        "width": (outer.offset().left - inner.offset().left) || 0
    };
    outer.remove();
    return scrollSize;
}

function myCheckBrowser(){
	//杩斿洖褰撳墠姝ｅ湪浣跨敤鐨勬父瑙堝櫒鐨勭被鍨�
	var type=navigator.userAgent.toLowerCase();
	var browser=navigator.userAgent;
	if (type.indexOf('msie')>=0 && type.indexOf('opera')<0) {
		browser='ie';
	}else if (type.indexOf('firefox')>=0) {
		browser='firefox';
	}else if (type.indexOf('opera')>=0) {
		browser='opera';
	}else if (type.indexOf('chrome')>=0) {
		browser='chrome';
	}else if (type.indexOf('safari')>=0) {
		browser='safari';
	}
	return (browser);	 	
}

function sysGetWinSize(){
	//鑾峰彇绐楀彛楂樺害鍜屽搴︺�
	var p={};
	p.w=0; p.h=0;
	if (window.innerHeight)
		p.h = window.innerHeight;
	else if ((document.body) && (document.body.clientHeight))
		p.h = document.body.clientHeight;
	//閫氳繃娣卞叆Document鍐呴儴瀵筨ody杩涜妫�祴锛岃幏鍙栫獥鍙ｅぇ灏�
	if (document.documentElement && document.documentElement.clientHeight && document.documentElement.clientWidth){
		p.h = document.documentElement.clientHeight;
	}
	//winHeight=window.screen.height;
	//鐞冨搴�
	if (window.innerWidth)//Internet Explorer,Chrome,Firefox,Opera,Safari;
		p.w = window.innerWidth;
	else if ((document.body) && (document.body.clientWidth))//Internet Explorer 8,7,6,5
		p.w = document.body.clientWidth;
	//閫氳繃娣卞叆Document鍐呴儴瀵筨ody杩涜妫�祴锛岃幏鍙栫獥鍙ｅぇ灏�
	if (document.documentElement && document.documentElement.clientHeight && document.documentElement.clientWidth){
		p.w = document.documentElement.clientWidth;
	}
	return(p);
}

function myBanBackSpace(e){
	var ev = e || window.event;
	var obj = ev.target || ev.srcElement;
	var t = obj.type || obj.getAttribute('type');
	var vReadOnly = obj.readOnly;
	var vDisabled = obj.disabled;
	vReadOnly = (vReadOnly == undefined) ? false : vReadOnly;
	vDisabled = (vDisabled == undefined) ? true : vDisabled;
	var flag1= ev.keyCode == 8 && (t=='password' || t=='text' || t=='textarea')&& (vReadOnly==true || vDisabled==true);
	var flag2= ev.keyCode == 8 && t != 'password' && t != 'text' && t != 'textarea' ;
	var flag3= (ev.keyCode == 33 || ev.keyCode == 34) && t== 'textarea' && sys.browser=='chrome' ;
	if (t=='keditor'){
		console.log(999);
		var flag4= (ev.keyCode == 8 ) && (vReadOnly==true || vDisabled==true);
		if (!flag4) flag4= (ev.keyCode == 33 || ev.keyCode == 34) && (sys.browser=='chrome') ;
		if (!flag4) flag4= (ev.keyCode == 86 && ev.ctrlKey);
	}
	if(flag2 || flag1 || flag3|| flag4 ) return false;
	//if(flag2 || flag1 || flag3|| flag4 || flag5 || flag6) return false;
}

function trim(str){
	if (str!=undefined) return str.replace(/(^\s*)|(\s*$)/g,'');
	else return '';
}


String.prototype.replaceAll = function (str1,str2){
	var str = this;
	if (str==undefined) str=''; 
	var result = str.replace(eval("/"+str1+"/gi"),str2);
	return result;
}

String.prototype.replaceAllString = function (str1,str2){
	var str = this;
	if (str==undefined) str=''; 
	var result = str.replace(str1,str2);
	while (result.indexOf(str1)>=0){
		var result = str.replace(str1,str2);		
	} 
	return result;
}

function replace92(str,str1){ //鏇挎崲鏂滄潬涓哄叾浠栧瓧绗�
	var result=''
	if (str==undefined) str=''; 
	for (var i=0;i<str.length;i++){
		if (str.substr(i,1)=="\\") result+=str1;
		else result+=str.substr(i,1);
	}
	return result;
}

function myReplace(str,str1,str2){ //鏇挎崲鏂滄潬涓哄叾浠栧瓧绗�
	var result=''
	if (str==undefined) str='';
	if (str1=="\\"){
		for (var i=0;i<str.length;i++){
			if (str.substr(i,1)=="\\") result+=str2;
			else result+=str.substr(i,1);
		}
	}else if (str1=="'"){
		for (var i=0;i<str.length;i++){
			if (str.substr(i,1)=="'"){
				result+="\\'";
			}	
			else result+=str.substr(i,1);
		}
	}
	return result;
}
function myToSqlValue(value){
	if (value==undefined) value=''; 
	//value=value.replace(/\r/g,"&nbsp;")
	value=value.replace(/\n/g,"<br>") 
	value=value.replaceAll("'","''");
	return value;
}

function mySpace(n){
	var str='';
	for (var i=1; i<=n; i++) str+='&nbsp;';
	return str;
}

function myToUnicode(str){  //姹夊瓧杞崲鎴恥nicode锛岃嫳鏂囧瓧姣嶄篃鏄�浣嶆暟瀛�
	var result='';
	if (str!=''){
		for(var i=0;i<str.length;i++){
			var chr=parseInt(str[i].charCodeAt(0),10).toString(16);
			//if (chr.length<4) chr+='%%%%';
			result+=chr.substr(0,4);
		}
	}
	//return escape(str).toLocaleLowerCase().replace(/%u/gi, '#u');     
	return result;
}

function xmyToChn(str){  //unicode杞崲涓烘眽瀛楀拰鑻辨枃瀛楁瘝
	var result='';
	if (str!=''){
		for (var i=0;i<str.length;i++){
			var chr=str.substr(i*4,4);
			chr=chr.replace('%','');
			result+=String.fromCharCode(parseInt(chr,16).toString(10));
		}
	} 
	return result;
 	//return unescape(str.replace(/\#u/gi, '%u'));  	
}

function myGetDate(dtime,f){
	var y=dtime.year+'';
	var m=dtime.month+'';
	var d=dtime.day+'';
	var h=dtime.hour+'';
	var mi=dtime.min+'';
	var s=dtime.sec+'';
	var ms=dtime.ms+'';
	var seconds=dtime.seconds+'';
	if (m.length<2) m='0'+m;
	if (d.length<2) d='0'+d;
	if (h.length<2) h='0'+h;
	if (mi.length<2) mi='0'+mi;
	if (s.length<2) s='0'+s;
	if (ms.length<2) ms='0'+ms;
	if (ms.length<3) ms='0'+ms;
	var result='';
	if (f.indexOf('y')>=0) result+=y;
	if (f.indexOf('m')>=0) result+='-'+m;
	if (f.indexOf('d')>=0) result+='-'+d;
	if (f.indexOf('h')>=0) result+=' '+h;
	if (f.indexOf('n')>=0) result+=':'+mi;
	if (f.indexOf('s')>=0) result+=':'+s;
	if (f.indexOf('d')>=0) result+='.'+ms;
	if (f=='date') result=y+'-'+m+'-'+d;
	if (f=='datetime') result=y+'-'+m+'-'+d+' '+h+':'+mi+':'+s;
	if (f=='longdate') result=y+'骞�+m+'鏈�+d+'鏃�;
	if (f=='time') result=h+':'+mi+':'+s+'.'+ms;
	if (f=='fulldatetime' || f=='') result=y+'-'+m+'-'+d+' '+h+':'+mi+':'+s+'.'+ms;
	if (f=='timeid') result=y+''+m+''+d+''+seconds;
	if (f=='seconds'||f=='second') result=seconds;  //鏃堕棿鏁存暟
	//鏃ユ湡--鍓�0浣嶏紝鏃ユ湡+鏃堕棿--19锛屽畬鏁�-鍏�3浣�
	return result;
}

//鎸夋牸寮忓彇鏈嶅姟鍣ㄧ郴缁熷綋鍓嶆棩鏈熸椂闂�
function myServerTime(f){
	var s={};
	$.ajax({     
		type: "Post",     
		url: "system/easyui_servertime.jsp",     
		data: {}, 
		async: false, method: 'post',    
		success: function(data) {     
			eval("s="+data);
		}     
	});
	return myGetDate(s,f);
}

//鎸夋牸寮忓彇鏈湴绯荤粺褰撳墠鏃ユ湡鏃堕棿
function myLocalTime(f){
	var date = new Date();
	var s={};
	s.year=date.getFullYear();
	s.month=date.getMonth()+1;
	s.day=date.getDate();
	s.hour=date.getHours();
	s.min=date.getMinutes();
	s.sec=date.getSeconds();
	s.ms=date.getMilliseconds();
	s.seconds=date.getTime();
	return myGetDate(s,f);
}

function myDateTime(date,format){
	date=date.trim()+'     ';
	//console.log(date);
	var y = date.substr(0,4);
	var m= date.substr(5,2);
	var d= date.substr(8,2);
	var h= date.substr(11,2);
	var mi= date.substr(14,2);
	var s= date.substr(17,2);
	var ms= date.substr(20,3);
	if (m.length<2) m='0'+m;
	if (d.length<2) d='0'+d;
	if (h.length<2) h='0'+h;
	if (mi.length<2) mi='0'+mi;
	if (s.length<2) s='0'+s;
	var t=h+':'+mi+':'+s+'.'+ms;
	var result='';
	if (format=='date' || format=='ymd') result=y+'-'+m+'-'+d;
	else if (format=='longdate') result=y+'骞�+m+'鏈�+d+'鏃�;
	else if (format=='time') result=t;
	else if (format=='fulltime') result=y+'-'+m+'-'+d+'-'+h+' '+mi+':'+s+':'+ms;
	else if (format=='second') result=date.getTime();
	else if (format=='year') result=y;
	else if (format=='month') result=y+'-'+m;
	else if (format=='datetime' || format=='ymdhm') result=y+'-'+m+'-'+d+' '+h+':'+mi;
	else if (format=='hms') result=h+':'+mi+':'+s;
	else if (format=='hm') result=h+':'+mi;
	else if (format=='h') result=h;
	else if (format=='m') result=mi;
	else if (format=='s') result=s;
	else result=y+'-'+m+'-'+d+' '+t;
	//console.log(result);
	return result;
}

function myDateDiff(date1,date2){  //璁＄畻涓や釜鏃ユ湡鐨勬椂闂村樊锛岃繑鍥炰竴涓璞�
	var data={};
	date2=new Date(date2.replace(/-/g, "/"));  
	date1=new Date(date1.replace(/-/g, "/"));  
	var ms=date2.getTime()-date1.getTime();  //鏃堕棿宸殑姣鏁�
	var day=Math.floor(ms/(24*3600*1000));
	var left1=ms%(24*3600*1000);    //璁＄畻澶╂暟鍚庡墿浣欑殑姣鏁�
	var hour=Math.floor(left1/(3600*1000));
	var left2=left1%(3600*1000);        //璁＄畻灏忔椂鏁板悗鍓╀綑鐨勬绉掓暟
	var min=Math.floor(left2/(60*1000));
	var left3=left2%(60*1000)      //璁＄畻鍒嗛挓鏁板悗鍓╀綑鐨勬绉掓暟
	var sec=Math.round(left3/1000)
	var result='';
	if (day!=0) result+=day+'澶�;
	if (hour!=0) result+=hour+'灏忔椂';
	if (min!=0) result+=min+'鍒�;
	if (sec!=0) result+=sec+'绉�;
	data.day=result;
	result='';
	if (day*24+hour!=0) result+=(day*24+hour)+'灏忔椂';
	if (min!=0) result+=min+'鍒�;
	if (sec!=0) result+=sec+'绉�;
	data.hour=result;
	result='';
	if (day*24*60+hour*60+min!=0) result+=(day*24*60+hour*60+min)+'鍒�;
	if (sec!=0) result+=sec+'绉�;
	data.min=result;
	data.sec=(day*24*3600+hour*3600+min*60+sec);   //涓嶅姞鈥滅'瀛�
	data.ms=ms;
	return data;
}

function dateadd(date,days){
	date = date.replace(/-/g,"/"); //鏇存敼鏃ユ湡鏍煎紡  
    var nd = new Date(date);  
    nd = nd.valueOf();  
    nd = nd + days * 24 * 60 * 60 * 1000;  
    nd = new Date(nd);  
    var y = nd.getFullYear();  
    var m = nd.getMonth()+1;  
    var d = nd.getDate();  
    if(m <= 9) m = "0"+m;  
    if(d <= 9) d = "0"+d;   
    var cdate = y+"-"+m+"-"+d;  
    return cdate;  
}

//鎸夋牸寮忓彇鏃ユ湡
function myDateboxValue(id,format){
	var result='';
	if (format==undefined || format=='') var format='long';
	if ($("#"+id).length>0){
		var s=$("#"+id).textbox('getValue');
		var tmp=s.split('-');
		if (tmp.length==3){
			if (tmp[1].length<2) tmp[1]='0'+tmp[1];
			if (tmp[2].length<2) tmp[2]='0'+tmp[2];
			if (format=='long' || format=='day' ){
				result=tmp[0]+'骞�+tmp[1]+'鏈�+tmp[2]+'鏃�;
			}else if (format=='month'){
				result=tmp[0]+'骞�+tmp[1]+'鏈�;
			}else if (format=='year'){
				result=tmp[0]+'骞�;
			}
		}	
	}
	return result;
}

//瀹氫箟绠�崟娑堟伅妗�
function myMessage(msg,icon,width,callback){
	var title='绯荤粺鎻愮ず';
	if (callback==undefined) callback='';
	if (msg.constructor == window.Array){  //鏁扮粍鏃�
		var str=''
		for (var i=0;i<msg.length;i++){
			if (i>0) str+='@n';
			str+=msg[i];
		}
		str=str.replaceAll('<br>','@n');
	}else{
		var str=msg;
	}
	var tmp=str.split('@n');
	if (icon==undefined || icon=='') var icon='info';
	else if (icon=='warn') icon='warning';
	else if (icon=='alert') icon='info';
	var k=0;
	str='';
	for (var i=0;i<tmp.length;i++){
		var s=tmp[i].replaceAll(' ','&nbsp;');
		if (tmp[i]=='') s='<div style="margin:5px 0px 0px 0px;"></div>';
		else if (tmp.length==1) s='<div style="margin:8px 12px 5px 0px;">'+s+'</div>';//鍙湁涓�
		else if (k==0) s='<div style="margin:0px 18px 5px 0px;">'+s+'</div>';
		else if (k==1) s='<div style="margin:0px 12px 5px 0px;">'+s+'</div>';
		else s='<div style="margin:0px 0px 5px 30px;">'+s+'</div>';
		s='<center>'+s+'</center>';
		if (tmp[i]!='') k++;  
		str+=s;
	}
	var cmd='';
	cmd+="$.messager.alert({\n";
	cmd+="title:'"+title+"',\n";
	cmd+="msg:'"+str+"<br>',\n";
	if (width!=undefined && width>0){
		cmd+="width: "+width+",\n";
	}	
	cmd+="icon:'"+icon+"'\n";
	if (callback!='') cmd+=",fn:"+callback;
	cmd+="});\n";
	//console.log(cmd);
	eval(cmd);
}

//瀹氫箟yesno纭妗嗙殑鏂囨湰
function myConfirmMessage(msg){
	var tmp=msg.split('@n');
	var k=0;
	var str='';
	for (var i=0;i<tmp.length;i++){
		var s=tmp[i].replaceAll(' ','&nbsp;');
		if (tmp.length==1) s='<div style="margin:8px 16px 0px 0px;">'+s+'</div>';//鍙湁涓�
		else if (tmp[i]=='') s='<div style="margin:6px 0px 0px 0px;"></div>';
		else if (k==0) s='<div style="margin:6px 32px 0px 0px;">'+s+'</div>';
		else if (k==1) s='<div style="margin:6px 32px 0px 0px;">'+s+'</div>';
		else s='<div style="margin:6px 0px 0px 10px;">'+s+'</div>';
		s='<center>'+s+'</center>';
		if (tmp[i]!='') k++;  
		str+=s;
	}
	return(str);
}

function myMessageEvent(){  //绌轰簨浠�

}

//瀹氫箟鎻愮ず妗�
function myMessageShow(msg,width){
	if (width==undefined || width==0) width=200; 
	var tmp=msg.split('@n');
	var s='';
	var str='';
	var k=0;
	for(var i=0;i<tmp.length;i++){
		s=tmp[i].replaceAll(' ','&nbsp;');
		s='<div style="margin:8px 0px 0px 0px;">'+s+'</div>';
		s='<center>'+s+'</center>';
		if (tmp[i]!='') k++;  
		str+=s;
	}
	if (k>=2) height=96+(k-1)*24;
	else height=88+8+9;
	$.messager.show({
		title: '绯荤粺鎻愮ず',
		width: width,
		height: height,
		msg: str,
		timeout: 2000,
		showType:'slide'
	});
}	 

//瀹氫箟鎺т欢浣嶇疆鏍峰紡Style
function myDefineLabelStyle(top,left,height,width){
	var str='';
	if (top!=undefined && left!=undefined){
		str+='style=\\"';
		if (syslabel.fontbold) str+='font-weight:bold; ';
		str+='font-size: '+syslabel.fontsize+'px; font-family: '+syslabel.fontname+'; TOP: '+top+'px; LEFT: '+left+'px; ';
		if (height!=undefined && height>0){
			str+=' height: '+height+'px;';
		}	
		if (width!=undefined && width>0){
			str+=' width: '+width+'px;';
		}
		str+=' position: absolute';
	}	
	return str; 
}

//鐙珛鐨刲abel
function myLabel(id,parent,label,top,left,width,style){
	if (parent=='') parent='document.body';
	if (style==undefined) var style='';
	else style=';'+style+';';
	var str='';
	if (width==undefined || width==0) width=200;
	str+="<label id='"+id+"' align='left'>";
	if (style.indexOf(';b;')>=0) str+='<b>'; 
	if (style.indexOf(';u;')>=0) str+='<u>'; 
	if (style.indexOf(';i;')>=0) str+='<i>'; 
	if (style.indexOf(';a;')>=0) str+='<a>'; 
	str+=label;
	if (style.indexOf(';a;')>=0) str+='</a>'; 
	if (style.indexOf(';i;')>=0) str+='</i>'; 
	if (style.indexOf(';u;')>=0) str+='</u>'; 
	if (style.indexOf(';b;')>=0) str+='</b>';
	str+="</label>"; 
	$("#"+parent).append($(str));
	if (width>0) $("#"+id).css(myLabelCss(parent,top,left,0,width));
	else $("#"+id).css(myLabelCss(parent,top,left,0,0));
	$("#"+id).attr('type','label');
	$("#"+id).attr('xparent',parent);
	$("#"+id).attr('xid',id);
}

//鏂囨湰鏂囧瓧鏍峰紡
function myLabelCss(parent,top,left,height,width){
	var css='';
	if (sys.browser=='firefox' && parent!=undefined && $("#"+parent).length>0 && $("#"+parent).attr('type')=='fieldset'){
		top=top-16;   //firefox娓歌鍣�
	}
	var str='var css={position: "absolute"';
	if (syslabel.fontbold) str+=', font-weight:bold';
	str+=', "font-size":'+syslabel.fontsize+', "font-family":"'+syslabel.fontname+'"';
	if (top!=undefined && left!=undefined){
		str+=', "top":'+top+', "left":'+left;
		if (width!=undefined && width>0){
			str+=', "width": '+width;
		}else{
			str+=', "autosize":true';
		}
		if (height!=undefined && height>0){
			str+=', "height": '+height;
		}
		str+=', "z-index":2};\n';
	}else{
		str+="};\n";
	}
	eval(str);
	return css;		
}

//瀹氫箟鎺т欢浣嶇疆鏍峰紡CSS
function myTextCss(parent,top,left,height,width){
	var str='';
	var css='';
	if (top!=undefined && left!=undefined){
		if (sys.browser=='firefox' && parent!=undefined && $("#"+parent).length>0 && $("#"+parent).attr('type')=='fieldset'){
			top=top-16;
		}
		str='var css={padding:"0px 2px 0px 4px", position: "absolute", top:"'+top+'px", left:"'+left+'px"';
		if (width!=undefined && width>0){
			str+=', width: '+width;
		}
		if (height!=undefined && height>0){
			str+=', height: '+height;
		}
		str+=', "z-index":2};\n';
	}else{
		str+="\n";
	}
	eval(str);
	return css;		
}

function myFieldStyle(id,style){  //璁剧疆style鍙銆佸浘鏍�
	if (style!=undefined && style!=''){
		var tmp=(style+';').split(';');
		for (var i=0;i<tmp.length;i++){
			if (tmp[i]=='readonly'){
				$("#"+id).textbox({readonly: true});
				$("#"+id).attr('xreadonly',true);
			} 
			if (tmp[i]=='email') $("#"+id).textbox({validType:'email'});
			if (tmp[i]=='url') $("#"+id).textbox({validType:'url'});
			if (tmp[i]=='password') $("#"+id).textbox({type:'password'});
			if (tmp[i].indexOf('icon:')>=0){
				var x1=tmp[i].indexOf('icon:');
				var x2=tmp[i].indexOf(';',x1+1);
				if (x1>=0 && x2>0) var icon=tmp[i].substring(x1+5,x2-1); 
				else var icon=tmp[i].substr(x1+5,255);
				//$("#"+id).textbox({iconCls: icon});  //
				$("#"+id).textbox({buttonIcon: icon}); 
			}
		}
	}
}	

function myFieldLabel(id,parent,label,labelwidth,top,left,height,width){
	//瀹氫箟鎺т欢涓殑label
	if (label!=undefined && label!=''){
		if (label.substr(0,1)=='*'){
			label=label.substring(1);
			$("#"+parent).append("<label id='xlabel"+id+"' align='"+syslabel.align+"'>*</label>");
			$("#xlabel"+id).css(myLabelCss(parent,top+syslabel.topmargin,left+labelwidth+width+12,0,0));
		}
		$("#"+parent).append("<label id='label"+id+"' align='"+syslabel.align+"'>"+label+"</label>");
		if (labelwidth>0){
			$("#label"+id).css(myLabelCss(parent,top+syslabel.topmargin,left,0,labelwidth));
		}else{
			$("#label"+id).css(myLabelCss(parent,top,1*left+2,0,label.length*syslabel.fontsize));
			top=1*(top+syslabel.fontsize+syslabel.topmargin); //鎹㈣鏄剧ず鏂囨湰
		}
	}else labelwidth=0;
}

function myHiddenFields(fields){
	var str='';
	var parent='main';
	var items=fields.split(';');
	for (var i=0; i<items.length; i++){
		str='<input hidden="true" type="hidden" id="'+items[i]+'" style="left:0px; top:0px; height:0px; width:0px; padding:0px 0;" />';
		$("#"+parent).append($(str));
		$("#"+items[i]).attr('xid',items[i]);
	}
}

function myTextField(id,parent,label,labelwidth,top,left,height,width,value,style){
	var str='';
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	str+='<div id="'+id+'_div" style="margin:0; padding:0;" ><input ';
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		str+=' value="'+value+'"';
	}
	str+=' class="easyui-validatebox easyui-textbox" type="text" id="'+id+'" style="margin:0px 0px 0px 0px; padding:0px 6px 0px 6px;" ></div>';
	$("#"+parent).append($(str));
	$("#"+id+'_div').css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	$("#"+id).css({height:"100%", width:"100%"});
	$("#"+id).textbox({height: height});
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		//$("#"+id).textbox('setValue',value);
	}
	if (style!=undefined) myFieldStyle(id,style);
	//$('#'+id).textbox('textbox').bind('keydown',function(e){
		//myKeyDownEvent(id);
	//});
}

//瀹氫箟date鎺т欢
function myDateField(id,parent,label,labelwidth,top,left,height,width,value,style){
	var str='';
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	str+='<div id="'+id+'_div"><input ';
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		str+=' value="'+value+'"';
	}
	str+=' class="easyui-datebox" type="text" id="'+id+'" style="padding:0px 6px 0px 6px;" ></div>';
	$("#"+parent).append($(str));
	$("#"+id+'_div').css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	$("#"+id).datebox({height: height, width: width});
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		//$("#"+id).datebox('setValue',value);
	}
	myFieldStyle(id,style);
}

//瀹氫箟date鎺т欢
function myTimeField(id,parent,label,labelwidth,top,left,height,width,value,style){
	var str='';
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	str+='<div id="'+id+'_div"><input ';
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		str+=' value="'+value+'"';
	}
	str+=' class="easyui-timespinner" type="text" id="'+id+'" style="padding:0px 6px 0px 6px;" ></div>';
	$("#"+parent).append($(str));
	$("#"+id+'_div').css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	$("#"+id).timespinner({height: height, width: width, showSeconds: false});
	    //min: '08:30',
	
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		$("#"+id).timespinner('setValue',value);
	}
	myFieldStyle(id,style);
}

//textarea
function myMemoField(id,parent,label,labelwidth,top,left,height,width,value,style){
	myTextareaField(id,parent,label,labelwidth,top,left,height,width,value,style);
}

function myTextareaField(id,parent,label,labelwidth,top,left,height,width,value,style){
	var str='';
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}
	var str='<div id="'+id+'_div"><textarea ';
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		str+=' value="'+value+'"';
	}
	str+=' id="'+id+'" style="resize:none; padding:5px 5px 0px 5px;" ></textarea></div>';
	$("#"+parent).append($(str));
	$("#"+id+"_div").css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	$("#"+id).css({ height: height, width: width });
	$("#"+id).attr('type','textarea');  //淇敼鎺т欢绫诲埆锛岀郴缁熶笉浼氳嚜宸卞姞鍏ワ紝鍦ㄨ祴鍊煎嚱鏁颁腑浣跨敤鍒般�
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		$("#"+id).val(value);
	}
	myFieldStyle(id,style);
}

function myEditorField(id,parent,label,labelwidth,top,left,height,width,value,style){
	var str='';
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}
	var str='<div  id="'+id+'_div"><textarea ';
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		str+=' value="'+value+'"';
	}
	str+='spellcheck="false" id="'+id+'" style="resize:none;';
	if (height>0) str+='height:'+height+'px;';
	if (width>0) str+='width:'+width+'px;';
	str+='padding:5px 5px 0px 5px;" ></textarea></div>';
	$("#"+parent).append($(str));
	if (top>0 && left>0){
		$("#"+id+"_div").css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	}
	//$("#"+id+"").css({'overflow-y': 'auto'});
	//$("#"+id).css({ height: height, width: width });
	$("#"+id).attr('type','keditor');  //淇敼鎺т欢绫诲埆锛岀郴缁熶笉浼氳嚜宸卞姞鍏ワ紝鍦ㄨ祴鍊煎嚱鏁颁腑浣跨敤鍒般�
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	style=';'+style+';';
	var resizeflag=0;
	var pastetype=-1;
	var toolbar0="'|','formatblock','fontname','fontsize','|','bold','italic','underline','strikethrough','forecolor', 'hilitecolor','|','justifyleft','justifycenter','justifyright','insertorderedlist','insertunorderedlist','subscript','superscript','lineheight','removeformat','|','image','flash','media','|','table','link','advtable','|','preview','fullscreen','|'";
	var toolbar1="'|','formatblock','fontname','fontsize','|','bold','italic','underline','strikethrough','forecolor', 'hilitecolor','|','justifyleft','justifycenter','justifyright','insertorderedlist','insertunorderedlist','subscript','superscript','lineheight','removeformat','|','image','flash','media','|','table','emoticons','link','advtable','undo','redo','cut','copy','paste','selectall','|','preview','fullscreen','|'";
	toolbar="";  //simpletoolbar,previewbar,toolbar,fulltoolbar
	if (style.indexOf(";nopaste;")>=0) pastetype=0;	
	if (style.indexOf(";resize;")>=0) resizeflag=1;	
	if (style.indexOf(";readonly;")>=0) toolbar="''";
	if (style.indexOf(";toolbar;")>=0) toolbar=toolbar0;
	if (style.indexOf(";toolbar1;")>=0) toolbar=toolbar1;
	str="window."+id+"=KindEditor.create('textarea[id=\""+id+"\"]',{\n"+
	"allowFileManager: false,\n"+
	"newlineTag : 'br',\n"+ 
	"resizeType: "+resizeflag+",\n";
	if (style.indexOf(";readonly;")>=0){
		str+="readonlyMode: true,\n";
	}else{
		str+="readonlyMode: false,\n";
	}
	if (pastetype!=-1) str+="pasteType:"+pastetype+",\n";
	//"filterMode: false,\n"+
	//str+="height:'100%', width:'100%', \n"+
	str+="minWidth: 500, \n"+
	"minHeight: 100, \n"+
	//"loadStyleMode: true, \n"+
	"allowPreviewEmoticons: false\n";
	if (toolbar!='') str+=",items:[\n"+toolbar+"]\n";
	if (style.indexOf(";autoheight;")>=0){
		str+=",autoHeightMode : true,\n"+
		"afterCreate : function() {\n"+
		"	this.loadPlugin('autoheight');\n"+
		"}\n";
	}
	str+="});"; 
	eval(str);
	if (style.indexOf(";hide;")>=0){
		$("#"+id).prev().hide();  //闅愯棌鎺т欢锛岀敤浜庤浆鎹㈡暟鎹埌html
	}
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		mySetValue(id,value);
	}
}

//瀹氫箟spinnerfield鎺т欢
function mySpinnerField(id,parent,label,labelwidth,top,left,height,width,value,min,max,style){
	var str='';
	if (height==0) height=systext.height+2;
	if (parent=='') parent='main';
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	str+='<div id="'+id+'_div"><input ';
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		str+=' value="'+value+'"';
	}
	str+=' class="easyui-numberspinner" type="text" id="'+id+'" style="text-align:right; padding:0px 4px 0px 4px;" ';
	if (value!='') str+=" value='"+value+"'";
	str+='"></div>\n';
	$("#"+parent).append($(str));
	$("#"+id+'_div').css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	$("#"+id).numberspinner({height:height, width:width});
	if (!isNaN(min)) $("#"+id).numberspinner({min: min});
	if (!isNaN(max)) $("#"+id).numberspinner({max: max});
	$("#"+id).numberspinner('textbox').css('text-align','right');  //鍙冲榻�
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
}

//瀹氫箟decimal鎺т欢
function myNumberField(id,parent,label,labelwidth,top,left,height,width,length,decimal,value,min,max,style){
	var str='';
	if (height==0) height=systext.height+2;
	if (parent=='') parent='main';
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	str+='<div id="'+id+'_div"><input ';
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		str+=' value="'+value+'"';
	}
	str+=' class="easyui-numberbox" type="text" id="'+id+'" style="text-align:right; padding:0px 4px 0px 4px;" ';
	if (value!='') str+=" value='"+value+"'";
	str+='\n data-options="';
	if (decimal>0) str+="precision:"+decimal+"";
	else str+="precision:0";
	if (min!=max){
		if (!isNaN(min)) str+=",min:"+min+"";
		if (!isNaN(max)) str+=",max:"+max+"";
	}
	str+='"></div>\n';
	$("#"+parent).append($(str));
	$("#"+id+'_div').css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	$("#"+id).numberbox({height:height, width:width});
	$("#"+id).numberbox('textbox').css('text-align','right');  //鍙冲榻�
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
}

function myNumericField(id,parent,label,labelwidth,top,left,height,width,length,decimal,value,min,max,style){
	myNumberField(id,parent,label,labelwidth,top,left,height,width,length,decimal,value,min,max,style);
}

function mySearchField(id,parent,label,labelwidth,top,left,height,width,value,style){
	var str='';
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	str+='<div id="'+id+'_div"><input ';
	str+=' class="easyui-searchbox easyui-textbox" data-options="prompt:\''+value+'\'" id="'+id+'" style="margin:0px 0px 0px 0px; padding:0px 6px 0px 6px;" ></div>';
	$("#"+parent).append($(str));
	$("#"+id+'_div').css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	$("#"+id).css({height:"100%", width:"100%"});
	$("#"+id).searchbox({height: height});
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	myFieldStyle(id,style);
}

//瀹氫箟鏁扮粍checkbox   cccccccheck
function myCheckBoxField(id,parent,label,labelwidth,top,left,text,checked){
	//cols涓哄垪鏁帮紝rowheight涓鸿楂�items=[c70]aaaa;[u80]bbbbbb;[80]ccccc   u-unchecked  ,c--checked
	//澧炲姞涓�釜value鍊兼帶浠讹紝鍚嶇О涓篿d+'_value'
	if (style!=undefined && style!='') style=';'+style+';';
	else var style='';
	//if (label=='') labelwidth=0;
	if (parent=='') parent='main';
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,0,0);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,0,0);
	}
	var str='<div id="'+id+'_div"><input type="checkbox" id="'+id+'" />'+text+'</div>';  //value涓鸿嚜瀹氫箟灞炴�
	$("#"+parent).append($(str));
	if (top>0 && left>0){
		$("#"+id+"_div").css(myTextCss(parent,top,1*(left+labelwidth),0,0));
	}
	$("#"+id).prop('checked',checked);  //璁剧疆鍒濆�閫変腑鐘舵�
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xtype','checkbox');  //鑷畾涔夊睘鎬�
	$("#"+id).attr("xtext",text);  //鑷畾涔夊睘鎬ц缃枃鏈�锛屽瓙椤规爣棰�
}
	
function myCheckBoxGroup(id,parent,label,labelwidth,top,left,rowheight,cols,items){
	//cols涓哄垪鏁帮紝rowheight涓鸿楂�items=[c70]aaaa;[u80]bbbbbb;[80]ccccc   u-unchecked  ,c--checked
	//澧炲姞涓�釜value鍊兼帶浠讹紝鍚嶇О涓篿d+'_value'
	if (style!=undefined && style!='') style=';'+style+';';
	else var style='';
	//if (label=='') labelwidth=0;
	if (rowheight<=0) rowheight=systext.rowheight;
	if (parent=='') parent='main';
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,0,0);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,0,0);
	}
	var tmp=items.split(';');
	var r=0;  //璁板綍琛屾暟
	var c=1   //璁板綍鍒楁暟
	var posx=0;
	var posy=0;
	var values='';
	for (var i=1;i<=tmp.length;i++){
		var index1=tmp[i-1].lastIndexOf('[');
		var index2=tmp[i-1].lastIndexOf(']');
		var checked='c';
		var width=0;
		var text=''
		if (index2>index1 && index1>=0){
			text=tmp[i-1].substr(index2+1);
			var checked=tmp[i-1].substr(index1+1,1);
			if (checked=='u' || checked=='c'){
				width=tmp[i-1].substring(index1+2,index2);
			}else{
				width=tmp[i-1].substring(index1+1,index2);
			}
			if (width=='') width='0';	
		}else{
			text=tmp[i-1];
		}
		if (checked=='u') var checked=false;  //甯冨皵鍊�
		else var checked=true;
		values+=';'+text;
		if (i==1 && tmp.length==1) var itemid=id;
		else itemid=id+i;
		if (width==0) width=text.length*syslabel.fontsize+32;
		var str='<div id="'+itemid+'_div"><input type="checkbox" id="'+itemid+'" />'+text+'</div>';  //value涓鸿嚜瀹氫箟灞炴�
		$("#"+parent).append($(str));
		$("#"+itemid+'_div').css(myTextCss(parent,top+posy,left+labelwidth+1*posx,0,width));
		$("#"+itemid).prop('checked',checked);  //璁剧疆鍒濆�閫変腑鐘舵�
		$("#"+itemid).attr('xparent',parent);  //鑷畾涔夊睘鎬�
		$("#"+itemid).attr('xlabel',label);  //鑷畾涔夊睘鎬�
		//$("#"+itemid).attr('type','checkboxitem');  //鑷畾涔夊睘鎬�
		$("#"+itemid).attr('xtype','checkbox');  //鑷畾涔夊睘鎬�
		$("#"+itemid).attr("xtext",text);  //鑷畾涔夊睘鎬ц缃枃鏈�锛屽瓙椤规爣棰�
		$("#"+itemid).attr("xid",itemid);  //
		if (i==1 && tmp.length==1) $("#"+itemid).attr("xgroupid",'');  //鎵�湪缁勭殑ID涓虹┖锛屽彧鏈変竴涓�椤圭殑鎯呭喌
		else $("#"+itemid).attr("xgroupid",id);  //璁剧疆鎵�湪缁勭殑ID锛岃祴鍊煎嚱鏁颁腑浣跨敤鍒�
		if (c>=cols){
			posx=0; c=1; posy+=rowheight;
		}else{
			posx+=1.0*width; c++;		
		}
	}//for
	if (tmp.length>1){
		$("#"+parent).append("<input hidden='true' type='hidden' id='"+id+"' />");
		$("#"+id).val(values.substr(1));
		$("#"+id).attr('type','checkboxgroup');  //鑷畾涔夊睘鎬�
		$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
		$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
		$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	}
	$("#"+id).attr('xitemcount',tmp.length);  //鑷畾涔夊睘鎬э紝璁板綍瀛愰」涓暟
	//onchange浜嬩欢
	for (var i=1;i<=tmp.length;i++){
		if (i==1 && tmp.length==1) var itemid=id;
		else itemid=id+i;
		$("#"+itemid).on("change", function (event) {
			myCheckBoxChange(id,values.substr(1));
		});
	}
}
	
//瀹氫箟鏁扮粍combo
function myComboField(id,parent,label,labelwidth,top,left,height,width,items,value,style){
	if (style!=undefined && style!='' ) style=';'+style+';';
	else var style='';
	//if (label=='') labelwidth=0;
	if (height==0) height=systext.height;
	if (parent=='') parent='main';
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	var str='var '+id+'source =[';
	var tmp=items.split(';');
	for (var i=0;i<tmp.length;i++){
		if (i>0) str+=',';
		str+='{"'+id+'":"'+tmp[i]+'","sysid":"'+i+'"}';
	}
	str+='];';
	eval(str);
	str='<div style="margin:0;" id="'+id+'_div" ><input ';
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		str+=' value="'+value+'"';
	}
	str+=' class="easyui-combobox" id="'+id+'" style="padding:0px 6px 0px 6px;" /></div>';
	$("#"+parent).append($(str));
	$("#"+id+'_div').css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	$("#"+id).css({width: width, height: height});
	$('#'+id).combobox({
		data: eval(id+'source'),
		valueField: id,
		textField: id,
		formatter: function(row){
			return '<div align="left" style="padding:2px 0px 0px 4px;">' + eval('row.'+id)+'</div>';
		}
	});	
	if (style.indexOf('readonly')>=0) $('#'+id).combobox({'readonly': true});
	if (style.indexOf('autodrop')>=0) $('#'+id).combobox({'editable': false});
	if (tmp.length<13) $('#'+id).combobox({panelHeight: 'auto'});
	else $('#'+id).combobox({panelHeight: 12*(syslabel.fontsize+8)});
	$('#'+id).attr('type','combobox');  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	//浜嬩欢
	$('#'+id).combobox({
		onSelect: function(record) {  //閫変腑浜嬩欢
			if (record) {
				$("#"+id).attr('xrecord',JSON.stringify(record));  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�
				$("#"+id).attr('xindex',record.sysrowno-1);  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�			
			}else{
				$("#"+id).attr('xrecord','{}');  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�
				$("#"+id).attr('xindex',-1);  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�			
			}
			if (style.indexOf(';fnselect;')>=0) fnonSelectCombo(id,record);
			$("#"+id).next("span").find("input").focus();
		}
	});
	//浜嬩欢瀹氫箟鏀惧湪鏈�悗
	//澶嶉�浜嬩欢
	if (style.indexOf(';checkbox;')>=0){
		$("#"+id).combobox({
			formatter: function(row){
				var s ='<input type="checkbox" class="combobox-checkbox">'+eval("row."+id);
				return s;
			},
			multiple:true,
			editable: false,
			separator:';',
			onLoadSuccess:function(){
				var opts = $(this).combobox('options');
				var target = this;
				var values = $(target).combobox('getValues');
				$.map(values, function(value){
					var el = opts.finder.getEl(target, value);
					el.find('input.combobox-checkbox')._propAttr('checked', true);
				})
			},
			onSelect:function(row){
				var opts = $(this).combobox('options');
				var el = opts.finder.getEl(this, row[opts.valueField]);
				el.find('input.combobox-checkbox')._propAttr('checked', true);
			},
			onUnselect:function(row){
				var opts = $(this).combobox('options');
				var el = opts.finder.getEl(this, row[opts.valueField]);
				el.find('input.combobox-checkbox')._propAttr('checked', false);
			}
		});		
	} //if
	
	if (style.indexOf(';filter;')>=0){  //鍔╄鐮佽繃婊�
		$("#"+id).combobox({
	    	filter: function(q, row){
	       		var opts = $(this).combobox('options');
	       		q=q.toLowerCase();
	       		//var flag=row[opts.textField].indexOf(q) >= 0;
	          	var ss1=row[opts.textField].toLowerCase();
	       		var ss2=myGetMemoCode(ss1);
		   		var flag=0;
	       		var str=q.split(' ');
	       		for (var i=0;i<str.length;i++){
	       			if (str[i]!='') flag+=ss1.indexOf(str[i])>= 0;
	       			if (str[i]!='') flag+=ss2.indexOf(str[i])>= 0;
	       		}
	       		var str=q.split(';');
	       		for (var i=0;i<str.length;i++){
	       			if (str[i]!='') flag+=ss1.indexOf(str[i])>= 0;
	       			if (str[i]!='') flag+=ss2.indexOf(str[i])>= 0;
	       		}
	       		return flag;
	    	}
		});	
	}
	if (value==undefined || value==''){  //璁剧疆鍒濆�
		//璁剧疆鍒濆�閫変腑绗竴琛�
		$('#'+id).combobox('select',eval(id+'source[0].'+id));
	}		
}

//鑾峰彇澶氶�涓嬫媺妗嗕腑宸茬粡閫変腑鏉＄洰鐨勪笅鏍囷紝杩斿洖鏁扮粍
function myGetSelectedComboIndex(field){
	var index=[];
	var xvalue=$('#'+field).combobox("getValues");
	var xdata=$('#'+field).combobox("getData");
	for (var i=0;i<xvalue.length;i++){
		for (var j=0;j<xdata.length; j++){
			if (xvalue[i]==eval('xdata['+j+'].'+field)){
				index.push(j);
				break;
			}
		}
	}
	return index;
}

//cttttttttttt  ctreeeeeeeeeeeee
function myDBComboTreeField(id,parent,label,labelwidth,top,left,height,width,sql,keyfield,sortfield,style){
	//style鍙兘鐨勯�椤癸細checkbox;animate;lien;edit
	//if (label=='') labelwidth=0;
	if (height==0) height=systext.height;
	if (parent=='') parent='main';
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	if (style!=undefined && style!='' ) style=';'+style+';';
	else var style='';
    var xcheckbox='false';
	var xanimate='false';
	var xline='true';
	var xedit='false';
	var xleafselect=0;
	if (style!='') style=';'+style+';';
	if (style.indexOf(';checkbox;')>=0) xcheckbox='true'; 
	if (style.indexOf(';line;')>=0) xline='true'; 
	if (style.indexOf(';animate;')>=0) xanimate='true'; 
	if (style.indexOf(';edit;')>=0) xedit='true';
	if (style.indexOf(';leafselect;')>=0) xleafselect=1;
	var str='<div id="'+id+'_div"><input id="'+id+'" style="overflow:auto;" class="easyui-combotree" data-options="animate:'+xanimate+', checkbox:'+xcheckbox+', lines:'+xline;
	if (xedit=='true'){
		str+=',onClick: function(node){ $(this).tree(\'beginEdit\',node.target);}';
	}	
	str+='" /></div>';
	$("#"+parent).append($(str));
	$("#"+id+'_div').css(myTextCss(parent,top,1*(left+labelwidth),height,width+20));
	if (height>0) $("#"+id).css({ height: height });
	if (width>0) $("#"+id).css({width: width});
	$("#"+id).attr('xsql',sql);  //鑷畾涔夊睘鎬э紝璁板綍鍩烘湰鐨剆ql璇彞
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	var source=myLoadComboTreeData(id,sql,keyfield,sortfield,style);
	$('#'+id).combotree({
		valueField:id
	});
	$('#'+id).combotree({ data: source });
	if (source.length<13) $('#'+id).combotree({panelHeight: 'auto'});
	else $('#'+id).combotree({panelHeight: 12*(syslabel.fontsize+8)});
	var cbtree=$('#'+id).combotree('tree');
	if (source.length > 0) {
		//cbtree.tree('setValue', eval("source[0]."+id));
	}
	cbtree.tree('collapseAll');
	//onBeforeExpand:
	//閫変腑绗竴涓粨鐐�
	//var item = cbtree.tree('getRoot');
	//if (item.children) cbtree.tree('expand', item.target);
	//cbtree.tree('select', item.target);
}

function myDBComboField(id,parent,label,labelwidth,top,left,height,width,sql,textfield,masterfield,style){
	//source_id,dataAdapter_id
	if (style!=undefined && style!='' ) style=';'+style+';';
	else var style='';
	var mid='';  //master鎺т欢  masterfield="province(provinceid)"涓轰緥
	var mfield='';  //master鎺т欢瀵瑰簲鐨勫�鍒� 
	var index1=masterfield.indexOf("(");
	var index2=masterfield.indexOf(")");
	if (index1>=0 && index2>index1){
		mid=masterfield.substring(0,index1);
		mfield=masterfield.substring(index1+1,index2);
	}else{
		mid=masterfield;
		mfield==masterfield;
	}
	if (mid=='' && mfield!='') mid=mfield;
	if (mid!='' && mfield=='') mfield=mid;
	//masterfield澶勭悊缁撴潫
	//if (label=='') labelwidth=0;
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	if (textfield=='') textfield=id;	
	var str='<div id="'+id+'_div"><input class="easyui-combobox" id="'+id+'" data-options="valueField:\''+id+'\',textField:\''+textfield+'\'"></div>';
	$("#"+parent).append($(str));
	$("#"+id+"_div").css(myTextCss(parent,top,1*(left+labelwidth),0,width));
	$("#"+id).css({width: width, height: height});
	$('#'+id).combobox({
		panelHeight: 'auto',
		valueField: id,
		textField: textfield,
		formatter: function(row){
			return '<div align="left" style="padding:2px 0px 0px 4px;">' + eval('row.'+textfield)+'</div>';
		},		
		onSelect: function(record) {  //閫変腑浜嬩欢
			if (record) {
				$("#"+id).attr('xrecord',JSON.stringify(record));  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�
				$("#"+id).attr('xindex',record.sysrowno-1);  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�			
			}else{
				$("#"+id).attr('xrecord','{}');  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�
				$("#"+id).attr('xindex',-1);  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�			
			}
			if (style.indexOf(';fnselect;')>=0) fnonSelectCombo(id,record);
			$("#"+id).next("span").find("input").focus();
		}
	});
	if (style.indexOf('readonly')>=0) $('#'+id).combobox({'readonly': true});
	if (style.indexOf('autodrop')>=0) $('#'+id).combobox({'editable': false});
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	//$("#"+id).attr('xmasterfield',mid);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	//$("#"+id).attr('xismasterfield',false);  //鑷畾涔夊睘鎬�
	//瀹氫箟鑱斿姩浜嬩欢cascade
	if (masterfield!=undefined && masterfield!=''){
		//$("#"+mid).attr('xismasterfield',true);
		$("#"+mid).combobox({
			onSelect: function(record) {  //閫変腑浜嬩欢
				if (record) {
					$("#"+mid).attr('xrecord',JSON.stringify(record));  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�
					$("#"+mid).attr('xindex',record.sysrowno-1);  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�			
					//var xvalue = $("#"+mid).combobox('getValue');
					var xvalue=eval("record."+mfield);
					var sql=$("#"+id).attr('xsql');
					if (xvalue!='')	sql = "select * from ("+sql+") as p where "+mfield+"='"+xvalue+"'";
					$("#"+id).combobox('clear');
					myGetComboxData(id,sql);
					myBindKeyDownEvent(id);	
				}else{
					$("#"+mid).attr('xrecord','{}');  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�
					$("#"+mid).attr('xindex',-1);  //鑷畾涔夊睘鎬э紝璁板綍褰撳墠閫変腑鐨勯�椤硅褰�
				}
				if (style.indexOf(';fnselect;')>=0) fnonSelectCombo(mid,record);
				$("#"+mid).next("span").find("input").focus();
				mySelectOnFocus();
			}
		}); // masterfield event
		//keyboard event鏀惧湪涔嬪悗锛屽鏋滀箣鍚庡嚭鐜�combobox()鍒欎簨浠舵棤鏁�
	}else{
		myGetComboxData(id,sql);
	}
	//鑱斿姩浜嬩欢缁撴潫
	if (style.indexOf(';filter;')>=0){ //鍔╄鐮佽繃婊�
			$("#"+id).combobox({
    		filter: function(q, row){
        		var opts = $(this).combobox('options');
        		q=q.toLowerCase();
        		//var flag=row[opts.textField].indexOf(q) >= 0;
           		var ss1=row[opts.textField].toLowerCase();
    	   		var ss2=myGetMemoCode(ss1);
	    		var flag=0;
        		var str=q.split(' ');
        		for (var i=0;i<str.length;i++){
        			if (str[i]!='') flag+=ss1.indexOf(str[i])>= 0;
        			if (str[i]!='') flag+=ss2.indexOf(str[i])>= 0;
        		}
        		var str=q.split(';');
        		for (var i=0;i<str.length;i++){
        			if (str[i]!='') flag+=ss1.indexOf(str[i])>= 0;
        			if (str[i]!='') flag+=ss2.indexOf(str[i])>= 0;
        		}
        		return flag;
    		}
		});	
	}
	$("#"+id).attr('xsql',sql);  //鑷畾涔夊睘鎬э紝璁板綍鍩烘湰鐨剆ql璇彞
	$('#'+id).attr('type','combobox');  //鑷畾涔夊睘鎬�
	if (mid!='') mySelectComboByIndex(mid,0);  //閫変腑涓讳笅鎷夋锛屼娇鍏惰Е鍙憇elect浜嬩欢
}

//瀹氫箟checkcombo
function myCheckComboField(id,parent,label,labelwidth,top,left,height,width,items,value){

}

//瀹氫箟鍥剧墖combo
function myImageComboField(id,parent,label,labelwidth,top,left,height,width,items,value){

}

function myImageIcon(filename){
	var icon='download64.jpg';
	if (filename!=''){ 
		fileext=filename.substring(filename.lastIndexOf(".")+1,255).toLowerCase();//鏂囦欢鎵╁睍鍚�
		var xvideo=';avi;rmvb;mov;asf;wmv;3gp;flv;mkv;rm;mid;vob;webm;';
		var xaudio=';mp3;wav;wma;';
		var ximage=';jpg;jpeg;gif;pcx;png;bmp;tif;tiff;';
		if (fileext==undefined) fileext='';
		if (fileext=='doc' || fileext=='docx') icon='word64.png';
		else if (fileext=='xls' || fileext=='xlsx') icon='excel64.png';  
		else if (fileext=='ppt' || fileext=='pptx') icon='ppt64.png';  
		else if (fileext=='pdf') icon='pdf64.png';
		else if (fileext=='swf') icon='swf64.png';
		else if (fileext=='fla') icon='flash64.png';
		else if (fileext=='html' || fileext=='htm') icon='html64.png';  
		else if (fileext=='rar') icon='rar64.png';
		else if (fileext=='zip') icon='zip64.png';
		else if (fileext=='swf') icon='swf64.png';
		else if (fileext=='exe') icon='fileexe64.png';
		else if (ximage.indexOf(fileext)>=0) icon='image64.png';
		else if (xaudio.indexOf(fileext)>=0) icon='audio64.png';
		else if (xvideo.indexOf(fileext)>=0) icon='video64.png';
	}
	return icon;
}

//瀹氫箟image鎺т欢iiiimmmmmmmage
function myImageField(id,parent,label,labelwidth,top,left,height,width,src){
	var str='';
	if (width==0) width=300;
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}
	var str='<img src="'+src+'" id="'+id+'" style="position: absolute; top:'+top+'px; left:'+left+'px; width:'+width+'px; height:'+height+'px; padding-left:0px 0px 0px 0px; border:false" />';
	$("#"+parent).append($(str));
	$("#"+id).css(myTextCss(parent,top,1*(left+labelwidth),0,width));
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',label);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xtype','image');  //鑷畾涔夊睘鎬�
	$("#"+id).attr('type','image');  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xwidth',width);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xheight',height);  //鑷畾涔夊睘鎬�
	/*鍥剧墖鏀惧ぇ缂╁皬璁剧疆
	$("#"+id).attr('xtype','image');  //鍘熷鏄剧ず澶у皬姣斾緥
	$("#"+id).attr('xrotate','0');  //鍘熷鏃嬭浆瑙掑害涓�
	$("#"+id).attr('xratio','1');  //鍘熷鏄剧ず澶у皬姣斾緥
	$("#"+id).bind('mousewheel',function(e){
		deltay=e.originalEvent.deltaY;
		if (deltay<0) var ratio=1.1;
		else if (deltay>0) var ratio=0.9;
		else var ratio=1;
		myZoomObject('#'+id,ratio);						
	});
	*/
	if (src!='' && height>0 && width>0) myResizeImage(id,src,height,width);	
}
//鏀瑰彉鎺т欢鍥剧墖澶у皬--蹇呴』瑕�涓睘鎬у垪
function myZoomObject(id,ratio){
	var ratio=1.0*ratio*$("#"+id).attr('xratio');
	if (ratio==0) ratio=1;
	var height=$("#"+id).attr('xheight')*ratio;
	var width=$("#"+id).attr('xwidth')*ratio;
	$("#"+id).css("width",width+"px");
	$("#"+id).css("height",height+"px");
	$("#"+id).attr('xratio',ratio);
}
//鍥惧舰缂╂斁鍑芥暟
function myResizeImage(img,src,winheight,winwidth){
	if (winheight>0 || winwidth>0){
		var image=new Image();
		image.src=src;
		aheight=image.height+0;  
		awidth=image.width+0;
		image.onload=function() {  //蹇呴』鏀惧湪onload浜嬩欢涓�
			var aheight=image.height+0;  
			var awidth=image.width+0;
			//console.log(aheight+'---'+awidth);
			if (awidth>0 && aheight>0) {
				//璋冩暣鍥剧墖澶у皬,鎸夋瘮渚嬬缉鏀�
				var Ratio = 1; 
				var wRatio=1;
				var hRatio=1;
				if (winwidth>0){
					var wRatio = winwidth / awidth;
				}
				if (winheight>0){	
					var hRatio = winheight / aheight;
				}
				//if (wRatio<1 || hRatio<1){ 
					Ratio = (wRatio<=hRatio?wRatio:hRatio); 
				//} 
				if (Ratio!=0){ 
					awidth = awidth * Ratio; 
					aheight = aheight * Ratio; 
				}
				//console.log(Ratio+'---'+wRatio+'---'+hRatio);
				if (img!=''){
					$("#"+img).css({width:awidth, height:aheight});
					$("#"+img).attr('xwidth',awidth);
					$("#"+img).attr('xheight',aheight);
					//console.log(awidth,aheight,img);
				}
			}
		};
		return ({width:awidth, height:aheight});
	}				
}		

function myHLine(id,parent,top,left,height,width,style){
	if (style==undefined) var style='black';
	var src='system/images/hline.gif';
	var str='<img src="'+src+'" id="'+id+'" style="position: absolute; top:'+top+'px; left:'+left+'px; width:'+width+'px; height:'+height+'px; padding-left:0; border:false" />';
	$("#"+parent).append($(str));
	$("#"+id).css(myTextCss(parent,top,left,height,width));
}

function myLine(id,parent,top,left,height,width,style,color){
	if (color==undefined) var color='black';
	if (style==undefined) var style='';
	style=';'+style+';';
	if (style.indexOf(";bevel;")>=0){
		if (height==1){
			var str='<div id="'+id+'1"><table border="0" cellspacing="0" cellpadding="0" height='+height+' style="border-color:gray; border-left-style:solid; border-width:'+width+'px"><tr><td valign=top></table></div>';	
			str+='<div id="'+id+'2"><table border="0" cellspacing="0" cellpadding="0" height='+height+' style="border-color:white; border-left-style:solid; border-width:'+width+'px"><tr><td valign=top></table></div>';	
			$("#"+parent).append($(str));
			$("#"+id+'1').css(myTextCss(parent,top,left,height,width));
			$("#"+id+'2').css(myTextCss(parent,top+height,left,height,width));
		}else if (width==1){
			var str='<div id="'+id+'1"><table border="0" cellspacing="0" cellpadding="0" height='+height+' style="border-color:gray; border-left-style:solid; border-width:'+width+'px"><tr><td valign=top></table></div>';	
			str+='<div id="'+id+'2"><table border="0" cellspacing="0" cellpadding="0" height='+height+' style="border-color:white; border-left-style:solid; border-width:'+width+'px"><tr><td valign=top></table></div>';	
			$("#"+parent).append($(str));
			$("#"+id+'1').css(myTextCss(parent,top,left,height,width));
			$("#"+id+'2').css(myTextCss(parent,top,left+width,height,width));
		}
	}else{
		//var str='<div id="'+id+'"><hr style="position:absolute; top:'+top+'px; left:'+left+'px; height:'+height+'px; width:'+width+'px;" /></div>';
		var str='<div id="'+id+'"><table border="0" cellspacing="0" cellpadding="0" height='+height+' style="border-color:'+color+'; border-left-style:solid; border-width:'+width+'px"><tr><td valign=top></table></div>';	
		$("#"+parent).append($(str));
		$("#"+id).css(myTextCss(parent,top,left,height,width));
	}
}

function myClearFileField(fieldset){
	//娓呯┖file閫夋嫨妗�
	var fields=fieldset.split(';');
	for (var i=0;i<fields.length;i++){
		var id=fields[i];
		var file = document.getElementById(id);
		if (file.outerHTML) {  // for IE, Opera, Safari, Chrome
			file.outerHTML = file.outerHTML;
		}else{ // FF(鍖呮嫭3.5)
			file.value = "";
		}
		//娓呯┖鍚巓nchange浜嬩欢澶辨晥锛岄渶瑕侀噸鏂板畾涔�
		btnid=id+'button';
		if ($("#"+btnid).length>0) $("#"+btnid).linkbutton('disable');
	}	
}

function myFileFieldChange(fieldset){
	//娓呯┖file閫夋嫨妗�
	var fields=fieldset.split(';');
	for (var i=0;i<fields.length;i++){
		var id=fields[i];
		//娓呯┖鍚巓nchange浜嬩欢澶辨晥锛岄渶瑕侀噸鏂板畾涔�
		var btnid=id+'button';
		if ($("#"+btnid).length>0){
			$("#"+id).bind('change',function(v){
				var filename = $("#"+id).val();
				if (filename=='') $("#"+btnid).linkbutton('disable');
				else $("#"+btnid).linkbutton('enable');
			});
		}
	}	
}

function myAttachmentPanel(action,id,parent,title,results){
	if (action=='remove'){
		results=[];
		//$('#'+parent).layout('remove','south');
		//$("#"+id).remove();
	}else{
		if (results.length>0){
			var f1='';
			var f2='';
			var n=0;
			f='鍘嬬缉鍖卂'+results[0].filesourcename;
			for (var i=0;i<results.length;i++){
				if (i>0){
					f1+='|'; //鍒嗛殧绗ab
					f2+='|';  //鍒嗛殧绗ab
				}
				f1+="/"+results[i].fileosname;
				f2+=results[i].filesourcename;
				n++;
			} 
			if (n>0) xtitle=title+'闄勪欢鍒楄〃('+n+'涓檮浠�';
			else xtitle=title+'闄勪欢鍒楄〃';
			if (n>1 && action=='query') xtitle+='<a href="javascript:myDownLoadAll(\''+id+'\');" src="">&nbsp;<u>[涓嬭浇鍏ㄩ儴]</u></a>';
			if ($("#"+id).length==0){
				/*
				$('#'+parent).layout('add',{
					id: id,
					region: 'south',
					title: xtitle,
					split: true,
					border: true,
					collapsible:false,
					height:200
				});
				*/
				str='<div id="'+id+'" class="easyui-panel" data-options="split:true, region:\'south\'" style="height:200px; border:1px;"></div>';	
				$('#'+parent).append($(str));
			}else{
				myShowPanel(id,true);
			}
			$("#"+id).panel({title: xtitle, collapsible: false, height: 200 })
			//鑷畾涔夊睘鎬э紝鐢ㄤ簬鏂囦欢鎵撳寘涓嬭浇
			$("#"+id).attr("filecount",n);  
			$("#"+id).attr("targetname",f);  
			$("#"+id).attr("filename",f1);
			$("#"+id).attr("filetitle",f2);
		}else{
			//$('#'+parent).layout('remove','south');
			myShowPanel(id,false);
		}		
	}	
	return (results);
}	

function myAddAttachment(fileupload,parent){
	var icon=myImageIcon($('#'+fileupload).attr('xsourcefile'));
	for (var n=1; n<=sys.maxfilenumber; n++){
		if ($('#filediv'+n).length==0){
			break;
		}
	}
	myHiddenFields('filesizedesc'+n+';filesourcename'+n+';fileosname'+n+';filesize'+n+';fileext'+n+';uploaddate'+n);
	mySetValue('filesizedesc'+n,$('#'+fileupload).attr('xfilesizedesc'));
	mySetValue('filesourcename'+n,$('#'+fileupload).attr('xsourcefile'));
	mySetValue('fileosname'+n,$('#'+fileupload).attr('xfileosname'));
	mySetValue('filesize'+n,$('#'+fileupload).attr('xfilesize'));
	mySetValue('fileext'+n,$('#'+fileupload).attr('xfileext'));
	mySetValue('uploaddate'+n,myLocalTime('datetime'));
	mySetValue('downloadtimes'+n,'0');
	$('#filediv'+(n)).remove();
	var str='';
	str+='<div id="filediv'+(n)+'" style="border:solid 1px navy; width:240px; display:block; float:left; padding:4px 1px 1px 4px; margin:4px 0px 0px 4px;"></div>';
	$('#'+parent).append($(str));
	str='<div style="margin:0px 0px 4px 0px;"><a href="javascript:myDeleteAttachment('+n+');"><img src="system/images/deletefile.png" height="16px" width="16px" /></a>';
	str+='<div style="margin:-18px 0px 2px 0px;">';
	str+='<center>';
	str+='<a href="javascript:myDownLoadFile('+n+');"><img src="system/images/'+icon+'" height="64px" width="64px" /></div>';
	str+='<div style="text-align:center; width:232px; height:40px; margin:4px 0px 4px 0px;" >'+myGetValue('filesourcename'+n);
	str+=' ('+myGetValue('filesizedesc'+n)+')</div>';
	//str+=' (鏂囦欢澶у皬'+myGetValue('filesizedesc'+n)+')</div>';
	str+='</a></center>';
	$('#filediv'+n).append($(str));
	//璁板綍鏂板闄勪欢鍚嶇О
	var f1=myGetValue('fileosname'+n);
	var f2=f1.substring(0,f1.lastIndexOf('.'))+'.pdf';
	if (("#addedfiles").length==0){
		myHiddenFields("addedfiles");
		mySetValue('addedfiles','');
	}
	var v=myGetValue('addedfiles');
	mySetValue('addedfiles',v+'	'+f1+'	'+f2); //璁板綍瑕佸垹闄ょ殑闄勪欢鏂囦欢锛宼ab閿垎鍓�
}

function myShowAttachment(pmyAttachment){
	var result=pmyAttachment.results;
	var panel=pmyAttachment.panel;  //鏄剧ず闄勪欢鐨勯潰鏉�
	var title=pmyAttachment.title;  //闈㈡澘鏍囬
	var pdfpanel=pmyAttachment.pdfpanel;  //闄勪欢棰勮鐨則abs鍚嶇О
	var parent=pmyAttachment.layout;  //鐢熸垚闄勪欢闈㈡澘鏃堕殢鎰忕殑layout鐖剁被瀹瑰櫒
	var position=pmyAttachment.position;   //闈㈡澘娣诲姞鍦ㄥ摢閲岋紝榛樿south
	var height=pmyAttachment.height;   //闈㈡澘楂樺害锛岄粯璁�00锛屽皯浜�20鏃讹紝绠�磥鏄剧ず
	if (height==undefined) height=200;
	if (position==undefined || position=='') position='south';
	if (title==undefined) title='';
	for (var n=1; n<=sys.maxfilenumber; n++){
		$('#filediv'+n).remove();
		mySetValue('fileosname'+n,'');
	}
	n=result.length;
	if (n>0) xtitle=title+'闄勪欢鍒楄〃('+n+'涓檮浠�';
	else xtitle=title+'闄勪欢鍒楄〃';
	if (n>1) xtitle+='<a href="javascript:myDownLoadAll(\''+panel+'\');" src="">&nbsp;<u>[涓嬭浇鍏ㄩ儴]</u></a>';
	if ($("#"+panel).length==0){
		$('#'+parent).layout('add',{
			id: panel,
			region: position,
			title: xtitle,
			split:true,
			border:true,
			collapsible:true,
			height: height
		});
	}else{
		$("#"+panel).panel({ title: xtitle });
	}
	$("#"+panel).panel("expand");
	if (result.length>0){
		var f1='';
		var f2='';
		var f='鍘嬬缉鍖卂'+result[0].filesourcename;
		for (var n=1;n<=result.length;n++){
			if (n>1){
				f1+='|'; //鍒嗛殧绗ab
				f2+='|';  //鍒嗛殧绗ab
			}
			f1+="/"+result[n-1].fileosname;
			f2+=result[n-1].filesourcename;
			var icon=myImageIcon(result[n-1].filesourcename);
			myHiddenFields('filesizedesc'+n+';filesourcename'+n+';fileosname'+n+';filesize'+n+';fileext'+n+';downloadtimes'+n+';uploaddate'+n);
			mySetValue('filesizedesc'+n,result[n-1].filesizedesc);
			mySetValue('filesourcename'+n,result[n-1].filesourcename);
			mySetValue('fileosname'+n,result[n-1].fileosname);
			mySetValue('filesize'+n,result[n-1].filesize);
			mySetValue('fileext'+n,result[n-1].fileext);
			mySetValue('uploaddate'+n,result[n-1].uploaddate);
			mySetValue('downloadtimes'+n,result[n-1].downloadtimes);
			var str='';
			str+='<div id="filediv'+n+'" style="border:solid 1px navy; width:240px; display:block; float:left; padding:4px 1px 1px 4px; margin:4px 0px 0px 4px;"></div>';
			$('#'+panel).append($(str));
			str='<div style="margin:0px 0px 4px 0px;"><a href="javascript:myDeleteAttachment('+n+');"><img src="system/images/deletefile.png" height="16px" width="16px" /></a>';
			str+='<div style="margin:-18px 0px 2px 0px;">';
			str+='<center>';
			str+='<a href="javascript:myDownLoadFile('+n+');"><img src="system/images/'+icon+'" height="64px" width="64px" /></div>';
			str+='<div style="text-align:center; width:232px; height:40px; margin:4px 0px 4px 0px; padding:0px 4px 0px 4px;" >'+myGetValue('filesourcename'+n);
			str+=' ('+myGetValue('filesizedesc'+n)+')</div>';
			//str+=' (鏂囦欢澶у皬'+myGetValue('filesizedesc'+n)+')</div>';
			str+='</a></center>';
			$('#filediv'+n).append($(str));
		}	
		$("#"+panel).attr("targetname",f);  
		$("#"+panel).attr("filename",f1);
		$("#"+panel).attr("filetitle",f2);
		$("#"+panel).attr("filecount",result.length);  
	}
}

function myRemoveLayoutPanel(layout,position){
	$('#'+layout).layout('remove',position);
}

//function myDownLoadAttachment(result,panel,title,pdfpanel){
function myDownLoadAttachment(pmyAttachment){
	var result=pmyAttachment.results;
	//if (result==undefined || result.length==0) return;
	if (result==undefined) return;
	var panel=pmyAttachment.panel;  //鏄剧ず闄勪欢鐨勯潰鏉�
	var title=pmyAttachment.title;  //闈㈡澘鏍囬
	var pdfpanel=pmyAttachment.pdfpanel;  //闄勪欢棰勮鐨則abs鍚嶇О
	var parent=pmyAttachment.layout;  //鐢熸垚闄勪欢闈㈡澘鏃堕殢鎰忕殑layout鐖剁被瀹瑰櫒
	var position=pmyAttachment.position;   //闈㈡澘娣诲姞鍦ㄥ摢閲岋紝榛樿south
	var height=pmyAttachment.height;   //闈㈡澘楂樺害锛岄粯璁�00锛屽皯浜�20鏃讹紝绠�磥鏄剧ず
	if (height==undefined) height=200;
	if (position==undefined || position=='') position='south';
	if (title==undefined) title='';
	for (var n=1; n<=sys.maxfilenumber; n++){
		$('#filediv'+n).remove();
		mySetValue('fileosname'+n,'');		
	}
	if (result.length==0){
		//myShowPanel(panel,false);
		$('#'+parent).layout('remove',position);
	}else{
		//myShowPanel(panel,true);
		if (height>120) var imgflag=1;
		else var imgflag=0;
		n=result.length;
		if (n>0) xtitle=title+'闄勪欢鍒楄〃('+n+'涓檮浠�';
		else xtitle=title+'闄勪欢鍒楄〃';
		if (n>1) xtitle+='<a href="javascript:myDownLoadAll(\''+panel+'\');" src="">&nbsp;<u>[涓嬭浇鍏ㄩ儴]</u></a>';
		if ($("#"+panel).length==0){
			$('#'+parent).layout('add',{
				id: panel,
				region: position,
				title: xtitle,
				split:true,
				border:true,
				collapsible:true,
				height: height
			});
		}else{
			$("#"+panel).panel({ title: xtitle });
		}
		$("#"+panel).panel("expand");
		var f1='';
		var f2='';
		var f='鍘嬬缉鍖卂'+result[0].filesourcename;
		for (var n=1; n<=result.length; n++){
			if (n>1){
				f1+='|'; //鍒嗛殧绗ab
				f2+='|';  //鍒嗛殧绗ab
			}
			f1+="/"+result[n-1].fileosname;
			f2+=result[n-1].filesourcename;
			var icon=myImageIcon(result[n-1].filesourcename);
			myHiddenFields('filesizedesc'+n+';filesourcename'+n+';fileosname'+n+';filesize'+n+';fileext'+n+';downloadtimes'+n+';uploaddate'+n);
			mySetValue('filesizedesc'+n,result[n-1].filesizedesc);
			mySetValue('filesourcename'+n,result[n-1].filesourcename);
			mySetValue('fileosname'+n,result[n-1].fileosname);
			mySetValue('filesize'+n,result[n-1].filesize);
			mySetValue('fileext'+n,result[n-1].fileext);
			mySetValue('uploaddate'+n,result[n-1].uploaddate);
			mySetValue('downloadtimes'+n,result[n-1].downloadtimes);
			var fileext=result[n-1].fileext;
			var pdffilename='';
			var playicon='';
			var str='';
			if ((';pdf;swf;doc;docx;ppt;pptx;jpg;jpeg;png;gif;tif;tiff;').indexOf(';'+fileext+';')>=0){
			//if (fileext=='pdf' || fileext=='swf' || fileext=='doc' || fileext=='docx' || fileext=='ppt' || fileext=='pptx'){
				pdffilename=result[n-1].fileosname.substring(0,result[n-1].fileosname.lastIndexOf(".")).toLowerCase()+'.pdf';
				str+='<div id="filediv'+n+'" style="border:solid 1px navy; width:240px; display:block; float:left; padding:4px 1px 4px 1px; margin:4px 0px 0px 4px;"></div>';
				playicon='play4.png';
				$('#'+panel).append($(str));
			//}else if (fileext=='mp3' || fileext=='wav' ){
			}else if ((';mp3;wav;').indexOf(';'+fileext+';')>=0){	
				pdffilename=result[n-1].fileosname;
				str+='<div id="filediv'+n+'" style="border:solid 1px navy; width:240px; display:block; float:left; padding:4px 1px 4px 1px; margin:4px 0px 0px 4px;"></div>';
				playicon='play1.png';
				$('#'+panel).append($(str));
			}else if ((';jpg;jpeg;png;gif;tif;tiff;').indexOf(';'+fileext+';')>=0){
				str+='<img id="filediv'+n+'" src="'+result[n-1].fileosname+'" style="border:solid 1px navy; width:240px; display:block; float:left; padding:4px 1px 4px 1px; margin:4px 0px 0px 4px;">';
				playicon='play4.png';
				$('#'+panel).append($(str));
				//$('#'+panel).css({overflow:'auto'}); //
				//h=$('#'+panel).height();
				//w=$('#'+panel).width()-32;
				//myResizeImage('filediv'+n,result[n-1].fileosname,0,w);
			}else{
				str+='<div id="filediv'+n+'" style="border:solid 1px navy; width:240px; display:block; float:left; padding:4px 1px 4px 1px; margin:4px 0px 0px 4px;"></div>';
				$('#'+panel).append($(str));
			}
			if (imgflag==1){ //鏄剧ず鏂囨。鍥炬爣
				str='<div>';
				str+='<center>';
				if (pdffilename!=''){
					str+='<a href="javascript:myReadAttachment('+n+',\''+pdfpanel+'\');">';
					str+='<img src="system/images/'+playicon+'" height="32px" width="32px" />';
					str+='</a>&nbsp;&nbsp;';
				}
				str+='<a href="javascript:myDownLoadFile('+n+');">';
				str+='<img src="system/images/'+icon+'" height="64px" width="64px" />';
				str+='</div>';
				str+='<div style="text-align:center; width:232px; height:40px; margin:4px 0px 4px 0px;" >'+myGetValue('filesourcename'+n);
				str+=' ('+myGetValue('filesizedesc'+n)+')</div>';
				//str+=' (鏂囦欢澶у皬锛�+myGetValue('filesizedesc'+n)+')</div>';
				str+='</a></center>';
			}else{  //鍙樉绀洪瑙堝拰鏂囨。鍚嶇О澶у皬
				str='<div style="float:left; style="margin:0px 0px 0px 0px;">'; //棰勮鍥炬爣涓庢枃妗ｅ悕绉板悓涓�
				if (pdffilename!=''){
					str+='<a href="javascript:myReadAttachment('+n+',\''+pdfpanel+'\');">';
					str+='<img src="system/images/'+playicon+'" height="24px" width="24px" />';
				}
				str+='</div><center><div style="margin:0px 3px 0px 10px;">';
				str+='<a href="javascript:myDownLoadFile('+n+');">';
				//str+='<div style="text-align:center; width:232px; margin:2px 2px 2px 2px;" >'+myGetValue('filesourcename'+n)+'</div>';
				//str+='<div style="margin:0px 0px 4px 0px; text-align:center;" >鏂囦欢澶у皬锛�+myGetValue('filesizedesc'+n)+'</div>';
				str+='<div style="text-align:center; width:232px; height:40px;">'+myGetValue('filesourcename'+n);
				str+=' ('+myGetValue('filesizedesc'+n)+')</div>';
				str+='</a></div></center>';
				if (pdffilename!='') str+='</a>';
			}
			$('#filediv'+n).append($(str));
		}
		$("#"+panel).attr("filecount",result.length);  
		$("#"+panel).attr("targetname",f);  
		$("#"+panel).attr("filename",f1);
		$("#"+panel).attr("filetitle",f2);
	}
}

function myDownLoadAll(panel){  //鎵撳寘涓嬭浇鍏ㄩ儴闄勪欢
	var n=$("#"+panel).attr("filecount");
	if (n>1){ //鎵撳寘鍘嬬缉
		var f1=$("#"+panel).attr("targetname");;
		var f2=$("#"+panel).attr("filename");
		var f3=$("#"+panel).attr("filetitle");
		myDownLoadZipFiles(f1,f2,f3);
	}else{
		var url=myGetValue('fileosname1');
		var target=myGetValue('filesourcename1');
		if (url!=undefined) window.location.href='system//easyui_fileDownLoad.jsp?source='+url+'&target='+target;
	}
}

function myReadAttachment(n,pdftab){ //闃呰棰勮
	//$("#"+pdfpanel).css({overflow:'hidden'});
	var src=myGetValue('fileosname'+n);
	var title=myGetValue('filesourcename'+n);
	var file=src;
	if (src!=''){
		var message='';
		var fileext=src.substr(src.lastIndexOf('.')+1,255).toLowerCase();
		//if (fileext=='doc' || fileext=='docx' || fileext=='xls' ||  fileext=='xlsx' || fileext=='ppt' || fileext=='pptx'){
		if (fileext=='doc' || fileext=='docx' || fileext=='ppt' || fileext=='pptx'){
			file=src.substr(0,src.lastIndexOf('.')).toLowerCase()+'.pdf';
			if (myDoFiles('exist',file)==0){
				message=myOfficeToPdf(src,file);
				if (message==''){
					fileext='pdf';
					src=file;
					myMessageShow('PDF鏂囦欢宸茬粡杞崲鎴愬姛锛�);
				}	
				else fileext='';
			}else{
				src=file;
				fileext='pdf';
			}
			title=title.substring(0,title.lastIndexOf('.'));
		}
		//if (fileext=='pdf' || fileext=='swf' || fileext=='mp3' || fileext=='wav'){
		if ((';pdf;swf;mp3;wav;jpg;jpeg;gif;tif;tiff;png;').indexOf(';'+fileext+';')>=0){
			var tabs=$('#'+pdftab).tabs('tabs');
			var flag=0;
			for (var i=1;i<tabs.length;i++){
				var xtab=$('#'+pdftab).tabs('getTab',i);
				if (xtab.attr('xindex')==n){
					flag=i;
					break;
				} ;
			}
			if (flag==0){
				$('#'+pdftab).tabs('add',{
					title: title,
					closable: true,
					selected: true
				});
				var xtab = $('#'+pdftab).tabs('getSelected');
				xtab.css({overflow:'hidden'});
				xtab.attr('xindex',n); //鑷畾涔夊睘鎬э紝璁板綍闄勪欢搴忓彿锛岄槻姝㈤噸澶嶉瑙�
				xtab.attr('xfilename',src);  //鑷畾涔夊睘鎬ц褰曟枃浠跺悕
				xtab.attr('xfiletitle',title);
				if (fileext=='mp3' || fileext=='wav'){  //mp3鎾斁鍣�
					var str='<audio id="myaudio_'+n+'" src="'+src+'" controls="controls" autoplay="autoplay" preload="auto"\n'; 
					str+='style="position:absolute; top:60px; left:40px; width:600px;">\n'; 
					str+='</audio>';	
					xtab.append($(str));
					xtab.attr('xchild','mydoc'+n);  //璁板綍瀹瑰櫒鍐呮帶浠跺悕绉�
					var audio1=document.getElementById('myaudio_'+n);
					audio1.currentTime=0;
					/*
					if (isPlaying(audio1)){
						audio1.pause();
					}else{
						audio1.play();
					}
					*/
				}else if ((';jpg;jpeg;gif;tif;tiff;png;').indexOf(';'+fileext+';')>=0){
					//iiiiiii				
					var h=xtab.height();
					var w=xtab.width()-60;
					var hw=myResizeImage('mydoc'+n,src,0,w);
					//var str='<img id="mydoc'+n+'" src="'+src+'" style=" width=\'100%\' height=\'100%\'" >\n';
					var str='<div><object id="mydoc'+n+'" data="'+src+'" controls="controls" autoplay="autoplay" preload="auto" width="'+hw.width+'" height="'+hw.height+'"></object></div>';
					xtab.append($(str));
					xtab.css({overflow:'auto'}); //鏄剧ず婊氬姩鏉�
					xtab.attr('xchild','mydoc'+n);  //璁板綍瀹瑰櫒鍐呮帶浠跺悕绉�
					$("#mydoc"+n).attr('xtype','image');  //鍘熷鏄剧ず澶у皬姣斾緥
					$("#mydoc"+n).attr('xrotate',0);  //鍘熷鏃嬭浆瑙掑害涓�
					$("#mydoc"+n).attr('xratio',1);  //鍘熷鏄剧ず澶у皬姣斾緥
					$("#mydoc"+n).bind('mousewheel',function(e){
						deltay=e.originalEvent.deltaY;
						if (deltay<0) var ratio=1.1;
						else if (deltay>0) var ratio=0.9;
						else var ratio=1;
						myZoomObject('mydoc'+n,ratio);						
					});
					//console.log($('#myImageMenu').length);
					if ($('#myImageMenu').length==0){
						myMenuItem('myImageMenu','涓嬭浇/myimagedownload/downloadIcon;-;鏃嬭浆/myimagerotate/rotateIcon;-;鏀惧ぇ/myimagezoomin/zoominIcon;-;缂╁皬/myimagezoomout/zoomoutIcon','');
						//涓嬭浇/myimagedownload/downloadIcon;-;鏃嬭浆/myimagerotate/rotateIcon;-;鏀惧ぇ/myimagezoomin/zoominIcon;-;缂╁皬/myimagezoomout/zoomoutIcon
						$("#myimagerotate").click(function(e){
							var id=$('#myImageMenu').attr('xchild');
							myRotate(id,90);  //姣忔杞�0搴�		
						});
						$("#myimagezoomin").click(function(e){
							var id=$('#myImageMenu').attr('xchild');
							myZoomObject('mydoc'+n,1.1);  //姣忔鏀惧ぇ10%			
						});
						$("#myimagezoomout").click(function(e){
							var id=$('#myImageMenu').attr('xchild');
							myZoomObject('mydoc'+n,0.9);  //姣忔缂╁皬10%			
						});
					}
					$("#mydoc"+n).bind('contextmenu',function(e){
						e.preventDefault();
						//蹇呴』璁板綍鍙抽敭鑿滃崟鎵�搴旂殑瀵硅薄
						$('#myImageMenu').attr('xchild','mydoc'+n); 
						console.log($('#myImageMenu').menu('show'));

						$('#myImageMenu').menu('show', {
							left: e.pageX,
							top: e.pageY
						});
					});
				}else{	
					var str='<object id="mydoc'+n+'" quality="high" data="'+src+'" application/';
					if (fileext=='swf') str+='x-shockwave-flash';
					else if (fileext=='pdf') str+='pdf';
					str+=' width="100%" height="100%" ><param name="autoplay" value="true"></object>\n';
					xtab.append($(str));
					xtab.attr('xchild','mydoc'+n);  //璁板綍瀹瑰櫒鍐呮帶浠跺悕绉�
				}	
			}else{
				$('#'+pdftab).tabs('select',flag);
			}
		}
	}
}

function myDeleteAttachment(n){
	var f1=myGetValue('fileosname'+n);
	var f2=f1.substring(0,f1.lastIndexOf('.'))+'.pdf';
	if (("#deletedfiles").length==0){
		myHiddenFields("deletedfiles");
		mySetValue('deletedfiles','');
	}
	var v=myGetValue('deletedfiles');
	mySetValue('deletedfiles',v+'	'+f1+'	'+f2); //璁板綍瑕佸垹闄ょ殑闄勪欢鏂囦欢锛宼ab閿垎鍓�
	$('#filediv'+n).remove();
	$("#fileosname"+n).val('');  //璁剧疆fileosename涓虹┖
}

//瀹氫箟fileupload鎺т欢fffffupload
function myFileField(id,parent,top,left,height,width,buttonalign){
	//涓婁紶鎸夐挳鍚嶇О锛歩d+'button'; 杩涘害鏉d+'bar'
	var btnid=id+'button';
	var barid=id+'bar';
	var winid=id+'window';
	var str='';
	if (width==0) width=300;
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	/*
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}
	*/
	var btnleft=left+4;
	var btntop=top+height+4;
	var xtop=top;
	var xleft=left;
	if (buttonalign=='right'){
		width=width-75;
		var btnleft=left+width+9;
		var btntop=top-2;
	}else if (buttonalign=='left'){
		var btnleft=left;
		var btntop=top-2;
		left=left+75;
		width=width-75;
	}
	var str='<input type="file" id="'+id+'" class="file" style="position: absolute; top:'+top+'px; left:'+left+'px; width:'+width+'px; height:'+height+'px; padding-left: 4px;" />\n';
	$("#"+parent).append($(str));
	$("#"+id).css(myTextCss(parent,top,left,0,width));
	//瀹氫箟杩涘害鏉＄獥鍙�
	myWindow(winid,'姝ｅ湪涓婁紶',0,0,70,320,'','');
	str="<div class='easyui-progressbar' id='"+barid+"'></div>";
	$("#"+winid).append($(str));
	$("#"+barid).css(myTextCss(winid,4,2,24,300));
	$("#"+barid).progressbar();
	if (buttonalign!='none'){ //涓嶆樉绀烘寜閽�
		myButton(btnid,parent,'涓婁紶',btntop,btnleft,26,68,'uploadIcon','','');
		var filename = $("#"+id).val();
		if (filename=='') $("#"+btnid).linkbutton('disable');
		else $("#"+btnid).linkbutton('enable');
		$("#"+id).bind('change',function(v){
			var filename = $("#"+id).val();
			if (filename=='') $("#"+btnid).linkbutton('disable');
			else $("#"+btnid).linkbutton('enable');
		});
		/*
		$("#"+id).change(function(){  
            var filename = $(this).val();
			if (filename=='') $("#"+btnid).linkbutton('disable');
			else $("#"+btnid).linkbutton('enable');
        });
        */		
		$("#"+btnid).bind('click',function(e){
			//myFileEvents(id,'click');
		});
	}
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xlabel',''); //label //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xsourcefile','');  
	$("#"+id).attr('xfileosname','');  
	$("#"+id).attr('xtargetfile','');  
	$("#"+id).attr('xfilesize',0);  
	$("#"+id).attr('xfilesizedesc','');  
	$("#"+id).attr('xtargetpath','');  
	$("#"+id).attr('xfileext','');  
}

//fffffffffffff???????
function myFileupLoad(id,targetpath,targetname,filetype){  //涓嬭浇澶氫釜鏂囦欢
	if (filetype==undefined) var filetype='';
	var data={};
	var btnid=id+'button';
	var winid=id+'window';
	var barid=id+'bar';
	var filename=$("#"+id).val();
	var fileext=filename.substring(filename.lastIndexOf(".")+1,255).toLowerCase();//鏂囦欢鎵╁睍鍚�
	if (filetype!='' && (';'+filetype+';').indexOf(';'+fileext+';')<0){
		data={"error":"鏂囦欢绫诲瀷閿欒锛屼笂浼犲け璐ワ紒"};
		var msg=filetype.replaceAll(';',',');  //;涓哄洖杞︾浠ｅ彿
		myMessage('鏂囦欢鎵╁睍鍚嶉檺浜庯細'+msg+'@n鏂囦欢绫诲瀷閿欒锛屼笂浼犲け璐ワ紒','info');
		myClearFileField(id); //娓呯┖file閫夋嫨妗�onchange浜嬩欢澶辨晥
		myFileFieldChange(id); //娓呯┖file閫夋嫨妗�onchange浜嬩欢澶辨晥
	}else{	
		$("#"+winid).window('open');
		$("#"+barid).progressbar('setValue',0);
		//var fileObj = $("#"+id)[0].files[0]; // 鑾峰彇鏂囦欢瀵硅薄
		var fileObj = document.getElementById(id).files[0];
		var form = new FormData();  // FormData 瀵硅薄
		form.append("file", fileObj);// 鏂囦欢瀵硅薄
		var xhr = new XMLHttpRequest(); //XMLHttpRequest 瀵硅薄
		xhr.open("post", "system//easyui_fileUpLoad.jsp?targetname="+targetname+"&targetpath="+targetpath, true);
		xhr.onload = function () {
			if (xhr.status == 200){
				data = JSON.parse(xhr.responseText);
				$("#"+id).attr('xerror',data.error);  
				if (data.error == ''){
					$("#"+id).attr('xfilesize',data.filesize);  
					$("#"+id).attr('xfilesizedesc',data.filesizedesc);
					$("#"+id).attr('xfileosname',data.fileosname);  
					$("#"+id).attr('xsourcefile',data.sourcefile);  
					$("#"+id).attr('xtargetfile',data.targetfile);  
					$("#"+id).attr('xtargetpath',data.targetpath);  
					$("#"+id).attr('xfileext',data.fileext);
					myMessageShow('鏂囦欢宸茬粡涓婁紶鎴愬姛锛�);
					$("#"+btnid).linkbutton('disable');
					var file1=data.fileosname;
					var file2=file1.substring(0,file1.lastIndexOf("."))+".pdf";
					var fileext=file1.substring(file1.lastIndexOf(".")+1,255).toLowerCase();//鏂囦欢鎵╁睍鍚�
					//if (fileext=="doc" || fileext=="docx" || fileext=="xls" || fileext=="xlsx" || fileext=="ppt" || fileext=="pptx"){
					if (fileext=="doc" || fileext=="docx" || fileext=="ppt" || fileext=="pptx"){
						s=myOfficeToPdf(file1,file2);  
					}	
				}else{
					myMessage('鏂囦欢涓婁紶澶辫触锛�,'error');
				}
				$("#"+winid).window('close');
				myClearFileField(id); //娓呯┖file閫夋嫨妗�onchange浜嬩欢澶辨晥
				myFileFieldChange(id); //娓呯┖file閫夋嫨妗�onchange浜嬩欢澶辨晥
				myFileEvents(id,'upload');  //鎵ц涓婁紶涔嬪悗鐨勮ˉ鍏呭姩浣�
			} 
		};
		
		//渚︽煡褰撳墠闄勪欢涓婁紶鎯呭喌
		xhr.upload.onprogress = function(evt) {
			loaded = evt.loaded;
			tot = evt.total;
			per = Math.floor(100.00 * loaded / tot); //宸茬粡涓婁紶鐨勭櫨鍒嗘瘮
			//$("#bar"+id).css("width", per+"%");
			$("#"+id+"bar").progressbar('setValue', per);
		};		
		xhr.send(form);
	}	
	return data;
}
    
//瀹氫箟缂栬緫鍣�
function myWEditorField(id,parent,label,labelwidth,top,left,height,width,value){
	var str='';
	if (parent=='') parent='main';
	if (height==0) height=systext.height;
	if (labelwidth==0 && label!=''){
		myFieldLabel(id,parent,label,labelwidth,top,left+2,height,width);
		top=1*(top+syslabel.fontsize+syslabel.topmargin+2); //鎹㈣鏄剧ず鏂囨湰
		labelwidth=0;
	}else{
		myFieldLabel(id,parent,label,labelwidth,top,left,height,width);
	}	
	$("#"+parent).append("<div id='"+id+"_div'><textarea id='"+id+"'></textarea></div>");
	$("#"+id+"_div").css(myTextCss(parent,top,1*(left+labelwidth),height,width));
	if (height>0) $("#"+id).jqxEditor({height: height});
	else $("#"+id).jqxEditor({height: '100%'});
	if (width>0) $("#"+id).jqxEditor({width: width});
	else $("#"+id).jqxEditor({width: '100%'});
	$("#"+id).jqxEditor(sys.theme);
	if (value!=undefined && value!=''){  //璁剧疆鍒濆�
		$("#"+id).val(value);
	}
	//缂栬緫鍣ㄦ湰鍦板寲
	$("#"+id).jqxEditor({localization: {"bold": "鍔犵矖","italic": "鏂滀綋","underline": "涓嬪垝绾�,"format": "鏍煎紡", "font": "瀛椾綋","size": "瀛椾綋澶у皬", "color": "瀛椾綋棰滆壊", "background": "鑳屾櫙棰滆壊",	"left": "宸﹀榻�, "center": "灞呬腑",	"right": "鍙冲榻�, 
	"outdent": "鏂囧瓧宸︾Щ", "indent": "鏂囧瓧鍙崇Щ", "ul": "鍒嗘", "ol": "鍒嗙骇", "image": "鎻掑叆鍥剧墖", "link": "鎻掑叆閾炬帴", "html": "html璇█", "clean": "鏍煎紡鍖� }});
}

function myHref(id,parent,label,top,left,height,width,url,style){
	myhref(id,parent,label,top,left,height,width,url,style);
}

function myhref(id,parent,label,top,left,height,width,url,style){
	if (style!=undefined) style=';'+style+';';
	else var style='';
	var target='';
	if (url=='') url='#';
	if (style.indexOf(";blank;")>=0) target='_blank';
	var str='<div id="'+id+'_div" style="position:absolute">';
	if (style.indexOf(';[')>=0) str+='銆�;
	str+='<a id="'+id+'" href="'+url+'" target="'+target+'" >'+label+'</a>';
	if (style.indexOf('];')>=0) str+='銆�;
	str+='</div>';
	$("#"+parent).append($(str));
	$("#"+id+"_div").css(myTextCss(parent,top,left,height,width));
	$("#"+id+"_div").css({"font-size":syslabel.fontsize});
}

//ttttttttree
function myDBTree(pmyTree1){
	//style鍙兘鐨勯�椤癸細checkbox;animate;lien;edit;full;menu:
	var str='';
	if (pmyTree1.parent=='') pmyTree1.parent='main';
	var xcheckbox='false';
	var xanimate='false';
	var xline='false';
	var xedit='false';
	if (pmyTree1.checkbox) xcheckbox='true'; 
	if (pmyTree1.line) xline='true'; 
	if (pmyTree1.animate) xanimate='true'; 
	if (pmyTree1.editable) xedit='true';
	if (pmyTree1.iconcls==undefined) pmyTree1.iconcls='';
	pmyTree1.selectednode=null;
	str+='<div id="'+pmyTree1.id+'" style="overflow:auto;" class="easyui-tree" data-options="animate:'+xanimate+', checkbox:'+xcheckbox+', lines:'+xline;
	if (xedit=='true'){
		str+=',onClick: function(node){ $(this).tree(\'beginEdit\',node.target);}';
	}	
	str+='"></div>';
	$("#"+pmyTree1.parent).append($(str));
	var h=$("#"+pmyTree1.parent).height()*1;
	var w=$("#"+pmyTree1.parent).width()*1;
	if (pmyTree1.height>0) $("#"+id).css({ height: pmyTree1.height });
	else $("#"+pmyTree1.id).css({ height: '100%' });
	if (pmyTree1.width>0) $("#"+pmyTree1.id).css({width: pmyTree1.width});
	else $("#"+pmyTree1.id).css({width: '100%'});
	$("#"+pmyTree1.id).attr('xsql',pmyTree1.sql);  //鑷畾涔夊睘鎬э紝璁板綍鍩烘湰鐨剆ql璇彞
	$("#"+pmyTree1.id).attr('xtype','tree');  //鑷畾涔夊睘鎬э紝璁板綍鍩虹被鍨�
	$("#"+pmyTree1.id).attr('xparent',pmyTree1.parent);  //鑷畾涔夊睘鎬�
	$("#"+pmyTree1.id).attr('xtitle',pmyTree1.title);  //鑷畾涔夊睘鎬�
	$("#"+pmyTree1.id).attr('xid',pmyTree1.id);  //鑷畾涔夊睘鎬�
	var source=myLoadTreeData(pmyTree1);
	$('#'+pmyTree1.id).tree({ data: source });
	$("#"+pmyTree1.id).tree('collapseAll');
	$('#'+pmyTree1.id).tree({  //鍙屽嚮灞曞紑鎴栨敹缂╃粨鐐�
		 onDblClick: function(node){
			if ($(this).tree('isLeaf',node.target)){
				 if (pmyTree1.checkbox){//閫夋嫨澶嶉�妗�
					 if (node.checkState=='checked') $(this).tree('uncheck', node.target);
					 else $(this).tree('check', node.target);
				 }else{
					 myTreeEvents(pmyTree1.id,'ondblclick',node);
				 }
			}else{ //灞曞紑鐖惰妭鐐�
				if (node.state=='closed') $(this).tree('expand', node.target);
				else $(this).tree('collapse', node.target);
			}
			//myTreeEvents(pmyTree1.id,'ondblclick',node);
		},
		 onSelect: function(node){
		 	pmyTree1.selectednode=node;
			myTreeEvents(pmyTree1.id,'onselect',node);
		},
		filter: function(q, node){  //杩囨护锛屾寜鍔╄鐮佽繃婊�
			var xtext=node.text.toLowerCase();
			var qtext=q.toLowerCase();
			//console.log(myGetMemoCode(xtext));
			var flag1=xtext.indexOf(qtext) >= 0;
			var flag2=myGetMemoCode(xtext).indexOf(qtext) >= 0;  //鍔╄鐮�
			//杩斿洖杩囨护鍚庣殑绗竴涓妭鐐癸紝浠ヤ究閫変腑
			if (flag1+flag2 && pmyTree1.selectednode==null) pmyTree1.selectednode=node;
			return flag1+flag2;
		}
	});
	//閫変腑绗竴涓粨鐐�
	var item = $('#'+pmyTree1.id).tree('getRoot');
	if (item!=null){
		if (item.children) $("#"+pmyTree1.id).tree('expand', item.target);
		$("#"+pmyTree1.id).tree('select', item.target);
	}
	return pmyTree1;
}

//鍔犺浇鏍戠粨鐐癸紝鍒嗕袱绉嶆ā寮�
function myLoadTreeData(pmyTree1){
	if (pmyTree1.style!='full'){ //閫愮骇灞曞紑,瀛愯妭鐐圭殑id鍊间负鈥�鈥�鐖惰妭鐐瑰�
		$("#"+pmyTree1.id).tree({
			onBeforeExpand: function (node){  //鐐瑰嚮灞曞紑浜嬩欢
				var pid=node.id;
				//var sql=$('#'+pmyTree1.id).attr('xsql');
				var child_node = $('#'+pmyTree1.id).tree('getChildren', node.target);
				if (child_node.length==1 && child_node[0].id=='_'+pid){ //鐢熸垚瀛愯妭鐐�
					if (pmyTree1.sql!='') xsql="select * from ("+pmyTree1.sql+") as p where parentnodeid='"+pid+"'";
					else xsql='';
					$.ajax({
						url: "system//easyui_getChildNodes.jsp",
						data: { database: sysdatabasestring, selectsql: myToXcode(xsql), keyfield:pmyTree1.keyfield, sortfield:pmyTree1.sortfield, style:pmyTree1.style }, 
						async: false, method: 'post',						    
						success: function(data) {
							console.log(data);
							var source=eval(data);
							$('#'+pmyTree1.id).tree('remove', child_node[0].target); //鍒犻櫎瀛愯妭鐐�
							$('#'+pmyTree1.id).tree('append', {  //澧炲姞鏁版嵁浣滀负瀛愯妭鐐�
								parent: node.target,
								data: source 
							});
						}    
					});
				};
				myTreeEvents(pmyTree1.id,'onBeforeExpand',node);
			}
		});		
	}//if 'full'鍒ゆ柇缁撴潫
	var source=[];  
	if (pmyTree1.style=='full'){ //涓�鎬у叏閮ㄨ幏鍙�
		$.ajax({
			url: "system//easyui_getAllTreeNodes.jsp",
			data: { database: sysdatabasestring, selectsql:myToXcode(pmyTree1.sql), keyfield:pmyTree1.keyfield, sortfield:pmyTree1.sortfield, iconcls:pmyTree1.iconcls }, 
			async: false, method:'post',
			success: function(data) {
				source=eval(data);
			}    
		});
	}else{  
		//鍒嗗眰灞曞紑缁撶偣
		if (pmyTree1.sql!='') xsql="select * from ("+pmyTree1.sql+") as p where parentnodeid=''";  //绗竴灞�
		else xsql='';
		$.ajax({
			url: "system//easyui_getChildNodes.jsp",
			data: { database: sysdatabasestring, selectsql: myToXcode(xsql), keyfield:pmyTree1.keyfield, sortfield:pmyTree1.sortfield, style:pmyTree1.style }, 
			async: false, method: 'post',						    
			success: function(data) {
				source=eval(data);
			}    
		});
		//$("#"+id).tree('collapseAll');
	}
	return source; 
}	

//鍔犺浇鏍戠粨鐐癸紝鍒嗕袱绉嶆ā寮�
function myLoadComboTreeData(id,sql,keyfield,sortfield,style){
	if ((';'+style+';').indexOf(';full;')<0){ //閫愮骇灞曞紑
		$("#"+id).combotree({
			onBeforeExpand: function (node){  //鐐瑰嚮灞曞紑浜嬩欢
				var pid=eval("node."+keyfield);
				//var sql=$('#'+id).attr('xsql');
				var xcbtree=$('#'+id).combotree('tree');
				var child_node = xcbtree.tree('getChildren', node.target);
				if (child_node.length==1 && child_node[0].id=='_'+pid){ //鐢熸垚瀛愯妭鐐�
					if (sql!='') xsql="select * from ("+sql+") as p where parentnodeid='"+pid+"'";
					else xsql='';
					$.ajax({
						url: "system/easyui_getChildNodes.jsp",  //
						data: { database: sysdatabasestring, selectsql: myToXcode(xsql), keyfield:keyfield, sortfield:'', iconcls:pmyTree1.iconcls }, 
						async: false, method: 'post',						    
						success: function(data) {
							var source=eval(data);
							xcbtree.tree('remove', child_node[0].target); //鍒犻櫎瀛愯妭鐐�
							xcbtree.tree('append', {  //澧炲姞鏁版嵁浣滀负瀛愯妭鐐�
								parent: node.target,
								data: source 
							});
						}    
					});
				};
			}
		});		
	}//if 'full'鍒ゆ柇缁撴潫
	
	//var cbtree=$('#'+id).combotree('tree');	
	var source=[];  
	if ((';'+style+';').indexOf(';full;')>=0){ //涓�鎬у叏閮ㄨ幏鍙�
		$.ajax({
			url: "system/easyui_getAllTreeNodes.jsp",
			data: { database: sysdatabasestring, selectsql: myToXcode(sql), keyfield:keyfield, sortfield:sortfield, iconcls:pmyTree1.iconcls }, 
			async: false, method: 'post',    
			success: function(data) {
				source=eval(data);
				//$('#'+id).tree({ data: source });
			}    
		});
		//$("#"+id).tree('collapseAll');
	}else{  
		//鍒嗗眰灞曞紑缁撶偣
		if (sql!='') xsql="select * from ("+sql+") as p where parentnodeid=''";  //绗竴灞�
		else xsql='';
		$.ajax({
			url: "system/easyui_getChildNodes.jsp", //
			data: { database: sysdatabasestring, selectsql: myToXcode(xsql), keyfield:keyfield, sortfield:sortfield, style:style }, 
			async: false, method: 'post',						    
			success: function(data) {
				source=eval(data);
				//$('#'+id).tree({ data: source });  //鍔犺浇json鏁版嵁鍒版爲
			}    
		});
		//cbtree.tree('collapseAll');
	}
	return source; 
}	

//鐢熸垚fieldset
function myFieldset(id,parent,title,top,left,height,width){
	if (parent=='') parent='main';
	var str='';
	//str='<fieldset id="'+id+'" style="position: absolute; padding:0px 0px 0px 15px; margin:0px 0px 0px 0px; padding-right:0px; border:1px groove;">'; 
	str='<fieldset id="'+id+'" style="position: absolute; margin:0; padding:0; border:1px solid #B5B8C8;">';  //groove  #990033榛戣壊 
	if (title!='') str+='<legend style="margin:0 10px; padding:0;">'+title+'</legend>';
	str+='</fieldset>';
	$("#"+parent).append($(str));
	//$("#"+id).css(myTextCss(parent,top,left,height,width));
	if (top>0 && left>0) var css={margin:"0", padding:"0", position:"absolute", top:top+'px', left:left+'px', width:width, height:height, "z-index":2};
	else var css={margin:"0", padding:"0", position:"relative", width:width, height:height, "z-index":2};
	$("#"+id).css(css);
	$("#"+id).css(sys.theme);
	$("#"+id).attr('type','fieldset');  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xtitle',title);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
}

//鐢熸垚groupbox
function myGroupbox(id,parent,top,left,height,width,border){
	var str='';
	if (border==1) xborder=true;
	else xborder=false;
	str='<div id="'+id+'" style="position:absolute; top:'+top+'px; left:'+left+'px; padding:0px 0;border:'+xborder+' ">';
	//str+='<fieldset id="'+id+'" style="position:relative; top:0;left:0; width:100%; height:100%; padding:0px 0;border:'+border+'px groove"></fieldset>';
	str+='</div>';
	if (parent!=''){
		$("#"+parent).append($(str));
		$("#"+id+"").css(myTextCss(parent,top,left,height,width));
		$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
		$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	}
	return str;
}

function myPanel(id,parent,title,top,left,height,width,style){
	if (parent=='') parent='main';
	//绐椾綋搴曢儴绌�px,
    str='<div class="easyui-panel" id="'+id+'" title="&nbsp;'+title+'" style="position:relative; background:#fafafa; margin:0px 0px 0px 0px; padding:2px 2px 2px 2px;';
    if (width>0) str+='width:'+width+'px;';
    else str+='width: 100%;';
    if (height>0) str+='height:'+height+'px;';
    else str+='height: 100%;';
    str+='"\n';
    str+='data-options="border:false';
    if (height==0 && width==0) str+=',fit:true';
    str+='';
    if (style.indexOf('border')>=0) str+=',border:true';
    else str+=',border:false';
    if (style.indexOf('close')>=0) str+=',closable:true';
    if (style.indexOf('min')>=0) str+=',minimizable:true';
    if (style.indexOf('min')>=0) str+=',maximizable:true';
    if (style.indexOf('collapse')>=0) str+=',collapsible:true';
    str+='" >';
    str+='</div>';
    $('#'+parent).append($(str));
    $('#'+id).panel();
    //if (top>0 && left>0) $("#"+id+"_div").css(myTextCss(parent,top,left,0,0));
	//$("#"+id).attr('type','panel');  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xtitle',title);  //鑷畾涔夊睘鎬�
}


//鐢熸垚splitbutton
function mySplitButton(id,parent,text,top,left,height,width,icon,style,event){
	if (parent=='') parent='main';
	if (width==0) height=sysbutton.width;
	if (height==0) height=sysbutton.height;
	if (style!='') style=';'+style+';';
	var str='';
	if (style!=undefined && style.indexOf(';menu;')>=0) var menuflag=true;
	else var menuflag=false;
	if (style!=undefined && style.indexOf(';btnsep;')>=0){ //鎸夐挳鍒嗛殧绗�
		str+='<a href="javascript:void(0)" id="'+id+'_sep" class="btn-separator"></a>';
	}
	str+='<a href="javascript:void(0)" id="'+id+'" class="easyui-splitbutton" style="padding:0; margin:0;"></a>';
	$("#"+parent).append($(str));
	$("#"+id).css(myTextCss(parent,top,left,height,width));
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	if (icon!=''){
		$("#"+id).splitbutton({'iconCls': icon, iconAlign:'left'});
	}
	if (text!=''){
		$("#"+id).splitbutton({'text': text});
	} 
	if (style!=undefined && style.indexOf(';plain;')>=0){
		$("#"+id).splitbutton({'plain':true});
	}
	if (event!=undefined && event!=''){
		$('#'+id).bind('click',function(e){
			eval(event+"(e);");
		});
	}
}	

//鐢熸垚linkbutton
function myButton(id,parent,text,top,left,height,width,icon,style,event){
	if (parent=='') parent='main';
	if (width==0) height=sysbutton.width;
	if (height==0) height=sysbutton.height;
	if (style!='') style=';'+style+';';
	var str='';
	if (style!=undefined && style.indexOf(';menu;')>=0) var menuflag=true;
	else var menuflag=false;
	if (style!=undefined && style.indexOf(';btnsep;')>=0){ //鎸夐挳鍒嗛殧绗�
		str+='<a href="javascript:void(0)" id="'+id+'_sep" class="btn-separator"></a>';
	}
	if (menuflag) str+='<a href="javascript:void(0)" id="'+id+'" class="easyui-menubutton" style="padding:0; margin:0;"></a>';
	else str+='<a href="javascript:void(0)" id="'+id+'" class="easyui-linkbutton" style="padding:0; margin:0;"></a>';
	$("#"+parent).append($(str));
	$("#"+id).css(myTextCss(parent,top,left,height,width));
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xtype','linkbutton');  //鑷畾涔夊睘鎬�
	if (icon!=''){
		if (menuflag) $("#"+id).menubutton({'iconCls': icon, iconAlign:'left'});
		else $("#"+id).linkbutton({'iconCls': icon, iconAlign:'left'});
	}
	if (text!=''){
		if (menuflag) $("#"+id).menubutton({'text': text});
		else $("#"+id).linkbutton({'text': text});
	} 
	if (style!=undefined && style.indexOf(';plain;')>=0){
		if (menuflag) $("#"+id).menubutton({plain:true});
		else $("#"+id).linkbutton({plain:true});
	}else{
		if (menuflag) $("#"+id).menubutton({plain:false});
		else $("#"+id).linkbutton({plain:false});
	}
	if (event!=undefined && event!=''){
		$('#'+id).bind('click',function(e){
			eval(event+"(e);");
		});
	}
}	

function myToolbar(id,parent,buttons,top,left,height,width,color){
	if (color==undefined || color=='') var color='#E0ECFF';
	if (height==0) xheight=sysbutton.height;
	else xheight=height;
	var str='<div id="'+id+'" class="easyui-panel" style="padding:'+top+'px 6px 1px '+(left+8)+'px; height:'+xheight+'px; position:relative; ';
	if (color!='') str+=' background:'+color+'; ';
	str+=' border-bottom:1px solid #B5B8C8;"></div>';  //鍙湁鍦拌竟妗嗙嚎
	$("#"+parent).append($(str));
	if (buttons!='') myButtonGroup(id+'_btn',id,buttons,top+4,1,height-2*top-5,width);
}	//

function myButtonGroup(id,parent,buttons,top,left,height,width){
	//鍒嗛殧绾跨殑id涓篿d+'_sep'+k銆備緥濡�gridbtn_sep1...
	//height浣嶇珫绾跨殑楂樺害锛宼op涓虹珫绾跨殑浣嶇疆锛屾寜閽綅缃敱toolbar瀵瑰簲鐨刾anel鐨刾adding璁惧畾锛岃繖閲屼笉璁剧疆銆�
	if (parent=='') parent='main';
	if (width==0) width=65;
	if (left>0){
		//var str='<div id="'+id+'" style="margin 0px 0px 0px '+left+'px;"></div>';
		//$("#"+parent).append($(str));
	}
	var tmp=buttons.split(';');
	var k=1;
	for (var i=0; i<tmp.length; i++){
		var fields=tmp[i].split('/');
		var fid='';
		var icon='';
		var text='';
		var menu='';
		var sep='';
		var str='';
		if (fields.length>=1){
			text=fields[0];
			if (text.substring(0,1)=='|' ||text.substring(0,1)=='-'){
				sep='-';
				text=text.substring(1,1000);
			}
			if (fields.length>=2) fid=fields[1];
			if (fields.length>=3) icon=fields[2];
			if (fields.length>=4) menu=fields[3];
			if (text=='-' || text=='|' || fields.length==1){
				str='<span style="margin:0px 0px 0px 0px;"><a id="'+id+'_sep'+k+'" href="javascript:void(0)" class="btn-separator" style="';
				if (height>0) str+='height:"'+height+'px";';
				str+='"></a></span>';
				$("#"+parent).append($(str));
				$("#"+id+'_sep'+k).css({position: "absolute", top:top+"px", height:(height)+"px"});
				k++;
			}else{
				if (sep!=''){
					str='<span style="width:'+width+'px; margin:0px 0px 0px 0px;"><a id="'+fid+'_sep" href="javascript:void(0)" class="btn-separator" style="';
					if (height>0) str+='height:"'+height+'px";';
					str+='"></a></span>';
					$("#"+parent).append($(str));
					$("#"+fid+'_sep').css({position: "absolute", top:top+"px", height:(height)+"px"});
				}
				if (menu=='') str='<a href="javascript:void(0)" id="'+fid+'" class="easyui-linkbutton" data-options="plain:true';
				else str='<a href="javascript:void(0)" id="'+fid+'" class="easyui-menubutton" data-options="plain:true, menu:\'#'+menu+'\'';
				if (icon!='') str+=',iconCls:\''+icon+'\'';
				//if (height>0) str+=',height:'+height+'px;'; 
				str+='">'+text+'</a>';	
				$("#"+parent).append($(str));
				if (menu==''){
					$("#"+fid).linkbutton({width:width});
					$("#"+fid).attr('xtype','linkbutton');
				}else{
					$("#"+fid).menubutton({width:width+20});
					$("#"+fid).attr('xtype','menubutton');
				}
			}
		}
	}
}

//鎸夐挳銆佽彍鍗曞垎闅旂
function mySep(id,parent,top,left,height,style){
	if (parent=='') parent='main';
	if (style!='') style=';'+style+';';
	var str='';
	if (style!=undefined && style.indexOf(';menu;')>=0){ //鎸夐挳鍒嗛殧绗�
		str+='<div id="'+id+'_div"><a href="javascript:void(0)" id="'+id+'_sep" class="menu-sep" ></a></div>';
	}else{
		str+='<div style="margin:2px 0;" id="'+id+'_div"><a href="javascript:void(0)" id="'+id+'_sep" class="btn-separator" style="margin:'+top+'px 0;" ></a></div>';
	}
	$("#"+parent).append($(str));
	$("#"+id+"_div").css(myTextCss(parent,top,left,height,0));
	$("#"+id+"_sep").css({position: "absolute", height: height});;
	//$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	//$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
}	

//鐢熸垚琛ㄥ崟
function myForm(id,parent,title,top,left,height,width,style){
	if (parent=='') parent='main';
	//绐椾綋搴曢儴绌�px,
    if (parent=='main' && (width<=0 || height<=0)){
   		$("#main").removeClass();
		$("#main").addClass('easyui-layout');
		$("#main").panel({'fit':true});
	}
    if (title=='') str='<div class="easyui-panel" id="'+id+'" style="overflow:auto; position:relative; background:#fafafa; margin:0; padding:0px 0px 0px 0px;';
    else  str='<div class="easyui-panel" id="'+id+'" title="&nbsp;'+title+'" style="overflow:auto; position:relative; background:#fafafa; margin:0; padding:0px 0px 0px 0px;';
    var ph=$('#'+parent).height()-2;
	var pw=$('#'+parent).width()-2;
    if (width>0) str+='width:'+width+'px;';
    else str+='width: 100%;';
    if (height>0) str+='height:'+height+'px;';
    else str+='height: 100%;';
    if (left>0) str+='left:'+left+'px;';
    if (top>0) str+='top:'+top+'px;';
    str+='"\n';
    str+='data-options="iconCls:\'panelIcon\'';
    //if (height==0 && width==0) str+=',fit:true';
    if (style.indexOf('close')>=0) str+=',closable:true';
    if (style.indexOf('collapse')>=0) str+=',collapsible:true';
    if (style.indexOf('min')>=0) str+=',minimizable:true';
    if (style.indexOf('min')>=0) str+=',maximizable:true';
    str+='" >';
    str+='</div>\n';
    $('#'+parent).append($(str));
    $('#'+id).panel();
	//$("#"+id).attr('type','form');  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xtitle',title);  //鑷畾涔夊睘鎬�
}

//鐢熸垚tabs
function myTabs(id,parent,items,top,left,height,width,style){
	if (parent=='') parent='main';
	var xid=id+'Panel';
	if (style.indexOf('close')>=0) var flag=true;
	else flag=false;
	//-19px缁忚繃璋冭瘯纭畾锛屽彇鎺夊簳閮ㄧ┖闅�left,top涓虹┖闅�
	var str='<div id="'+id+'" class="easyui-tabs" style="overflow: auto; ';
	if (top>0) str+='margin: '+top+'px 0px -19px ';
	else str+='margin: 0px 0px -19px ';
	if (left>0) str+=left+'px; padding:0px 0px 0px 0px;">\n';
	else str+='0px; padding:0px 0px 0px 0px;">\n';
	var tmp=items.split(';');
	for (var i=0; i<tmp.length; i++){
	    str+='<div id="'+id+(i+1)*1+'" title="'+tmp[i]+'" data-options="closable:'+flag+'" style="top:0px; left:0px; position:relative; overflow:auto; border-width:0px;">\n';
		str+="</div>\n";
	}	
	str+='</div>\n';
	$("#"+parent).append($(str));
	$("#"+id).attr('xparent',parent);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('xid',id);  //鑷畾涔夊睘鎬�
	$("#"+id).attr('type','tabs');  //鑷畾涔夊睘鎬�
	$("#"+id).tabs();
	//鐖剁被鏃ユ湡鐨勯珮搴︿笌瀹藉害,splitter鍙樺姩鏃舵敼鍙�
	if (width<=0 && height<=0) $("#"+id).tabs({fit:true});
	else{
		if (width<=0 && $('#'+parent).length>0){
			width=$('#'+parent).width()-0;
		}	
		if (height<=0 && $('#'+parent).length>0){
			height=$('#'+parent).height()-0;
		}	
		$("#"+id).tabs({width: width, height: height});
	}	
	$("#"+parent).attr('xtab',id);  //鑷畾涔夊睘鎬э紝璁板綍鍏朵腑鐨則ab鍚嶇О
	//鏇存柊tab锛屽惁鍒欑涓�〉涓嶄細鏄剧ず
	if (tmp.length>0){
		for (var i=1; i<tmp.length; i++){
			$("#"+id).tabs('select',i);  //姣忎釜閮介�涓竴娆★紝瑙ｅ喅鏄剧ず鏍煎紡闂
		}	
		$("#"+id).tabs('select',0);
	}
	var currTab = $('#'+id).tabs('getTab', 0);
	$('#'+id).tabs('update', { tab: currTab, options:{} });
}


//鐢熸垚琛ㄥ崟+tabs
function myTabForm(id,parent,title,tabs,top,left,height,width,style){
	//鐢熸垚琛ㄥ崟myTabForm-涓荤獥浣� myTab1,2...
	var xid=id+'Form';
	myForm(xid,parent,title,top,left,height,width,style);
	/*
	if (height>0) var ph=$("#"+xid).height()-33;
	else var ph=0;
	if (width>0) var pw=$("#"+xid).width()-6;
	else var pw=0;
	myTabs(id,xid,tabs,0,0,ph,pw,style);
	*/
	myTabs(id,xid,tabs,0,0,0,0,style);
}

//鐢熸垚鑿滃崟鎸夐挳
function myMenuButton(id,parent,title,top,left,height,width,menuitem){
	var str='<a href="javascript:void(0)" id="'+id+'" class="easyui-menubutton" data-options="plain:true, menu:\'#'+menuitem+'\'" style="';
	if (width>0) str+='width:'+width+'px';
	if (height>0) str+='height:'+height+'px';
	if (top>0 && left>0) str+='position:absolute; top:'+top+'px; left:'+left+"px;";
	str+='">'+title+'</a>';
	$("#"+parent).append($(str));
	$("#"+id).attr('xtype','menubutton');
	$("#"+id).menubutton();
	
}

//瀹氫箟鑿滃崟骞剁粦瀹氬埌瀵硅薄锛屽琛ㄥ崟
function myMenu(id,items,bindobj){
	myMenuItem(id,items);
	var tmp=bindobj.split(';');
	if (tmp.length>0){
		var str='';
		for (var i=0;i<tmp.length;i++){
			if (i>0) str+=',';
			str+='#'+tmp[i];
		}
	}
}

//瀹氫箟鑿滃崟锛屼絾涓嶇粦瀹氥�濡傛灉娌℃湁涓昏彍鍗曪紝鍒欑敓鎴愪竴涓猧d
function myMenuItem(id,items){
	//items---add/鏂板/addIcon;edit/淇敼
	var str='';
	if ($("#"+id).length==0){
		str='<div id="'+id+'" xtype="menu" class="easyui-menu" data-options="" style="width:auto"></div>';
		$("#main").append($(str));
	}
	$("#"+id).menu();  //涓嶈兘缂�
	var k=1;
	str='';
	var tmp=items.split(';');
	for (var i=1;i<=tmp.length;i++){
		var mn=tmp[i-1].split('/');
		if (mn.length==1 && mn[0]=='-'){  //-涓哄垎鍓茬嚎
			$("#"+id).menu('appendItem',{
				id:id+'_sep'+k,
				separator:true  //class: 'menu-sep'
			});
			k++;
		}else if (mn.length==2){
			$("#"+id).menu('appendItem',{
				xtype:"menuitem", 
				text:mn[0],
				id:mn[1]
			});
			$("#"+mn[1]).attr('xtype','menuitem');
			$("#"+mn[1]).attr('xparent',id);
		}else if (mn.length==3){
			$("#"+id).menu('appendItem',{
				xtype:"menuitem",
				text:mn[0],
				id:mn[1],
				iconCls:mn[2]
			});
			$("#"+mn[1]).attr('xtype','menuitem');
			$("#"+mn[1]).attr('xparent',id);
		}
	}		  
}

function myWinTitle(win,title){
	$("#"+win).window('setTitle','<div style=\'margin:0px 0px 0px 4px; \'>'+title+'</div>');
}

//鐢熸垚绐椾綋modal
function myWindow(id,title,top,left,height,width,buttons,style){
	//CancelBtn,CloseBtn,OkBtn,SaveBtn
	if (style==undefined) var style='';
	var xid=id+'Form'; 
	var str='<div id="'+id+'" class="easyui-window" title="<div style=\'margin:0px 0px 0px 4px; \'>'+title+'" data-options="iconCls:\'panelIcon\'" ';
	str+='style="';
	//鏄惁闅愯棌婊氬姩鏉�
	if (style.indexOf(';scrollbar;')>=0) str+='overflow:auto;';
	else str+='overflow:hidden;';
	str+='position:relative; margin:0px 0px 0px 0px; padding:0px 0px 0px 0px;"></div>';
	$("#main").append($(str));	
	if (width<=0) width=500;
	if (height<=0) height=400;
	var xstyle='({width:'+width+', height:'+height;
	if (style==undefined || style=='') style='close';
	if (buttons==undefined) buttons='';
	style=';'+style+';'
	if (style.indexOf(';resize;')>=0)	xstyle+=' ,resizable: true';
	else xstyle+=' ,resizable: false';
	if (style.indexOf(';drag;')>=0) xstyle+=' ,draggable: true';
	else xstyle+=' ,draggable: false';
	if (style.indexOf(';close;')>=0) xstyle+=' ,closable:true';
	else xstyle+=' ,closable:false';
	if (style.indexOf(';collapse;')>=0) xstyle+=' ,collapsible:true';
	else xstyle+=' ,collapsible:false';
	if (style.indexOf(';max;')>=0) xstyle+=' ,maximizable:true';
	else xstyle+=' ,maximizable:false';
	if (style.indexOf(';min;')>=0) xstyle+=' ,minimizable:true';
	else xstyle+=' ,minimizable:false';
	if (style.indexOf(';modal;')>=0) xstyle+=' ,modal:true';
	else xstyle+=' ,modal:false';
	xstyle+='})';
	if (top>0 && left>0) $("#"+id).window({left:left, top:top});
	$("#"+id).window( eval(xstyle) );
	$("#"+id).attr('type','window');
	$("#"+id).window('close'); //鍒濆鐘舵�鍏堝叧闂�
	if (buttons!=undefined && buttons!=''){
		buttons=';'+buttons+';'
		var btntop=height-74;
		var btnleft=width-sysbutton.width-30;
		if (buttons.indexOf(';cancel;')>=0){
			myButton(id+"CancelBtn",id,"鍙栨秷",btntop,btnleft,sysbutton.height,sysbutton.width,'','');
			btnleft=btnleft-sysbutton.width-1;
		}
		if (buttons.indexOf(';close;')>=0){
			myButton(id+"CloseBtn",id,"鍏抽棴",btntop,btnleft,sysbutton.height,sysbutton.width,'','');
			btnleft=btnleft-sysbutton.width;
			$("#"+id+"CancelBtn").on('click', function () {
				$("#"+id).window('close');		
			});
		}
		if (buttons.indexOf(';save;')>=0){
			myButton(id+"SaveBtn",id,"淇濆瓨",btntop,btnleft,sysbutton.height,sysbutton.width,'','');
			btnleft=btnleft-sysbutton.width;
		}
		if (buttons.indexOf(';ok;')>=0){
			myButton(id+"OkBtn",id,"纭畾",btntop,btnleft,sysbutton.height,sysbutton.width,'','');
			btnleft=btnleft-sysbutton.width;
		}
	}
}

function myGridColumns(pmyGrid1){
	//[#230%n@r]璧勬簮鍚嶇О/resourcename;
	if (pmyGrid1.fieldset==undefined) var fieldset='';
	else var fieldset=pmyGrid1.fieldset;
	var xcolumns=[];
	for (var i=0;i<=255;i++){
		xcolumns[i]={};
		xcolumns[i].name='';
		xcolumns[i].title='';
		xcolumns[i].align='';
		xcolumns[i].type='c';
		xcolumns[i].length='100';
		xcolumns[i].dec='0';
		xcolumns[i].fixed=0;
	}
	var result=[];
	pmyGrid1.columnset='';
	if (fieldset=='') var xfields=[];
	else var xfields=fieldset.split(';');
	for (var i=0;i<xfields.length;i++){
		var s=xfields[i].toLowerCase();
		var p1=s.indexOf('[');
		var p2=s.indexOf(']');
		if (p1>=0 && p2>p1){
			var ss=s.substring(p1+1,p2);
			var x1=ss.indexOf('@');
			if (x1>=0){
				xcolumns[i].align=ss.substr(x1+1,1);
				ss=ss.replace('@'+xcolumns[i].align,'');  //鍒犻櫎璇ユ弿杩�
			}
			var x2=ss.indexOf('%');
			if (x2>=0){
				xcolumns[i].type=ss.substr(x2+1,1);
				ss=ss.replace('%'+xcolumns[i].type,'');  //鍒犻櫎璇ユ弿杩�
			}
			var x3=ss.indexOf('#');
			var s1='';
			var s2='';
			if (x3>=0)	s1=ss.substring(x3+1,255);
			else s1=ss;
			var x4=s1.indexOf(',');
			if (x4<0){
				xcolumns[i].length=s1;
			}else{
				xcolumns[i].length=s1.substring(0,x4);
				xcolumns[i].dec=s1.substr(x4+1,2);
			}
			s=s.substring(p2+1,255);
		}
		var x1=s.indexOf('/');
		if (x1>0){
			xcolumns[i].title=s.substring(0,x1);		
			xcolumns[i].name=s.substring(x1+1);		
		}else{
			xcolumns[i].title=s;		
			xcolumns[i].name=s;		
		}
		if (xcolumns[i].align=='' && xcolumns[i].type=='d') xcolumns[i].align='c'; 
		if (xcolumns[i].align=='' && xcolumns[i].type=='n') xcolumns[i].align='r'; 
		if (xcolumns[i].align=='' && xcolumns[i].type=='f') xcolumns[i].align='r'; 
		if (xcolumns[i].align=='c') xcolumns[i].align='center';
		else if (xcolumns[i].align=='r') xcolumns[i].align='right';
		else xcolumns[i].align='left';
		if ((xcolumns[i].type=='n' || xcolumns[i].type=='f')){  //鏁板�鍨嬫湁灏忔暟鐐�
			var str="{title: xcolumns[i].title, field:xcolumns[i].name, sortable:false, width:xcolumns[i].length, halign:'center', align: xcolumns[i].align, formatter: function(value){\n";
			 //闈為浂鎵撳嵃
			str+="	if (value!=undefined) value=(1.0*value).toFixed("+xcolumns[i].dec+");\n";
			str+="	else value='0';\n";
			if (xcolumns[i].type=='n') str+="	if (value==undefined || value=='' || 1*value==0) value='&nbsp;';\n";
			str+="	return '<a href=\"javascript:void(0)\" style=\"padding:0 0px; font-size:'+(pmyGrid1.fontsize-1)+'px; color:#000000;\" >";
			str+="<div>' + value+'</div></a>';}}\n";
			//str+="<div align=\"right\">' + value+'</div></a>';}}\n";
			//<a href=\"#\">
		}else if (xcolumns[i].type=='d'){  //鏃ユ湡鏃堕棿鍨�
			var str="{title: xcolumns[i].title, field:xcolumns[i].name, sortable:false, width:xcolumns[i].length, halign:'center', align: xcolumns[i].align, formatter: function(value){\n";
  			str+="	if (value=='' || value==undefined) value='&nbsp;';";
			str+="	return '<a href=\"javascript:void(0)\" style=\"padding:0 0px; font-size:'+(pmyGrid1.fontsize-1)+'px; color:#000000;\" >";
			str+="<div>' + value+'</div></a>';}}\n";
			//<a href=\"#\">
		}else if (xcolumns[i].type=='i'){  //image绫诲瀷锛宖ieldname闈炵┖鏃舵樉绀哄浘琛紝榛樿澶у皬16px,灏忔暟浣嶆暟涓鸿缃ぇ灏�
			var h=xcolumns[i].dec;
			if (h<6) h=16;
			var str="{title: xcolumns[i].title, field:xcolumns[i].name, sortable:false, width:xcolumns[i].length, halign:'center', align: xcolumns[i].align, formatter: function(value){\n";
  			str+="	if (value=='' || value==undefined) var xvalue='&nbsp;';\n";
			str+="	else{\n"; 
			str+="		var f='system/images/'+value;\n";
			str+="		var xvalue='<a href=\"javascript:void(0)\"><img border=\"0\" style=\"height:'+h+'px; width:'+h+'px; border:1;\" src=\"'+f+'\" /></a>';\n";
			str+="	}\n";
			//str+="	return '<a href=\"javascript:void(0)\"><img border=\"0\" style=\"height:'+h+'px; width:'+h+'px; border:1;\" src=\"'+f+'\" /></a>';}}\n";
			str+="	return xvalue;\n";
			str+="}}"
		}else if (xcolumns[i].type=='g'){  //鏍规嵁鎵╁睍鍚嶆樉绀哄浘鐗�4浣嶏紝.title鎸囧畾榛樿鍥剧墖鐨勫悗缂�
			//field:'sysdownload'
			var str="{title:'', field:'sysfiletype', sortable:false, width:xcolumns[i].length, halign:'center', align:'center', formatter:function(value,row,index){\n";
  			str+="	var v1=row."+xcolumns[i].name+";\n";  //鏍规嵁璇ュ垪鐨勫�纭畾鍥炬爣鐨勫悕绉�
  			str+="	var v2='"+xcolumns[i].title+".png';\n";
  			str+="	if (v1.lastIndexOf('.pdf')>0) v2='pdf24.png';\n";
  			str+="	else if (v1.lastIndexOf('.swf')>0) v2='swf24.png';\n";
  			str+="	else if (v1.lastIndexOf('.doc')>0) v2='word24.png';\n";
  			str+="	else if (v1.lastIndexOf('.docx')>0) v2='word24.png';\n";
  			str+="	else if (v1.lastIndexOf('.xls')>0) v2='excel24.png';\n";
  			str+="	else if (v1.lastIndexOf('.xlsx')>0) v2='excel24.png';\n";
  			str+="	else if (v1.lastIndexOf('.ppt')>0) v2='ppt24.png';\n";
  			str+="	else if (v1.lastIndexOf('.pptx')>0) v2='ppt24.png';\n";
  			str+="	else if (v1.lastIndexOf('.rar')>0) v2='rar24.png';\n";
  			str+="	else if (v1.lastIndexOf('.zip')>0) v2='zip24.png';\n";
  			str+="	else if (v1.lastIndexOf('.mp3')>0) v2='audio24.png';\n";
  			str+="	else if (v1.lastIndexOf('.wav')>0) v2='audio24.png';\n";
  			str+="	else if (v1.lastIndexOf('.png')>0) v2='pct24.png';\n";
  			str+="	else if (v1.lastIndexOf('.gif')>0) v2='pct24.png';\n";
  			str+="	else if (v1.lastIndexOf('.jpg')>0) v2='pct24.png';\n";
			str+="	v2='system/images/'+v2;\n";
			str+="	return '<a href=\"javascript:void(0)\"><img border=\"0\" style=\"height:20px; width:20px; border:0;\" src=\"'+v2+'\" /></a>';}}\n";
		}else{
  			var str="{title: xcolumns[i].title, field:xcolumns[i].name, nowrap:false, sortable:false, width:xcolumns[i].length, halign:'center', align: xcolumns[i].align, formatter: function(value){";
  			str+="	if (value=='' || value==undefined) value='&nbsp;';";
			str+="	return '<a href=\"javascript:void(0)\" style=\"padding:0 0px; font-size:'+(pmyGrid1.fontsize-0)+'px; color:#000000;\" ><div>'+ value+'</div></a>';";
			//str+="return value;";
			str+="}}\n";
  		}
  		eval("var s="+str+";");  //str to json
		result.push(s);
	} //for
	pmyGrid1.columnset=result;
	return pmyGrid1; //result; 
}

function myLoadGridData(pmyGrid1,pageNumber){
	var myGrid1=pmyGrid1.id;
	//涓夌鏂规硶鍚屾椂鍒锋柊椤靛拰琛屽彿鎵嶆湁鏁�
	if (pageNumber<=0){  //涓�鏃跺埛鏂板綋鍓嶅垪
		var opts =$("#"+pmyGrid1.id).datagrid('getPager').data("pagination").options; 
		pageNumber=opts.pageNumber;
	}
	pageNumber=Math.max(1,pageNumber);
	var pager =$("#"+pmyGrid1.id).datagrid('getPager');
	pager.pagination('refresh',{	// 鏀瑰彉閫夐」锛屽苟鍒锋柊鍒嗛〉鏍忎俊鎭�
		pageNumber: pageNumber
	});
	var opts =$("#"+pmyGrid1.id).datagrid('getPager').data("pagination").options; 
	opts.pageNumber=pageNumber;
	var pageSize=opts.pageSize;
	if (pageSize!=undefined) pageSize=pmyGrid1.pagesize;
	var opts = $("#"+pmyGrid1.id).datagrid('options');
	opts.pageNumber=pageNumber;
	opts.pageSize=pageSize;
	var rowcount = $("#"+pmyGrid1.id).datagrid('getData').total;
	totalpage=parseInt((rowcount-1)/pageSize)+1;
	var rows=$("#"+pmyGrid1.id).datagrid('getRows');
	if (pageNumber>totalpage) pageNumber=1;
	$.ajax({     
		type: "Post",     
		url: "system/easyui_getGridData.jsp",     
		//contentType: "application/json; charset=utf-8",     
		//dataType: "json", 
		data: {
			database: sysdatabasestring, 
			selectsql: myToXcode(pmyGrid1.activesql),
			keyfield: pmyGrid1.keyfield,
			sortfield: pmyGrid1.sortfield,
			limit: pageSize,
			start: (pageNumber-1)*pageSize,
			summeryfields:pmyGrid1.summeryfields				
		}, 
		async: false, method: 'post',    
		success: function(data) {
			eval("var source="+data+";");
			$("#"+pmyGrid1.id).datagrid("reload");  //鏀惧湪loaddata涔嬪墠锛岃Е鍙憃nBeforeLoad浜嬩欢
			$("#"+pmyGrid1.id).datagrid("loadData", source );  //蹇呴』鐢╨oaddata
			//鏍规嵁鎬昏鏁版敼鍙樿鍙风殑鍒楀搴︼紝鏀筩ss
			var rowcount=$("#"+pmyGrid1.id).datagrid('getData').total+'';  //杞崲涓哄瓧绗﹀瀷
			var width=(rowcount.length*6+8);
			if (width<25) width=25;
			var px=width+'px';
			$('.datagrid-header-rownumber,.datagrid-cell-rownumber').css({"width": px});
			$("#"+pmyGrid1.id).datagrid('resize');  //蹇呴』鍐�
			if (rowcount>0){
				var rows=$("#"+pmyGrid1.id).datagrid('getRows');    // get current page rows
				if (pmyGrid1.rowindex==undefined || pmyGrid1.rowindex<0 || pmyGrid1.rowindex>=rowcount){
					pmyGrid1.rowindex=0;
				}	
				$("#"+pmyGrid1.id).datagrid('selectRow',pmyGrid1.rowindex); //閫変腑鏌愯
				pmyGrid1.record=rows[pmyGrid1.rowindex];
				pmyGrid1.pagenumber=pageNumber;
				pmyGrid1.pagecount=parseInt((rowcount-1)/pmyGrid1.pagesize)+1;
			}else{
				pmyGrid1.record=null;
				pmyGrid1.pagenumber=0;
				pmyGrid1.pagecount=-1;
				pmyGrid1.rowindex=-1;
			}
			pmyGrid1.rowcount=rowcount;
			myGridEvents(pmyGrid1.id,'onload');
		}    
	});
	return pmyGrid1;
}

function myGridPaging(pmyGrid1){
	var myGrid1=pmyGrid1.id;
	$("#"+pmyGrid1.id).datagrid({ 
		pagination: true,	
		pageSize: pmyGrid1.pagesize
	});
	//var opts = $("#"+pmyGrid1.id).datagrid('options');
	var opts =$("#"+pmyGrid1.id).datagrid('getPager').data("pagination").options; 
	//opts.pageNumber=1;
	//opts.pageSize=pmyGrid1.pagesize;	
	//瀹氫箟鍒嗛〉鏍忔ā寮�
	var pg = $("#"+pmyGrid1.id).datagrid("getPager");  
	pg.pagination({  
		pageList: [10,20,30,40,50,100,200,300,400,500],
		showPageList: false,  //鏄惁鏄剧ず璁剧疆姣忛〉鏄剧ず琛屾暟鐨勪笅鎷夋
		beforePageText: '绗�, //椤垫暟鏂囨湰妗嗗墠鏄剧ず鐨勬眽瀛� 
		afterPageText: '椤�   鍏�{pages} 椤�, 
		displayMsg: '褰撳墠鏄剧ず{from}锝瀧to}琛岋紝鍏眥total}琛�,
		onRefresh:function(pageNumber,pageSize){
			if (pmyGrid1.rowindex>=0) $("#myGrid1").datagrid('endEdit',pmyGrid1.rowindex);
			pmyGrid1.rowindex=0;  
			myLoadGridData(pmyGrid1,pageNumber);  
			myGridEvents(pmyGrid1.id,'onRefresh');
		},  
		onChangePageSize:function(pageSize){  
			if (pmyGrid1.rowindex>=0) $("#myGrid1").datagrid('endEdit',pmyGrid1.rowindex);
			var opts = $("#"+pmyGrid1.id).datagrid('options');
			//var opts =$("#"+pmyGrid1.id).datagrid('getPager').data("pagination").options; 
			opts.pageSize=pageSize;	
			pmyGrid1.rowindex=0;			
			myLoadGridData(pmyGrid1,1);  
			myGridEvents(pmyGrid1.id,'onChangePageSize');
		},  
		onSelectPage:function(pageNumber,pageSize){
			if (pmyGrid1.rowindex>=0) $("#myGrid1").datagrid('endEdit',pmyGrid1.rowindex);
			var opts = $("#"+pmyGrid1.id).datagrid('options');
			//var opts =$("#"+pmyGrid1.id).datagrid('getPager').data("pagination").options; 
			opts.pageNumber=pageNumber;
			opts.pageSize=pageSize;
			pmyGrid1.rowindex=0;
			myLoadGridData(pmyGrid1,pageNumber);
			myGridEvents(pmyGrid1.id,'onSelectPage');						  
		}  
	});
}

//gggggggggrid
function myGrid(pmyGrid1){
	if (pmyGrid1.summeryfields==undefined) pmyGrid1.summeryfields='';
	if (pmyGrid1.fontsize==undefined) pmyGrid1.fontsize=syslabel.fontsize;
	var str='';
	if (pmyGrid1.top>0 || pmyGrid1.left>0){
		str+='<div id="'+pmyGrid1.id+'_div" style="position:absolute;';
		if (pmyGrid1.top>0) str+=" top:"+pmyGrid1.top+"px;";
		if (pmyGrid1.left>0) str+=" left:"+pmyGrid1.left+"px;";
		str+='">';
	} 
	str+='<div id="'+pmyGrid1.id+'" class="easyui-datagrid" data-options="';
	if (pmyGrid1.toolbar!=undefined && pmyGrid1.toolbar!='') str+='toolbar:'+pmyGrid1.toolbar+'';
	str+='" style="position:absolute;" ></div>';
	if (pmyGrid1.top>0 || pmyGrid1.left>0){
		str+='</div>';
	} 
	$("#"+pmyGrid1.parent).append($(str));
	if (pmyGrid1.sortfield==undefined || pmyGrid1.sortfield=='') pmyGrid1.sortfield=pmyGrid1.keyfield;
	//if (pmyGrid1.sortway==undefined) pmyGrid1.sortway='';
	if (pmyGrid1.checkonclick==undefined) pmyGrid1.checkonclick=1; //鍗曞嚮鏄惁鏀瑰彉checkbox鐘舵�
	pmyGrid1.rowcount=0;
	pmyGrid1.columns=[];
	pmyGrid1.scrollcolumns=[];
	pmyGrid1.fixedcolumns=[];
	pmyGrid1.checkboxcolumn=[];
	//鎻愬彇鍒楀悕
	pmyGrid1.fieldset=pmyGrid1.gridfields;
	pmyGrid1=myGridColumns(pmyGrid1);
	pmyGrid1.scrollcolumns=pmyGrid1.columnset;
	//鎻愬彇鍥哄畾鍒楀垪鍚�
	pmyGrid1.fieldset=pmyGrid1.fixedfields;
	pmyGrid1=myGridColumns(pmyGrid1);
	pmyGrid1.fixedcolumns=(pmyGrid1.fixedcolumns).concat(pmyGrid1.columnset);	
	//鍚堟垚鍒楀畾涔�
	pmyGrid1.columns=(pmyGrid1.fixedcolumns).concat(pmyGrid1.scrollcolumns);
	if (pmyGrid1.checkbox!=''){
		pmyGrid1.checkboxcolumn.push({field:"checkedflag", width: 20, checkbox: true, align:"center"});
	}
	if (pmyGrid1.fixedfields!='') pmyGrid1.fixedcolumns=pmyGrid1.checkboxcolumn.concat(pmyGrid1.fixedcolumns)
	else pmyGrid1.fixedcolumns=pmyGrid1.checkboxcolumn;
	if (pmyGrid1.width<=0) pmyGrid1.width='100%';
	if (pmyGrid1.height<=0) pmyGrid1.height='100%';
	var myGrid1=pmyGrid1.id;
	//纭畾鎺掑簭鍒椾笌杩囨护鍒�
	var tmp='';  ////浠庣綉鏍间腑鎻愬彇鍒楁爣棰樹綔涓轰笅鎷夋閫夐」
	for (var i=0;i<pmyGrid1.columns.length;i++){
		if (pmyGrid1.columns[i].title!=''){
			if (tmp!='') tmp+=';';
			tmp+=pmyGrid1.columns[i].title+'/'+pmyGrid1.columns[i].field;
		}
	}
	if (pmyGrid1.filterfieldset=='') pmyGrid1.filterfieldset=tmp;
	if (pmyGrid1.sortfieldset=='') pmyGrid1.sortfieldset=tmp;
	pmyGrid1.fieldset=pmyGrid1.filterfieldset;
	pmyGrid1=myGridColumns(pmyGrid1);
	pmyGrid1.filterfields=pmyGrid1.columnset;
	pmyGrid1.fieldset=pmyGrid1.sortfieldset;
	pmyGrid1=myGridColumns(pmyGrid1);
	pmyGrid1.sortfields=pmyGrid1.columnset;
	var tmp1='';
	var tmp2='';
	for (var i=0;i<pmyGrid1.filterfields.length;i++){
		if (tmp1!='') tmp1+=';';
		tmp1+=pmyGrid1.filterfields[i].title;
	}	
	for (var i=0;i<pmyGrid1.sortfields.length;i++){
		if (tmp2!='') tmp2+=';';
		tmp2+=pmyGrid1.sortfields[i].title;
	}	
	pmyGrid1.filterfielditems=tmp1;
	pmyGrid1.sortfielditems=tmp2;
	//灞炴�璁剧疆	
	pmyGrid1.rowindex=-1;
	if (pmyGrid1.striped==undefined || pmyGrid1.striped=='') pmyGrid1.striped=false;
	else pmyGrid1.striped=true; 
	if (pmyGrid1.checkbox=='single') var selectoncheck=true;
	else var selectoncheck=false;
	$("#"+pmyGrid1.id).datagrid({
		title: '&nbsp;'+pmyGrid1.title,
		width: pmyGrid1.width,
		height: pmyGrid1.height,
		iconCls: "panelIcon",
		nowrap: true, //false,
		autoRowHeight: false, //true,
		//sortName: pmyGrid1.keyfield,
		remoteSort:false,
		sortOrder: 'asc', 		
		pagePosition: 'bottom',  //top,both
		selectOnCheck: selectoncheck, //true,
		checkOnSelect: selectoncheck, //true,
		//pageNumber: 1,
		//pagination: true,
		//pageSize: pmyGrid1.pagesize	,	
		striped: pmyGrid1.striped,
		frozenColumns: [pmyGrid1.fixedcolumns],
		columns: [pmyGrid1.scrollcolumns]
	});
	$("#"+pmyGrid1.id).attr('xcontextmenu',pmyGrid1.menu); //鑷畾涔夊睘鎬�
	$("#"+pmyGrid1.id).attr('xcheckbox',pmyGrid1.checkbox); //鑷畾涔夊睘鎬�
	if (pmyGrid1.menu!=undefined && pmyGrid1.menu!=''){
		$("#"+pmyGrid1.id).datagrid({
			onRowContextMenu: function(e,index,record){
				e.preventDefault(); //闃绘娴忚鍣ㄦ崟鑾峰彸閿簨浠� 
				var xmenu=$(this).attr('xcontextmenu');  //鑷畾涔夊睘鎬�
				var xcheckbox=$(this).attr('xcheckbox');
				if (xcheckbox=='single') $(this).datagrid("selectRow", index); //鏍规嵁绱㈠紩閫変腑璇ヨ  
				$('#'+xmenu).menu('show', {   //鏄剧ず鍙抽敭鑿滃崟  
					left: e.pageX, //鍦ㄩ紶鏍囩偣鍑诲鏄剧ず鑿滃崟  
					top: e.pageY  
				});
				myGridEvents(pmyGrid1.id,'onRowContextMenu');
			}
		});
	}else{
		$("#"+pmyGrid1.id).datagrid({
			onRowContextMenu: function(e,index,record){
				e.preventDefault(); //闃绘娴忚鍣ㄦ崟鑾峰彸閿簨浠� 
				var xmenu=$(this).attr('xcontextmenu');  //鑷畾涔夊睘鎬�
				var xcheckbox=$(this).attr('xcheckbox');
				if (xcheckbox=='single') $(this).datagrid("selectRow", index); //鏍规嵁绱㈠紩閫変腑璇ヨ  
				myGridEvents(pmyGrid1.id,'onRowContextMenu');
			}
		});
		
	}
	if (pmyGrid1.title==''){
		$("#"+pmyGrid1.id).datagrid({noheader: true});
	}
	if (pmyGrid1.rownumbers){
		$("#"+pmyGrid1.id).datagrid({rownumbers:true});	
	}
	if (pmyGrid1.collapsible){
		$("#"+pmyGrid1.id).datagrid({collapsible:true});	
	}
	if (pmyGrid1.checkbox=='single'){
		$("#"+pmyGrid1.id).datagrid({singleSelect:true});
	}else if (pmyGrid1.checkbox=='multiple'){
		$("#"+pmyGrid1.id).datagrid({singleSelect:false});
	}
	if (pmyGrid1.sortablefields!=undefined && pmyGrid1.sortablefields!=''){
		var cols=$("#myGrid1").datagrid('options').columns[0];
		//$("#myGrid1").datagrid('options').columns[0][0].align="right";
		//$("#myGrid1").datagrid('options').columns[0][0].sortable=true;
		//$("#myGrid1").datagrid();  //淇敼涔嬪悗paging鍜宭oadgriddata
	}
		
	$("#"+pmyGrid1.id).datagrid({
		onDblClickRow:function(index,row){
			myGridEvents(pmyGrid1.id,'onDblClickRow');
		},
		onSelect:function(index,row){
			pmyGrid1.record=row;
			pmyGrid1.rowindex=index;
			myGridEvents(pmyGrid1.id,'onSelect');
		},
		onClickRow:function(index,row){
			pmyGrid1.record=row;
			pmyGrid1.rowindex=index;
			if (pmyGrid1.checkonclick==0){
				//鍗曞嚮涓嶆敼鍙榗heckbox鐘舵�
				//if (myIsRowChecked(pmyGrid1)) $(this).datagrid('uncheckRow',pmyGrid1.rowindex);
				//else $(this).datagrid('checkRow',pmyGrid1.rowindex);
				//$(this).datagrid('uncheckRow',pmyGrid1.rowindex);
				//$(this).datagrid('unselectRow',pmyGrid1.rowindex);
			}
			if (pmyGrid1.singleselect==1){
				var rows=$("#"+pmyGrid1.id).datagrid("getRows");
				for (var i=0;i<rows.length;i++){
					if (pmyGrid1.rowindex!=i) $(this).datagrid('unselectRow',i);
				}
				$(this).datagrid('selectRow',pmyGrid1.rowindex);
			}
			myGridEvents(pmyGrid1.id,'onClickRow');
		},
		onClickCell:function(index,field,value){
			pmyGrid1.rowindex=index;
			pmyGrid1.cellfield=field;
			pmyGrid1.cellvalue=value;
			var rows=$("#"+pmyGrid1.id).datagrid('getRows');    // get current page rows
			pmyGrid1.record=rows[pmyGrid1.rowindex];
			myGridEvents(pmyGrid1.id,'onClickCell');
		}		
	});	
	if (pmyGrid1.pagesize>0){
		myGridPaging(pmyGrid1);  //瀹氫箟鍒嗛〉鏍忔ā寮�
	}
	return pmyGrid1;
}

function myIsRowChecked(pmyGrid1){
	var flag=false;
	var grid=$("#"+pmyGrid1.id);
	var rows=grid.datagrid("getChecked"); //getChecked
	for (var i=0; i<rows.length; i++){
		if (pmyGrid1.record.rownumber==rows[i].rownumber){
			flag=true; break;
		}
	}
	return flag;
}


//ttttttttreegrid
function myTreeGrid(pmyGrid1){
	var str='';
	if (pmyGrid1.top>0 || pmyGrid1.left>0){
		str+='<div id="'+pmyGrid1.id+'_div" style="position:absolute;';
		if (pmyGrid1.top>0) str+=" top:"+pmyGrid1.top+"px;";
		if (pmyGrid1.left>0) str+=" left:"+pmyGrid1.left+"px;";
		str+='">';
	} 
	str+='<div id="'+pmyGrid1.id+'" class="easyui-treegrid" data-options="';
	if (pmyGrid1.toolbar!=undefined && pmyGrid1.toolbar!='') str+='toolbar:'+pmyGrid1.toolbar+'';
	str+='" style="position:absolute;" ></div>';
	if (pmyGrid1.top>0 || pmyGrid1.left>0){
		str+='</div>';
	} 
	$("#"+pmyGrid1.parent).append($(str));
	if (pmyGrid1.sortfield==undefined || pmyGrid1.sortfield=='') pmyGrid1.sortfield=pmyGrid1.keyfield;
	//if (pmyGrid1.sortway==undefined) pmyGrid1.sortway='';
	if (pmyGrid1.checkonclick==undefined) pmyGrid1.checkonclick=1; //鍗曞嚮鏄惁鏀瑰彉checkbox鐘舵�
	pmyGrid1.rowcount=0;
	pmyGrid1.columns=[];
	pmyGrid1.scrollcolumns=[];
	pmyGrid1.fixedcolumns=[];
	pmyGrid1.checkboxcolumn=[];

	pmyGrid1.fieldset=pmyGrid1.gridfields;
	pmyGrid1=myGridColumns(pmyGrid1);
	pmyGrid1.scrollcolumns=pmyGrid1.columnset;

	pmyGrid1.fieldset=pmyGrid1.fixedfields;
	pmyGrid1=myGridColumns(pmyGrid1);
	pmyGrid1.fixedcolumns=(pmyGrid1.fixedcolumns).concat(pmyGrid1.columnset);	
	pmyGrid1.columns=(pmyGrid1.fixedcolumns).concat(pmyGrid1.scrollcolumns);
	if (pmyGrid1.checkbox!=''){
		pmyGrid1.checkboxcolumn.push({field:"checkedflag", width: 20, checkbox: true, align:"center"});
	}
	if (pmyGrid1.fixedfields!='') pmyGrid1.fixedcolumns=pmyGrid1.checkboxcolumn.concat(pmyGrid1.fixedcolumns)
	else pmyGrid1.fixedcolumns=pmyGrid1.checkboxcolumn;
	if (pmyGrid1.width<=0) pmyGrid1.width='100%';
	if (pmyGrid1.height<=0) pmyGrid1.height='100%';
	var myGrid1=pmyGrid1.id;
	pmyGrid1.rowindex=-1;
	if (pmyGrid1.striped==undefined || pmyGrid1.striped=='') pmyGrid1.striped=false;
	else pmyGrid1.striped=true; 
	if (pmyGrid1.checkbox=='single') var selectoncheck=true;
	else var selectoncheck=false;
	$("#"+pmyGrid1.id).treegrid({
		title: '&nbsp;'+pmyGrid1.title,
		width: pmyGrid1.width,
		height: pmyGrid1.height,
		iconCls: "panelIcon",
		nowrap: true, //false,
		autoRowHeight: false, //true,
		//sortName: pmyGrid1.keyfield,
		remoteSort:false,
		sortOrder: 'asc', 		
		selectOnCheck: selectoncheck, //true,
		checkOnSelect: selectoncheck, //true,
		striped: pmyGrid1.striped,
		treeField: pmyGrid1.treefield,
        idField: 'id',
		frozenColumns: [pmyGrid1.fixedcolumns],
		columns: [pmyGrid1.scrollcolumns]
	});
	$("#"+pmyGrid1.id).attr('xcontextmenu',pmyGrid1.menu); //鑷畾涔夊睘鎬�
	$("#"+pmyGrid1.id).attr('xcheckbox',pmyGrid1.checkbox); //鑷畾涔夊睘鎬�
	if (pmyGrid1.menu!=undefined && pmyGrid1.menu!=''){
		$("#"+pmyGrid1.id).treegrid({
			onRowContextMenu: function(e,index,record){
				e.preventDefault(); //闃绘娴忚鍣ㄦ崟鑾峰彸閿簨浠� 
				var xmenu=$(this).attr('xcontextmenu');  //鑷畾涔夊睘鎬�
				var xcheckbox=$(this).attr('xcheckbox');
				if (xcheckbox=='single') $(this).datagrid("selectRow", index); //鏍规嵁绱㈠紩閫変腑璇ヨ  
				$('#'+xmenu).menu('show', {   //鏄剧ず鍙抽敭鑿滃崟  
					left: e.pageX, //鍦ㄩ紶鏍囩偣鍑诲鏄剧ず鑿滃崟  
					top: e.pageY  
				});
				myTreeEvents(pmyGrid1.id,'onRowContextMenu');
			}
		});
	}
	if (pmyGrid1.title==''){
		$("#"+pmyGrid1.id).treegrid({noheader: true});
	}
	if (pmyGrid1.rownumbers){
		$("#"+pmyGrid1.id).treegrid({rownumbers:true});	
	}
	if (pmyGrid1.collapsible){
		$("#"+pmyGrid1.id).treegrid({collapsible:true});	
	}
	if (pmyGrid1.checkbox=='single'){
		$("#"+pmyGrid1.id).treegrid({singleSelect:true});
	}else if (pmyGrid1.checkbox=='multiple'){
		$("#"+pmyGrid1.id).treegrid({singleSelect:false});
	}
	if (pmyGrid1.sortablefields!=undefined && pmyGrid1.sortablefields!=''){
		var cols=$("#myGrid1").treegrid('options').columns[0];
	}
		
	$("#"+pmyGrid1.id).treegrid({
		onDblClickRow: function(node){
			if (node.state=='closed') $(this).treegrid('expand', node.id);
			else $(this).treegrid('collapse', node.id);
			myTreeEvents(pmyGrid1.id,'ondblclick',node);
			
		},
		 onSelect: function(node){
			pmyGrid1.selectednode=node;
			myTreeEvents(pmyGrid1.id,'onselect',node);
		},
		filter: function(q, node){  //杩囨护锛屾寜鍔╄鐮佽繃婊�
			var xtext=node.text.toLowerCase();
			var qtext=q.toLowerCase();
			var flag1=xtext.indexOf(qtext) >= 0;
			var flag2=myGetMemoCode(xtext).indexOf(qtext) >= 0;
			return flag1+flag2;
		}		
	});	
	return pmyGrid1;
}
//------------------------------eeeeeeeeeeeevents---------------------
function myCheckBoxChange(id,items){
	//璁查�涓�淇濆瓨鍒癷d_hiddenfield鎺т欢涓�
	var str='';
	var tmp=items.split(';');
	for (var i=1;i<=tmp.length;i++){
		if (i==1 &&tmp.length==1) var itemid=id;
		else var itemid=id+i;
		if ($('#'+itemid).is(':checked')) str+=';'+tmp[i-1];
	}
	$('#'+id).val(str.substr(1));
}

function myGetComboxData(id,sql){  //浠庡悗鍙拌幏鍙栨暟鎹洿鎺ョ粰瀹㈡埛绔�
	$.ajax({     
		type: "Post",     
		url: "system/easyui_getComboxData.jsp",     
		//contentType: "application/json; charset=utf-8",     
		//dataType: "json", 
		data: {database: sysdatabasestring, selectsql: myToXcode(sql)}, 
		async: false, method: 'post',    
		success: function(data) {     
			//杩斿洖鐨勬暟鎹敤data鑾峰彇鍐呭,鐩存帴澶嶅埗鍒板鎴风鏁扮粍source      
			var source=eval(data); 
			$("#"+id).combobox({data: source});
			/*
			var items = $('#'+id).combobox('getData');
			if (items.length<=12) $('#'+id).combobox({panelHeight: 'auto'});
			else $('#'+id).combobox({panelHeight: 12*(syslabel.fontsize+8)});
			if (items.length > 0) {
				$("#"+id).combobox('select', eval("items[0]."+id));
			}
			*/
			if (source.length<=12) $('#'+id).combobox({panelHeight: 'auto'});
			else $('#'+id).combobox({panelHeight: 12*(syslabel.fontsize+8)});
			if (source.length > 0) {
				//$("#"+id).combobox('select', eval("source[0]."+id));  //浼氳Е鍙憇elect浜嬩欢锛屽嚭閿�
				$("#"+id).combobox('setValue', eval("source[0]."+id));
			}
			
		},     
		error: function(err) {     
			console.log(err);     
		}     
	}); 
}

function mySetComboxByIndex(id,index){  //璁剧疆combobox閫夐」
	if ($('#'+id).length>0){
		var items = $('#'+id).combobox('getData');
		if (items.length > 0 && index<items.length) {
			$("#"+id).combobox('setValue', eval("items[index]."+id));
		}
	}
}

function mySelectComboByIndex(id,index){  //璁剧疆combobox閫夐」
	if ($('#'+id).length>0){
		var items = $('#'+id).combobox('getData');
		if (items.length > 0 && index<items.length) {
			$("#"+id).combobox('select', eval("items[index]."+id));
		}
	}
}

function mySetTreeNodeByIndex(id,index){  //璁剧疆combobox閫夐」
	//閫変腑绗琻涓粨鐐�
	var item = $('#'+id).tree('getRoot');
	if (item.children) $("#"+id).tree('expand', item.target);
	$("#"+id).tree('select', item.target);
	//$("#"+id).tree('select', index);
	//$("#"+id).tree('find', value);
}

//灏嗚〃鏍兼垨鏍戣妭鐐瑰�璧嬪�鍒拌〃鍗�
function mySetFormValues(fieldset,source){
	//灏嗙鍚圝son鏍煎紡鐨勮鎴栬妭鐐瑰�澶嶅埗鍒拌〃鍗昮ieldset涓�
	var xfields=[];
	var k=0;
	if (fieldset==undefined || fieldset==''){
		$.each(source, function(id, value) {  //鍙杍son涓瘡涓垪鍙婂叾鍊�
			xfields[k]=id; k++;
		});
	}else{
		xfields=fieldset.split(';');
	}
	if (source!=null){
		for (var k=0;k<xfields.length;k++){
			var value=eval("source."+xfields[k]);
			if (value!=undefined) mySetValue(xfields[k],value);
		}
	}else{
		for (var k=0;k<xfields.length;k++){
			mySetValue(xfields[k],'');
		}
	}
}

//灏嗚〃鏍艰缃负鍙鎴栧彇娑堝彧璇籸rrrrrrreadonly
//function mySetFormReadonly(flag){  //瀵瑰嚱鏁板畾涔夌殑鎺т欢锛堝寘鎷瑇id鑷畾涔夊睘鎬х殑锛夊彧璇�
	//mySetReadonly('',flag);
//}

function mySetReadonly(c,flag){  //瀵瑰嚱鏁板畾涔夌殑鎺т欢锛堝寘鎷瑇id鑷畾涔夊睘鎬х殑锛夊彧璇�
	//c涓虹┖鏃讹紝瀵规墍鏈墄id灞炴�闈炵┖鐨勬帶浠惰缃彧璇�
	var xfields=[];
	if (c!='') xfields=c.split(';');
	else{
		var k=0;
		$('input, select, textarea').each(function(index){  
			var input = $(this);
			if (input.attr('id')!=undefined && input.attr('xid')!=undefined && input.attr('xid')!=''){
				xfields[k]=input.attr('id');
				k++;
			}	
		});	
	}	
	var type='';
	var id='';
	var value='';
	var hidden='';
	var pid='';  //checkbox鐨勫ぇ缁勫悕绉�
	for (k=0;k<xfields.length;k++){
		//var input = $(this);
		var input=$("#"+xfields[k]);
		id=input.attr('id');
		type=input.attr('type');
		hidden=input.attr('hidden');
		if (id!=undefined && hidden!='hidden'){
			if (type=='text') $("#"+id).textbox('readonly',flag);
			else if (type=='textarea') $("#"+id).attr('readonly',flag);
			else if (type=='combobox') $("#"+id).combobox('readonly',flag);
			else if (type=='checkbox') $("#"+id).attr('disabled',flag);
			else if (type=='keditor'){
				if (flag) var str="window."+id+".readonly(true);";
				else var str="window."+id+".readonly(false);";
				eval(str);
			}
			else $("#"+id).attr('readonly',flag);
			//myBindKeyDownEvent(id);
		}
   	}
}

function myShowPanel(c,flag){  //闅愯棌鎴栨樉绀簆anel
	var xfields=c.split(';');
	for (var k=0;k<xfields.length;k++){
		var input=$('#'+xfields[k]);
		if (xfields[k]!='' && input.length>0){
			if (flag) input.panel('open');
			else input.panel('close');;
		}
	}	
}

function myShowButton(c,flag){  //闅愯棌鎴栨樉绀烘帶浠�
	var xfields=c.split(';');
	for (var k=0;k<xfields.length;k++){
		var input=$("#"+xfields[k]);
		if (xfields[k]!='' && input.length>0){
			if (flag) input.show();
			else input.hide();
		}
		var input1=$("#"+xfields[k]+"_sep");
		if (xfields[k]!='' && input1.length>0){
			if (flag) input1.css({"border-left":'1px solid LightGrey'});
			else input1.css({"border-left":'0px'});
		}
	}	
}

function mySetEnabled(c,flag){  //瀵瑰嚱鏁板畾涔夌殑鎺т欢锛堝寘鎷瑇id鑷畾涔夊睘鎬х殑锛夊彧璇�
	var xfields=c.split(';');
	for (var k=0;k<xfields.length;k++){
		var input=$("#"+xfields[k]);
		if (input.length>0){
			type=input.attr('xtype');
			if (type=='linkbutton'){
				if (flag) input.linkbutton('enable');
				else{
					input.linkbutton('disable');
				} 
			}else if (type='menuitem'){
				var parent=$("#"+input.attr('xparent'));
				if (flag){
					parent.menu('enableItem',$("#"+xfields[k]));
				}else{
					parent.menu('disableItem',$("#"+xfields[k]));
				}
			}
		}
   	}
}

function myClearForm(fieldset){  //閲嶇疆琛ㄥ崟	
	var xfields=[];
	var i=0;
	if (fieldset==undefined || fieldset==''){
		$('input, select, textarea').each(function(index){  
			var input = $(this);
			id=input.attr('id');
			xfields[i]=id;
			i++;
		});
	}else{
		xfields=fieldset.split(';');
	}
	for (var i=0;i<xfields.length;i++){
		mySetValue(xfields[i],'');
   	}
}

function mySetValue(id,value){	
	var input = $("#"+id);
	if (input.length>0){
		value=value+"";  //杞崲绫诲瀷
		if (value!='') value=value.replaceAll("<br>","\n");  //灏�br>鏇挎崲涓哄洖杞�蹇呴』鍐欙紝鍖呮嫭keditor
		var type=input.attr('type');
		if (type==undefined || type=='') var type=input.attr('xtype');
		var hidden=input.attr('hidden');
		var parent=input.attr('xparent');
		if (type=='text' && hidden!='hidden'){ 
			input.textbox('setValue',value);
		}else if (type=='combobox'){ 
			input.combobox('setValue',value);
		}else if (type=='checkbox'){  //鍗曚釜checkbox
			var checked=true;
			if (value==0) checked=false;
			$("#"+id).prop("checked", checked);
		}else if (type=='radio'){  //澶氫釜鏃犵嚎鎸夐挳radio
			$("input[id='"+id+"'][value='"+value+"']").attr("checked",true); 
		}else if (type=='checkboxgroup'){  //checkbox缁�
			var count=input.attr('xitemcount');
			for (var i=0;i<count;i++){
				var checked=false;
				var item=$("#"+id+(i+1));
				if ((';'+value+';').indexOf(';'+item.attr('xtext')+';')>=0) var checked=true;
				else var checked=false;
				item.prop("checked",checked);
			}	
		}else if (type=='label'){ 
			input.html(value);
		}else if (type=='keditor'){  //kindeditor
			//value=replace92(value,'\\\\');  //浣跨敤鍑芥暟鏇挎崲寮篭鏇挎崲鎴怽\
			//value=myReplace(value,"'","\'");  //瀛椾綋绛変腑鐨勫崟寮曞彿
			//str="window."+id+".html('"+value+"');"  //鎹㈣鍑虹幇闂锛屼笉鑳界敤杩欑鏂规硶
			//value=value.replaceAll(String.fromCharCode(10),'');
			str="window."+id+".html(value);"
			eval(str);
		}else if (type=='image'){ //鍥惧舰
			input.attr('src',value);
			myResizeImage(id,value,input.attr('xheight'),input.attr('xwidth'));
		}else{
			input.val(value);			
		}			
	}
}

function myGetValue(id){	
	var input = $("#"+id);
	var value='';
	if (input.length>0){
		var type=input.attr('type');
		if (type==undefined) var type=input.attr('xtype');
		var hidden=input.attr('hidden');
		var parent=input.attr('xparent');
		var flag=1;
		//if ($("#"+parent)!=undefined){
		 //	if ($("#"+parent).attr('type')!=undefined && $("#"+parent).attr('type')=='window') flag=0;
		//}   
		if (type=='text' && hidden!='hidden'){ //textbox
			value=input.textbox('getValue');
		}else if (type=='combobox'){ 
			value=input.combobox('getValue');
		}else if (type=='checkbox'){  //鍗曚釜checkbox
			if (input.is(':checked')) value=1;
			else value=0;
		}else if (type=='radio'){  //radio
			value=$("input[id='"+id+"']:checked").val() ;
		}else if (type=='checkboxgroup'){  //checkbox缁勫悎
			var count=input.attr('xitemcount');
			var value='';
			for (var i=0;i<count;i++){
				if (i==1 && count==1) var itemid=id;
				else var itemid=id+(i+1);
				if ($('#'+itemid).is(':checked')) value+=';'+$('#'+itemid).attr('xtext');
			}
			value=value.substr(1);
		}else if (type=='label'){ 
			value=input.html();
		}else if (type=='keditor'){
			//str="var editor_"+id+"=KindEditor.create('textarea[id=\""+id+"\"]');";
			str="value=window."+id+".html()";
			eval(str);			
			//value=value.replaceAll(String.fromCharCode(10),'');
		}else if (type=='image'){ //鍥惧舰
			value=input.attr('src');
		}else{
			value=input.val();			
		}			
	}
	return trim(''+value);
}

function mySetRecordValuebyForm(record,fieldset){  //灏嗚〃鍗曟暟鎹祴鍊煎埌璁板綍鎴栨爲鑺傜偣涓�
	var xfields=[];
	if (fieldset==undefined || fieldset==''){
		k=0;
		$.each(record, function(id,value){
			xfields[k]=id; k++;
		});
	}else{
		xfields=fieldset.split(';');
	}
	for (var k=0;k<xfields.length;k++){
		eval('record.'+xfields[k]+'="'+myGetValue(xfields[k])+'";');
	}	
	return (record);
}

function mySetRecordValuebyJson(record,source){  //灏嗚〃鍗曟暟鎹祴鍊煎埌璁板綍鎴栨爲鑺傜偣涓�
	$.each(source, function(id,value){
		eval('record.'+id+'="'+value+'";');
	});
	return (record);
}

function myGenJsonData(json,fieldset){  //鏍规嵁琛ㄥ崟鍊肩敓鎴愪竴涓猨son鏍煎紡鏁版嵁
	//鑾峰彇json涓寘鍚殑鍒楁垨fieldset鐨勫垪锛岀敓鎴恓son鏍煎紡鏁版嵁
	var xfields=[];
	if (fieldset==undefined || fieldset==''){
		k=0;
		$.each(json, function(id,value){
			xfields[k]=id; k++;
		});
	}else{
		xfields=fieldset.split(';');
	}
	var result='{';
	for (var k=0;k<xfields.length;k++){
		if (k>0) result+=',';
		result+='"'+xfields[k]+'":"'+myGetValue(xfields[k])+'"';
	}
	result+='}';
	return (result);
}


function myGenInsertSql(xsysdatabasestring,tablename){  //鑾峰彇涓�釜琛ㄤ腑鍙紪杈戠殑鍒楀悕
	var fieldset='';
	$.ajax({     
		type: "Post",     
		url: "system//easyui_getEditableFields.jsp",     
		//contentType: "application/json; charset=utf-8",     
		//dataType: "json", 
		data: {
			database: xsysdatabasestring, 
			tablename: myToXcode(tablename) 			
		}, 
		async: false, method: 'post',    
		success: function(data) {   
			eval("fieldset="+data+";");
		}     
	});
	var sql='';
	if (fieldset!=''){
		var insertsql1="insert into "+tablename+"(";
		var insertsql2="values(";
		for (var i=0; i<fieldset.length; i++){
			var field=fieldset[i].field;
			var value=myToSqlValue(myGetValue(field));
			if (i>0){
				insertsql1+=','  
				insertsql2+=','
			}
			insertsql1+=field;
			if (fieldset[i].field=='m'){
				insertsql2+="replace('"+value+"',char(10),'')";  //memofield
			}else{
				if (value=='@sysdate') insertsql2+="getdate()";
				else insertsql2+="'"+value+"'";
			}
		}
		sql+=insertsql1+') '+insertsql2+')';
	}
	console.log(sql);
   	return(sql);
};	

//鐢熸垚update璇彞
function myGenUpdateSql(xsysdatabasestring,tablename,keyfield){  //鑾峰彇涓�釜琛ㄤ腑鍙紪杈戠殑鍒楀悕
	var fieldset='';
	$.ajax({     
		type: "Post",     
		url: "system//easyui_getEditableFields.jsp",     
		//contentType: "application/json; charset=utf-8",     
		//dataType: "json", 
		data: {
			database: xsysdatabasestring, 
			tablename: myToXcode(tablename)
		}, 
		async: false, method: 'post',    
		success: function(data) {
			eval("fieldset="+data+";");
		}   
	});
	var sql='';
	var field='';
	var type='';
	if (fieldset.length>0){
		sql="update "+tablename+" set ";
		for (var i=0; i<fieldset.length; i++){
			if (i>0){
				sql+=','  
			}
			field=fieldset[i].field;
			value=myToSqlValue(myGetValue(field));
			type=fieldset[i].type;
			if (type=='m'){
				sql+=field+"=replace('"+value+"',char(10),'')";
			}else{
				if (value=='@sysdate') sql+=field+"=getdate()";
				else sql+=field+"='"+value+"'";
			}
		}
		sql+=" where "+keyfield+"='"+myToSqlValue(myGetValue(keyfield))+"'";
	}
	console.log(sql);
   	return(sql);
};	

///dddddddddddddiv
function mySetDivHtml(labels,labelwidths,values,fieldwidths,margins){
	//鏍规嵁缁勫悎鍊硷紝鐢熸垚涓�澶氬垪鐨刪tml璇彞,syslabel.rowspace榛樿鍊�35%
	if (values==undefined) return '*';
	if (margins==undefined) margins='';
	labelwidths=labelwidths+'';
	fieldwidths=fieldwidths+'';
	var str='';
	var tmp1=labels.split(';');
	var tmp2=labelwidths.split(';');
	var tmp3=values.split(';');
	var tmp4=fieldwidths.split(';');
	var tmp5=margins.split(';');
	if (tmp5.length==0 || margins=='') str='<div style="line-height:'+syslabel.rowspace+'; margin:10px 0px 0px 16px;">\n';
	else{
		str='<div style="line-height:'+syslabel.rowspace+'; margin:';
		for (var i=0;i<tmp5.length;i++){
			str+=' '+tmp5[i]+'px';
		}
		str+=';">\n';   //澶栧眰
	}
	for (var i=0;i<tmp1.length;i++){
		if (tmp2[i]*1>0) str+='<div style="width:'+tmp2[i]+'px;float:left;">';
		else str+='<div style="float:left;">';
		str+=tmp1[i]+'</div>';  //鏄剧ず鏍囬
		if (tmp3[i]=='') tmp3[i]='<br>';
		if (tmp4[i]*1>0) str+='<div style="width:'+tmp4[i]+'px;float:left;"><u>'+tmp3[i]+'</u></div>';
		else str+='<div style=""><u>'+tmp3[i]+'</u></div>';
	}
	str+='</div>\n';
	return str;		
}


function myKeyDownEvent(c){   //kkkkkkkkkeydown
 	var pfield=[];
 	var k=0;
 	var ptype=''; 
 	var pid='';
 	var phidden='';
 	if (c!=undefined && c!='') pfield=c.split(';');
 	else{
 	 	//$('input, select, textarea').each(function(index){  
		$('input').each(function(index){  
			pfield[k]=$(this).attr('id');
			k++;
		});
	}		
	for (k=0; k<pfield.length; k++){
		pid=pfield[k];
		var pinput = $("#"+pfield[k]);    //$(this);
		ptype=pinput.attr('type');
		phidden=pinput.attr('hidden');
		//if (pid!=undefined && pinput!=undefined && phidden!='hidden' && ptype!='checkbox' && ptype!='textarea' && ptype!='file' && ptype!='button' ){
		if (pid!=undefined && pinput!=undefined && phidden!='hidden' && sys.keyeventcmp.indexOf(';'+ptype+';')>=0){
			myBindKeyDownEvent(pid);
			//var focused=document.activeElement;
			//if (this==focused) xno=i;
		}	
 	}  //for k
} 	
 	
function myBindKeyDownEvent(id){   //kkkkkkkkkeydown
	var type=$('#'+id).attr('type');
	var cmp=$('#'+id);
	if (cmp.length>0 && type!='checkbox' && type!='textarea' && type!='button' && type!='file'){
		$('#'+id).textbox('textbox').bind('keydown',function(e){
			var key=e.which;
			//e.preventDefault();  //涓嶈兘鍔狅紝鍚﹀垯鍙
			var xcmp=[];
			var xtype=[];
			var i=0;
			if (key==13 || key==40 || key==38){ //  || key==35 || key==36){  //38--up  40--down
				var xno=-1;
				//$('input, select, textarea').each(function(index){  
				$('input').each(function(index){  
					var input = $(this);
					field=input.attr('id');
					type=input.attr('type');
					hidden=input.attr('hidden');
					if (field!=undefined && hidden!='hidden'){
						if (id==field) xno=i;
						xcmp[i]=field;
						xtype[i]=type;
						i++;
					}
				});
				if (xno<xcmp.length && xno>=0){
					var n=0;
					if (key==13 || key==40 ){  //鍚戜笅
						if (xno<=i) n=xno+1;
						else n=i;
					}else if (key==38 ){   //鍚戜笂
						if (xno>0) n=xno-1;
						else n=0;
					} 
					var xnewcmp=xcmp[n];
					var xtype=xtype[n];
					//$('#'+xnewcmp).next().find('input').focus();
					if (xtype=='textarea') $("#"+xnewcmp).focus();
					else $("#"+xnewcmp).next("span").find("input").focus();
				}
			}
		});
	}
}	

function myDisableCmp(items,flag){
	var tmp=items.split(';')
	for (var i=0; i<tmp.length; i++){
		var cmp=$("#"+tmp[i]);
		if (cmp.length>0){
			var xclass=cmp.attr('class');
			if (xclass.indexOf('linkbutton')>=0){ 
				//cmp.prop('disabled', flag);
				if (flag) cmp.linkbutton('disable');
				else cmp.linkbutton('enable');
			}else if (xclass.indexOf('menubutton')>=0 || xclass.indexOf('menu-item')>=0){
				if (flag) cmp.menubutton({'disabled':true, hasDownArrow: false});
				else cmp.menubutton({'disabled':false, hasDownArrow: false});			
			}else{  // if (xclass.indexOf('file')>=0)
				document.getElementById(tmp[i]).disabled=flag; //绂佹HTML鎺т欢鎸夐挳
			}
		}
	}
}

function myFocus(id){
	var cmp=$("#"+id);
	var xtype=cmp.attr('type');
	if (xtype=='textarea') cmp.focus();
	else cmp.next("span").find("input").focus();
}

function xmySelectOnFocus(){
//IE绗竴涓帶浠朵笉浼氶�涓�
	$("input").focus(function(){
	    $(this).on("click.a keyup.a", function(e){      
	        $(this).off("click.a keyup.a").select();
	    });
	});
}
	
function mySelectOnFocus(){
	$('input').on('focus', function() {
		var $this = $(this)
		.one('mouseup.mouseupSelect', function() {
			$this.select();
			return false;
		})
		.one('mousedown', function() {
			// compensate for untriggered 'mouseup' caused by focus via tab
			$this.off('mouseup.mouseupSelect');
		})
		.select();
	});
}


function myGetChartXMLHeader(pmyChart){
	//杩斿洖fusionchart鍥捐〃鏂囦欢鐨剎ml鏂囦欢澶�
	var str="<chart caption=\""+pmyChart.title+"\" XAxisName=\""+pmyChart.xAxisName+"\" YAxisName=\""+pmyChart.yAxisName+"\"";
	str+="\n numberPrefix=\"\" showValues=\"0\" formatNumberScale=\"0\" showAboutMenuItem=\"0\"";
	str+="\n seriesNameInToolTip=\"1\" chartTopMargin=\"10\" chartBottomMargin=\"10\" chartLeftMargin=\"10\" chartRightMargin=\"10\"";
	str+="\n baseFont=\"瀹嬩綋\" baseFontSize=\"10\"";
	str+="\n exportEnabled=\"1\" exportDialogMessage=\"姝ｅ湪瀵煎嚭,璇风◢鍊�..\" exportFormats=\"JPEG=瀵煎嚭涓篔PG鍥剧墖|PNG=瀵煎嚭涓篜NG鍥剧墖|PDF=瀵煎嚭涓篜DF鏂囦欢\"";
	str+="\n exportDataMenuItemLabel=\"瀵煎嚭鍥剧墖\" showExportDataMenuItem=\"1\" exportAtClient=\"1\"";
	str+="\n useRoundEdges=\"1\" animation=\"0\" palette=\"2\" >";
	return(str);
};	

function myGetChartXMLFooter(pmyChart){
	//杩斿洖fusionchart鍥捐〃鏂囦欢鐨剎ml鏂囦欢灏鹃儴
	var str="\n <styles>";
	str+="\n <definition>";
	str+="\n <style type=\"font\" color=\"666666\" name=\"CaptionFont\" font=\"榛戜綋\" size=\"16\" />";
	str+="\n <style type=\"font\" name=\"SubCaptionFont\" font=\"瀹嬩綋\" size=\"12\" bold=\"0\" />";
	str+="\n </definition>";
	str+="\n <application>";
	str+="\n <apply toObject=\"caption\" styles=\"CaptionFont\" />";
	str+="\n <apply toObject=\"SubCaption\" styles=\"SubCaptionFont\" />";
	str+="\n </application>";
	str+="\n </styles>";
	str+="\n </chart>";
	return(str);
};

function myGetFunnelXML(pmyChart){
	var xml='<chart caption="閿�敭棰濇帓鍚嶅墠10鍚� decimals="0" numberPrefix="$" streamlinedData="0" bgColor="f7f2ea" borderColor="f7f2ea" chartLeftMargin="50" chartRightMargin="50" chartTopMargin="5" chartBottomMargin="5" baseFont="瀹嬩綋" baseFontSize="12" exportEnabled="1" showAboutMenuItem="0" borderthickness="0" bgAlpha="100" >';
	for (var i=0;i<pmyChart.data.length;i++){
		var s1=eval('pmyChart.data['+i+'].'+pmyChart.labelfield);
		var s2=eval('pmyChart.data['+i+'].'+pmyChart.valuefield);
		xml+="<set label='"+eval('pmyChart.data['+i+'].'+pmyChart.labelfield)+"'";
		xml+=" value='"+eval('pmyChart.data['+i+'].'+pmyChart.valuefield)+"'";
		if (pmyChart.sliced){
			xml+=" issliced='1'"; 		    
	    }
	    xml+=' />\n';
	}
	xml+='\n</chart>';
	return xml;
}

function myGetAngularXML(pmyChart){
	var deltax=70+parseInt(pmyChart.radius-pmyChart.label.length*12/2);
	var deltay=parseInt(pmyChart.height/2)+25;
	pmyChart.xml='';
	pmyChart.xml+='<chart bgCOlor="FFFFFF" upperLimit="'+pmyChart.max+'" lowerLimit="'+pmyChart.min+'" showAboutMenuItem="0" baseFontColor="FFFFFF"'+  
	'\n majorTMNumber="9" majorTMColor="FFFFFF"  majorTMHeight="8" majorTMThickness="5" minorTMNumber="5" minorTMColor="FFFFFF"'+ 
	'\n	chartTopMargin="0" chartBottomMargin="0" minorTMHeight="3" minorTMThickness="2" pivotRadius="10" pivotBgColor="000000" pivotBorderColor="FFFFFF" '+
	'\n	pivotBorderThickness="2" hoverCapBorderColor="FFFFFF" toolTipBgColor="333333"  gaugeOuterRadius="110" '+
  	'\n	gaugeScaleAngle="300" gaugeAlpha="0" decimalPrecision="0" displayValueDistance="0" showColorRange="0"'+ 
  	'\n	placeValuesInside="1" pivotFillMix="" showPivotBorder="1" annRenderDelay="0">'+
	'\n	<dials>'+ 	
	'\n	<dial value="'+pmyChart.value+'" bgColor="000000" borderColor="FFFFFF" borderAlpha="100" baseWidth="4" topWidth="4" editMode="1" borderThickness="2"/>'+
	'\n	</dials>'+
  	'\n	<annotations>'+
	'\n	<annotationGroup xPos="'+parseInt(pmyChart.width/2)+'" yPos="'+parseInt(pmyChart.height/2)+'">'+
	'\n	<annotation type="circle" radius="'+pmyChart.radius+'" startAngle="0" endAngle="360" fillAsGradient="1" fillColor="4B4B4B, AAAAAA" fillAlpha="100,100"  fillRatio="95,5" />'+
	'\n	<annotation type="circle" xPos="0" yPos="0" radius="'+(pmyChart.radius-10)+'" startAngle="0" endAngle="360" showBorder="1" borderColor= "cccccc" fillAsGradient="1"  fillColor="ffffff, 000000"  fillAlpha="50,100"  fillRatio="1,99" />'+
	'\n	</annotationGroup>'+
	'\n	<annotationGroup xPos="'+deltax+'" yPos="'+deltay+'" showBelow="1">'+
	'\n	<annotation type="text" label="'+pmyChart.label+'" fontColor="FFFFFF" fontSize="12" isBold="0"/>'+
	'\n	</annotationGroup>'+
	'\n	</annotations>'+
	'\n</chart>';
	return (pmyChart.xml);	
}


//鐢熸垚fusionchart鐨剎ml
function myGetChartXML(pmyChart){
	var data=pmyChart.data;
	pmyChart.drilldownfields=[];
	if (pmyChart.drilldown!=undefined && pmyChart.drilldown!=''){
	   	var x1=pmyChart.drilldown.indexOf('(');
	   	var x2=pmyChart.drilldown.indexOf(')');
	   	var s=pmyChart.drilldown.substring(x1+1,x2);
	   	var str='';  //鍙傛暟鍊�
	   	pmyChart.drilldownfields=s.split(',');  //鍒嗙鍙傛暟
	   	pmyChart.drilldown=pmyChart.drilldown.substring(0,x1);
	}
	pmyChart.xml='';
	var xml='\n';
	if (pmyChart.type=='single' || pmyChart.type=='ss'){ //鍗曞簭鍒�
		for (var i=0;i<pmyChart.data.length;i++){
			var s1=eval('pmyChart.data['+i+'].'+pmyChart.labelfield);
			var s2=eval('pmyChart.data['+i+'].'+pmyChart.valuefield);
			xml+="<set label='"+eval('pmyChart.data['+i+'].'+pmyChart.labelfield)+"'";
			xml+=" value='"+eval('pmyChart.data['+i+'].'+pmyChart.valuefield)+"'";
			if (pmyChart.sliced){
				xml+=" issliced='1'"; 		    
		    }
		    //澶勭悊閽诲彇鐨勯摼鎺ュ弬鏁�
		    if (pmyChart.drilldown!=undefined && pmyChart.drilldown!=''){
		    	var pstr='';
		    	for (var m=0;m<pmyChart.drilldownfields.length;m++){
					var f=pmyChart.drilldownfields[m];
					if (f.substr(0,1)=='"' || f.substr(0,1)=="'") var v=eval(f);
					else var v=eval('pmyChart.data['+i+'].'+f);
					if (m>0) pstr+=',';
					if (v!=undefined) pstr+="\""+v+"\"";
					else pstr+="\""+f+"\"";
		    	}
		    	xml+=" link='javascript:"+pmyChart.drilldown+"("+pstr+")'";		    
		    	//xml+=" link='javascript:"+pmyChart.drilldown+"(\""+s1+"\")'";		    
		    }
		    xml+=' />\n';
		}
		pmyChart.xml=myGetChartXMLHeader(pmyChart);  //鍙杧ml鐨勬枃浠跺ご閮ㄥ垎
		pmyChart.xml+=xml;
		pmyChart.xml+=myGetChartXMLFooter(pmyChart);
	}else if (pmyChart.type=='multiple' || pmyChart.type=='ms'){  //澶氬簭鍒�
		xml+="\n<categories>";
		for (var i=0;i<pmyChart.data.length;i++){
			var s1=eval('pmyChart.data['+i+'].'+pmyChart.labelfield);
			xml+="\n	<category label=\""+s1+"\" />";
		}	
		xml+="\n</categories>";
		var yfields=pmyChart.valuefield.split(';');
		var ylabels=pmyChart.yAxisName.split(';');
		//澶勭悊鏌愪釜鎸囨爣
		var xcolor=[]
		if (pmyChart.colorset!=undefined) xcolor=pmyChart.colorset.split(';');
		j=0;
		for (var k=0;k<yfields.length;k++){  //绗竴涓簭鍒楁寚鏍�
			xml+="\n<dataset seriesname=\""+ylabels[k]+"\"";
			if (k>0) xml+=" parentYAxis=\"S\"";
			xml+=" >";
			for (var i=0;i<pmyChart.data.length;i++){
				var s1=eval('pmyChart.data['+i+'].'+pmyChart.labelfield);
				var s2=eval('pmyChart.data['+i+'].'+yfields[k]);
				xml+="\n	<set ";
				if (xcolor.length>0){
					xml+=" color=\""+xcolor[j]+"\"";
					j++;
					if (j>=xcolor.length) j=0;
				}
				xml+=" value=\""+s2+"\"";

			    //澶勭悊閽诲彇鐨勯摼鎺ュ弬鏁�
			    if (pmyChart.drilldown!=undefined && pmyChart.drilldown!=''){
			    	var pstr='';
			    	for (var m=0;m<pmyChart.drilldownfields.length;m++){
						var f=pmyChart.drilldownfields[m];
						if (f.substr(0,1)=='"' || f.substr(0,1)=="'") var v=eval(f);
						else var v=eval('pmyChart.data['+i+'].'+f);
						if (m>0) pstr+=',';
						if (v!=undefined) pstr+="\""+v+"\"";
						else pstr+="\""+f+"\"";
			    	}
			    	xml+=" link='javascript:"+pmyChart.drilldown+"("+pstr+")'";		    
			    	//xml+=" link='javascript:"+pmyChart.drilldown+"(\""+s1+"\")'";		    
			    }
				xml+=" />";
			}
			xml+="\n</dataset>";
		}		
		pmyChart.xml=myGetChartXMLHeader(pmyChart);  //鍙杧ml鐨勬枃浠跺ご閮ㄥ垎
		pmyChart.xml+=xml;
		pmyChart.xml+='\n'+myGetChartXMLFooter(pmyChart);
	}else if (pmyChart.type=='angular'){
		pmyChart.xml=myGetAngularXML(pmyChart);
	}else if (pmyChart.type=='funnel'){
		pmyChart.xml=myGetFunnelXML(pmyChart);
	}
	return pmyChart;
}	

//鏄剧ずfusionchart鍥捐〃ffffffusion
function myShowFusionChart(pmyChart,swf,div){
	//Pyramid;浠〃鐩�AngularGauge;娓╁害璁�Thermometer
	var pw=$("#"+div).width();
	var ph=$("#"+div).height();
	var xwidth=0;
	var xheight=0;
	var charttype=[];
	charttype[1]=";MSSpline;MSColumn3D;MSColumn3DLineDY;MSSplineArea;MSLine;MSColumn2D;MSColumnLine3D;MSArea;";  //澶氬簭鍒�
	charttype[1]+="Line;Column3D;Column2D;Area2D;";    //鎶樼嚎鍥俱�鍦嗘煴浣撱�闈㈢Н鍥�
	charttype[2]=";MSBar3D;MSBar2D;Bar2D;";  //鏍忎綅鍥�
	charttype[3]=";Doughnut3D;Doughnut2D;Pie3D;Pie2D;";    //鍦嗛ゼ鍥剧幆褰㈠浘
	charttype[4]=";Pyramid;";  
	charttype[5]=";funnel;";    //鍦嗛ゼ鍥剧幆褰㈠浘
	//ert(charttype.length);
	if (pmyChart.data!=undefined)var n=pmyChart.data.length;
	else var n=1;
	for (var i=1;i<charttype.length-1;i++) charttype[i]=charttype[i].toLowerCase();
	var xswf=";"+swf.toLowerCase()+";";
	if (charttype[1].indexOf(xswf)>=0){  //鎶樼嚎鍥惧渾鏌卞浘
		xwidth=Math.max(n*7*6+172,600);
		xheight=300;
	}else if (charttype[2].indexOf(xswf)>=0){  //鏍忎綅鍥�
		xheight=Math.max(Math.min(280+n*12,700),450);
		xwidth=300;
	}else if (charttype[3].indexOf(xswf)>=0){  //鍦嗛ゼ鍥�
		xwidth=Math.max(Math.min(300+n*20,600),400);
		xheight=Math.max(Math.min(200+n*10,400),300);
		if (pmyChart.width>0){
			xwidth=pmyChart.width;
			pw=xwidth;
		}
		if (pmyChart.height>0){
			xheight=pmyChart.height;
			ph=xheight;
		}
	}else if (charttype[4].indexOf(xswf)>=0){  //鍦嗛敟鍥�
		xheight=Math.max(Math.min(350+n*12,700),450);
		xwidth=600;
	}
	
	if (pmyChart.width<=0 && xwidth<pw) xwidth='100%';
	else xwidth=Math.max(xwidth,pmyChart.width);
	if (pmyChart.height<=0 && xheight<ph) xheight='99%';
	else xheight=Math.max(xheight,pmyChart.height);
	//鏄剧ずchart
	var chart = new FusionCharts("jqeasyui/fusioncharts/swf/"+swf+".swf","chartid_"+sys.fusionchartno,""+xwidth+"",""+xheight+"","0","1");
	//var chart = new FusionCharts("system/fusioncharts/swf/MSColumnLine3D.swf", "myChart1","748","400","0","0");
  	chart.setDataXML(pmyChart.xml);
	//chart.setDataURL("system/fusioncharts/xml/Bar2D.xml");
  	chart.render(div);
  	//pmyChart.chartno++;
  	sys.fusionchartno++;
  	return pmyChart;
}	

//璋冪敤鍚庡彴excel杞崲绋嬪簭
function myExportExcelReport(xsysdatabasestring,pmyReport1){
	//?闂彿鏂瑰紡浼犻�鏃犳硶鍚戝悗鍙颁紶閫掑甫%鐨勫瓧绗�
	pmyReport1.headercells=pmyReport1.headercells.replace(eval("/"+"%"+"/g"),"锛�);
	pmyReport1.footercells=pmyReport1.footercells.replace(eval("/"+"%"+"/g"),"锛�);
	var filename="";
	$.ajax({
		url:'system//easyui_toExcelFile.jsp?headercells='+pmyReport1.headercells+'&footercells='+pmyReport1.footercells,
		data:{ database:xsysdatabasestring, 
			template:pmyReport1.template, 
			selectsql:myToXcode(pmyReport1.sql),
			fields:pmyReport1.fields,
			headerrange:pmyReport1.headerrange, 
			regionrange:pmyReport1.regionrange
		},									
		//method: 'POST',
		async:false, method: 'post',
   		success:function(data){
   			eval("var result="+data);
    		filename=result[0].filename;
		}	
	});
	//var xsourcefilename=filename;
	var url='system//easyui_fileDownLoad.jsp?source='+filename+'&target='+pmyReport1.targetfilename;
	window.location.href=url;
	return(url);
}

//鐢熸垚uniqueidentifier newid()
function myGenNewID(sysdatabasestring, tablename){
	
	
}

function myGetIPAddress(){  //鑾峰彇IP鍦板潃
	var source=[];
	$.ajax({     
		url: "system/easyui_getIPAddress.jsp",     
		async: false, method: 'post', 
		success: function(data) {     
			//杩斿洖鐨勬暟鎹敤data鑾峰彇鍐呭,鐩存帴澶嶅埗鍒板鎴风鏁扮粍source
			eval("source="+data); 
		}     
	});
	return source;
}
	

function myRunSelectSql(databasestring, sql){  //鍗曡缁撴灉闆�
	if (sql!='xcode') sql=myToXcode(sql);
	source=[];
	$.ajax({     
		type: "Post",     
		url: "system/easyui_execSelect.jsp",     
		//contentType: "application/json; charset=utf-8",     
		//dataType: "json", 
		data: {database: sysdatabasestring, selectsql: sql}, 
		async: false, method: 'post',    
		success: function(data) {     
			//杩斿洖鐨勬暟鎹敤data鑾峰彇鍐呭,鐩存帴澶嶅埗鍒板鎴风鏁扮粍source
			//xdata=data.replaceAll(String.fromCharCode(10),'');
			eval("source="+data+";");
			//source=eval(data); 
		}     
	});
	return source;
	//return (jQuery.parseJSON(source)); 
}


function myRunUpdateSql(databasestring, sql){  //鍗曡缁撴灉闆�
	sql=myToXcode(sql);
	result={};
	$.ajax({     
		type: "Post",     
		url: "system/easyui_execUpdate.jsp",     
		//contentType: "application/json; charset=utf-8",     
		//dataType: "json", 
		data: {database: sysdatabasestring, updatesql: sql}, 
		async: false, method: 'post',   
		success: function(data) {     
			//杩斿洖鐨勬暟鎹敤data鑾峰彇鍐呭,鐩存帴澶嶅埗鍒板鎴风鏁扮粍source      
			eval("result="+data);
		},     
		error: function(err) {     
			result="{'error':'"+err+"'}";     
		}     
	});
	return (result); 
}

function myOfficeToPdf(sourcefile,targetfile){
	var file1=myToXcode(sourcefile);
	var file2=myToXcode(targetfile);
	result={};
	$.ajax({     
		type: "Post",     
		url: "system/easyui_office2pdf.jsp",     
		//contentType: "application/json; charset=utf-8",     
		//dataType: "json", 
		data: {sourcefile:file1, targetfile:file2}, 
		async: false, method: 'post',   
		success: function(data) {     
			//杩斿洖鐨勬暟鎹敤data鑾峰彇鍐呭,鐩存帴澶嶅埗鍒板鎴风鏁扮粍source      
			result=''+data.trim();
		}     
	});
	return (result); 
}


function myDoFiles(action,filename,filetitle,targetfile){
	var filename=myToXcode(filename);
	var filetitle=myToXcode(filetitle);
	var targetfile=myToXcode(targetfile);
	var result='';
	$.ajax({     
		type: "Post",     
		url: "system/easyui_doFiles.jsp",     
		//contentType: "application/json; charset=utf-8",     
		//dataType: "json", 
		data: {action:action,filename:filename, filetitle:filetitle, targetfile:targetfile}, 
		async: false, method: 'post',   
		success: function(data) {     
			result=''+data.trim();
		}     
	});
	return (result); 
}

function mySendEmail(sender,email,subject,content){
	var s1=myToXcode(sender);
	var s2=myToXcode(email);
	var s3=myToXcode(subject);
	var s4=myToXcode(content);
	result={};
	$.ajax({     
		type: "Post",     
		url: "system/easyui_sendemail.jsp",     
		//contentType: "application/json; charset=utf-8",     
		//dataType: "json", 
		data: {sender: s1, receiver: s2, subject: s3, content: s4}, 
		async: false, method: 'post',   
		success: function(data) {     
			//杩斿洖鐨勬暟鎹敤data鑾峰彇鍐呭,鐩存帴澶嶅埗鍒板鎴风鏁扮粍source      
			result=''+data.trim();
		}     
	});
	return (result); 
}



function myDownLoadZipFiles(zipfile,fileurl,filename){
	var fileNameZip = encodeURI(encodeURI(zipfile));		//鎵撳寘鐨勬枃浠跺悕
	var fileUrlList = encodeURI(encodeURI(fileurl));		//璺緞鏂囦欢锛屼互 | 闅斿紑
	var fileNameList = encodeURI(encodeURI(filename));		//鍚勪釜瀛愭枃浠剁殑鏂囦欢鍚嶏紝浠�| 闅斿紑
	window.location.href = "system/easyui_zipFiles.jsp?fileName=" + fileNameZip + "&fileUrlList=" + fileUrlList + "&fileNameList=" + fileNameList;
}

function myGetCmpPos(objectId){
	o = document.getElementById(objectId);
	oTop = o.offsetTop;
	while(o.offsetParent!=null)	{  
		oParent = o.offsetParent 
		oTop += oParent.offsetTop  // Add parent top position
		o = oParent
	}
	return oTop
}

function myRotate(id,degree){
	var n=$("#"+id).attr('xrotate')*1+degree*1;
	if (n>360) n=n-360;
	//console.log(n);
	$("#"+id).rotate(n);
	$("#"+id).attr('xrotate',n);
}


/**
 * linkbutton鏂规硶鎵╁睍锛屽湪disable鏂规硶涓嬬姝㈢偣鍑�
 * @param {Object} jq
 */
$.extend($.fn.linkbutton.methods, {
    /**
     * 婵�椿閫夐」锛堣鐩栭噸鍐欙級
     * @param {Object} jq
     */
    enable: function(jq){
        return jq.each(function(){
            var state = $.data(this, 'linkbutton');
            if ($(this).hasClass('l-btn-disabled')) {
                var itemData = state._eventsStore;
                //鎭㈠瓒呴摼鎺�
                if (itemData.href) {
                    $(this).attr("href", itemData.href);
                }
                //鍥炲鐐瑰嚮浜嬩欢
                if (itemData.onclicks) {
                    for (var j = 0; j < itemData.onclicks.length; j++) {
                        $(this).bind('click', itemData.onclicks[j]);
                    }
                }
                //璁剧疆target涓簄ull锛屾竻绌哄瓨鍌ㄧ殑浜嬩欢澶勭悊绋嬪簭
                itemData.target = null;
                itemData.onclicks = [];
                $(this).removeClass('l-btn-disabled');
            }
        });
    },
    /**
     * 绂佺敤閫夐」锛堣鐩栭噸鍐欙級
     * @param {Object} jq
     */
    disable: function(jq){
        return jq.each(function(){
            var state = $.data(this, 'linkbutton');
            if (!state._eventsStore)
                state._eventsStore = {};
            if (!$(this).hasClass('l-btn-disabled')) {
                var eventsStore = {};
                eventsStore.target = this;
                eventsStore.onclicks = [];
                //澶勭悊瓒呴摼鎺�
                var strHref = $(this).attr("href");
                if (strHref) {
                    eventsStore.href = strHref;
                    $(this).attr("href", "javascript:void(0)");
                }
                //澶勭悊鐩存帴鑰﹀悎缁戝畾鍒皁nclick灞炴�涓婄殑浜嬩欢
                var onclickStr = $(this).attr("onclick");
                if (onclickStr && onclickStr != "") {
                    eventsStore.onclicks[eventsStore.onclicks.length] = new Function(onclickStr);
                    $(this).attr("onclick", "");
                }
                //澶勭悊浣跨敤jquery缁戝畾鐨勪簨浠�
                var eventDatas = $(this).data("events") || $._data(this, 'events');
                if (eventDatas["click"]) {
                    var eventData = eventDatas["click"];
                    for (var i = 0; i < eventData.length; i++) {
                        if (eventData[i].namespace != "menu") {
                            eventsStore.onclicks[eventsStore.onclicks.length] = eventData[i]["handler"];
                            $(this).unbind('click', eventData[i]["handler"]);
                            i--;
                        }
                    }
                }
                state._eventsStore = eventsStore;
                $(this).addClass('l-btn-disabled');
            }
        });
    }
});

$.fn.treegrid.defaults.loadFilter = function(data, parentId){
	var opts = $.data(this, 'treegrid').options;
	if (!opts.columns){
		var dgOpts = $.data(this, 'datagrid').options;
		opts.columns = dgOpts.columns;
		opts.frozenColumns = dgOpts.columns;
	}
	return data;
};

//鍙眰涓嬩竴灞傜殑瀛愯妭鐐癸紝榛樿鏄墍鏈夊眰娆＄殑瀛愯妭鐐癸紝鍗冲寘鎷瓙鑺傜偣鐨勫瓙鑺傜偣
$.extend($.fn.tree.methods,{
	getLeafChildren:function(jq, params){
		var nodes = [];
		$(params).next().children().children("div.tree-node").each(function(){
			nodes.push($(jq[0]).tree('getNode',this));
		});
		return nodes;
	}
});		

$.extend($.fn.textbox.methods, {
	setBorder: function(jq, border){
		var style = $('#easyui-textbox-border');
		if (!style.length){
			$('head').append(
					'<style id="easyui-textbox-border">' +
					'.textbox-noborder{border-color:transparent;border-radius:0}' +
					'</style>'
			);
		}
		return jq.each(function(){
			var span = $(this).next();
			if (border) {
				span.removeClass('textbox-noborder');
			} else {
				span.addClass('textbox-noborder');
			}
		});
	}
});

$.fn.getCursorPosition = function() {
    var input = this.get(0);
    if (!input) return; // No (input) element found
    if ('selectionStart' in input) {
        // Standard-compliant browsers
        return input.selectionStart;
    } else if (document.selection) {
        // IE
        input.focus();
        var sel = document.selection.createRange();
        var selLen = document.selection.createRange().text.length;
        sel.moveStart('character', -input.value.length);
        return sel.text.length - selLen;
    }
}
